<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[markdown ä¸€ä¸ªä¼˜é›…çš„å†™ä½œå·¥å…·]]></title>
      <url>/2018/02/14/markdown-%E4%B8%80%E4%B8%AA%E4%BC%98%E9%9B%85%E7%9A%84%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/</url>
      <content type="html"><![CDATA[<p>è¯´åˆ°å†™ä½œå·¥å…·ï¼Œä¸å¾—ä¸æçš„å°±æ˜¯ word äº†å§ï¼Œç°åœ¨æœ‰å“ªä¸ªå…¬å¸èƒ½ä¸ç”¨è¿™ä¸ªè½¯ä»¶å—ï¼Ÿä½œä¸ºæœ€æµè¡Œçš„å†™ä½œè½¯ä»¶ï¼Œword ç¡®å®æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ“ä½œæ¯”è¾ƒç›´è§‚ï¼Œæ‰€è§å³æ‰€å¾—ç­‰ç­‰ï¼Œä½†æ˜¯å¤§å®¶ä¹Ÿä¸€å®šé‡åˆ°è¿‡æ ·å¼è°ƒæ•´èµ·æ¥æ¯”è¾ƒç¹ççš„é—®é¢˜ï¼Œä¸åŒçš„å†…å®¹å¯èƒ½éœ€è¦é¢‘ç¹åœ°è°ƒæ•´å­—ä½“ã€å¤§å°ã€è¡Œè·ç­‰ç­‰ï¼Œè€Œä¸”è¿˜å¾ˆå®¹æ˜“å‡ºç°ä¸ä¸€è‡´ï¼Œæ•´ä½“éƒ½æ˜¾å¾—å¾ˆä¸åè°ƒï¼Œå½“ç„¶ä½ æ˜¯ word çš„é«˜çº§ç”¨æˆ·çš„è¯ï¼Œå¯èƒ½çŸ¥é“æœ‰æ¨¡æ¿è¿™ä¸ªä¸œè¥¿ï¼Œå¸®ä½ å®šä¹‰äº†ç»Ÿä¸€çš„æ ·å¼ï¼Œä½†æ˜¯é¦–å…ˆä½ è¦æˆä¸ºä¸€ä¸ªé«˜çº§ç”¨æˆ·ï¼Œæ€»ä¹‹ä½ éœ€è¦èŠ±å¾ˆå¤šé¢å¤–çš„æ—¶é—´åœ¨æ ·å¼çš„è°ƒæ•´ä¸Šé¢ï¼Œç¼–è¾‘ä½“éªŒå¾ˆå·®ï¼›å¦ä¸€æ–¹é¢ä¸åŒçš„ç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„æ ·å¼åå¥½ï¼Œé£æ ¼ä¸ç»Ÿä¸€ä¹Ÿå¾ˆå½±å“é˜…è¯»ä½“éªŒï¼›æ­¤å¤–ï¼Œä¿®è®¢åŠŸèƒ½çœŸçš„åšå¾—å¾ˆéš¾çœ‹â€¦â€¦éš¾çœ‹åˆ°ä¸å¤ªæƒ³â€¦â€¦</p>
<p>å…¶å® word çš„ä¸»è¦çš„é—®é¢˜æ ¹æºæ¥è‡ªäºå°†å†…å®¹å’Œæ ·å¼ç»‘å®šåœ¨ä¸€èµ·äº†ï¼Œå†™ä½œè€…éœ€è¦åŒæ—¶ç¼–è¾‘æ–‡ç« çš„å†…å®¹å’Œæ ·å¼ï¼Œè™½ç„¶å¾ˆçµæ´»ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯ä¸€ç§å¾ˆä½æ•ˆçš„æ–¹å¼ï¼Œå› ä¸ºåˆ›ä½œæœ¬èº«åªä¸å†…å®¹æœ‰å…³ã€‚ç›¸æ¯”ä¹‹ä¸‹ LaTeX é€šè¿‡ä¸ºå†…å®¹å®šä¹‰ä¸€äº›æ ‡ç­¾ï¼Œå†ç»Ÿä¸€å¯¹è¿™äº›æ ‡ç­¾å®šä¹‰æ ·å¼ï¼Œç¼–è¾‘ä½“éªŒå¯èƒ½ä¼šæ›´å¥½ä¸€äº›ï¼Œä½†æ˜¯å…¶å¤æ‚ç”šè‡³æœ‰äº›å¤æ€ªçš„è¯­æ³•ï¼Œåœ¨ä½¿ç”¨ä¸Šæœ‰æ¯”è¾ƒé«˜çš„é—¨æ§›ã€‚äº‹å®ä¸Šï¼Œword ä¹Ÿæä¾›äº†å†…å®¹å’Œæ ·å¼åˆ†ç¦»çš„æ–¹å¼ï¼Œå°±æ˜¯æ¨¡æ¿æ ·å¼ï¼Œä½†æ˜¯å½“ä½ çš„åˆçº§ç”¨æˆ·å·²ç»ä¹ æƒ¯äº†åŒæ—¶ç¼–è¾‘å†…å®¹å’Œæ ·å¼ï¼Œå°±å¾ˆéš¾å†æ”¹å˜ä»–ä»¬äº†ï¼Œå¦‚æœä½ ä¹Ÿåœ¨ä½¿ç”¨ word æˆ‘å»ºè®®ä½ å¤šç”¨ä¸€ç”¨æ¨¡æ¿ç›¸å…³çš„åŠŸèƒ½ï¼Œå¯ä»¥æé«˜ä½ ä¸å°‘æ•ˆç‡ï¼Œå½“ç„¶æˆ‘æ›´å»ºè®®ä½ ä½¿ç”¨æˆ‘ä¸‹é¢è¦å°†çš„ markdown å•¦ï¼Œä½ çœ‹åˆ°çš„è¿™ç¯‡æ–‡ç« ï¼ŒåŒ…æ‹¬è¿™ä¸ªå°ç«™é‡Œé¢æ‰€æœ‰çš„æ–‡ç« ä¹Ÿéƒ½æ˜¯ markdown ç¼–è¾‘è€Œæˆ</p>
<p>markdown å…¶å®å°±æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼Œç±»ä¼¼äº htmlï¼Œä½†æ˜¯æ¯” html ç®€å•å¾ˆå¤šï¼Œç®€å•åˆ°åªéœ€è¦ä¸‰åˆ†é’Ÿå°±å¯ä»¥å­¦ä¼šğŸ˜ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤šå†—ä½™çš„æ ‡ç­¾ï¼Œå†™ä½œè€…åªéœ€è¦å…³æ³¨åœ¨å†…å®¹ä¸Šï¼Œä½†æ˜¯å†™å‡ºæ¥çš„ä¸œè¥¿åªæ˜¯çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦å±•ç¤ºå‡ºæ¥å°±éœ€è¦ä¸€äº›ä¸“ä¸šçš„ markdown è½¯ä»¶äº†ï¼Œæ¯”å¦‚ <a href="http://www.mweb.im/" target="_blank" rel="noopener">mweb</a>ã€<a href="http://25.io/mou/" target="_blank" rel="noopener">mou</a>ã€<a href="http://macdown.uranusjr.com/" target="_blank" rel="noopener">macdown</a> ä¹‹ç±»çš„ï¼Œå¯ä»¥é€šè¿‡å¯¼å…¥ css æ–‡ä»¶æ¥å®šä¹‰æ ·å¼ï¼Œå¯ä»¥é€šè¿‡ä¸åŒçš„ css æ–‡ä»¶æ¥å®šä¹‰ä¸åŒçš„æ ·å¼ï¼Œéå¸¸çµæ´»ï¼Œå¦‚æœä½ æ²¡æœ‰ css æ–‡ä»¶ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ˜¾ç¤ºï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨ github ä¸Šé¢çš„æ ·å¼æ–‡ä»¶ï¼Œå½“ç„¶ä½ æ‡‚å‰ç«¯çš„è¯å®Œå…¨å¯ä»¥æŒ‰è‡ªå·±çš„å®¡ç¾ç¼–å†™ css æ–‡ä»¶å•¦ã€‚è¿™é‡Œ markdown å°†å†…å®¹å’Œæ ·å¼å®Œå…¨åˆ†ç¦»ï¼Œå†™ä½œæ—¶å®Œå…¨ä¸ç”¨å…³æ³¨æ ·å¼ï¼Œç¼–è¾‘ä½“éªŒå¤§å¤§æå‡ï¼›è€Œå¦ä¸€æ–¹é¢ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥æœ‰è‡ªå·±å–œå¥½çš„æ ·å¼ï¼ŒåŒæ ·çš„å†…å®¹åœ¨ä¸åŒçš„ç”¨æˆ·é¢å‰èƒ½å¤ŸæŒ‰ç…§ä»–ä»¬ä¹ æƒ¯çš„æ–¹å¼å±•ç¤ºå‡ºä¸åŒçš„é£æ ¼ï¼Œé˜…è¯»ä½“éªŒä¹Ÿæœ‰è¾ƒå¤§æå‡ï¼›ç”±äºæ˜¯çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œè¿˜å¯ä»¥é…åˆ git ä¹‹ç±»çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹å‡ºä¸åŒç‰ˆæœ¬çš„ä¿®æ”¹</p>
<p>å½“ç„¶è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œä½ åªå…³æ³¨ç¼–è¾‘ï¼Œä¸éœ€è¦å±•ç¤ºï¼Œé‚£ä½ å¯èƒ½åªéœ€è¦ä¸€ä¸ªåƒ sublime text 3 æˆ–è€… vscode ä¹‹ç±»çš„æ–‡æœ¬ç¼–è¾‘å™¨å°±å¯ä»¥äº†ã€‚å¤§éƒ¨åˆ†åšå®¢ç½‘ç«™éƒ½æ˜¯ç›´æ¥æ”¯æŒ markdown çš„ï¼Œå†™å®Œæ•´ä¸ªæ–‡ä»¶å†…å®¹å¸–è¿›å»å³å¯ï¼Œæˆ–è€…ä½ ç”¨ hexo ä¹‹ç±»çš„è½¯ä»¶æ­å»ºçš„åšå®¢å°ç«™ï¼Œæ›´æ˜¯ç›´æ¥åŸºäº markdown çš„</p>
<p>ç›®å‰ markdown å·²ç»æˆä¸ºäº†æœ€æµè¡Œçš„åšå®¢å†™ä½œå·¥å…·ï¼Œä¹Ÿæœ‰è¶Šæ¥è¶Šå¤šçš„æ–‡æ¡£å¼€å§‹ä½¿ç”¨ markdown æ¥ç®¡ç†ï¼Œå¿«ç‚¹å¼€å§‹ä½¿ç”¨ markdown æ¥æå‡ä½ çš„å·¥ä½œæ•ˆç‡å§</p>
<p>ä¸‹é¢é™„ä¸Š markdown çš„è¯­æ³•</p>
<pre><code># ä¸€çº§æ ‡é¢˜
### ä¸‰çº§æ ‡é¢˜
##### äº”çº§æ ‡é¢˜

æ­£æ–‡æ­£æ–‡æ­£æ–‡æ­£æ–‡æ­£æ–‡æ­£æ–‡æ­£æ–‡æ­£æ–‡æ­£æ–‡

**åŠ ç²—**
_å€¾æ–œ_

1. æœ‰åºåˆ—è¡¨
2. æœ‰åºæå½ª

- æ— åºåˆ—è¡¨
- æ— åºåˆ—è¡¨

&gt; å¼•ç”¨

[é“¾æ¥ç‚¹è¿™é‡Œ](http://xxx.com)
[!å›¾ç‰‡é“¾æ¥](/img/xxx.jpg)
&lt;http://xxx.com&gt;

| header1 | header2 | header3 |
|---------|---------|---------|
| column1 | column2 | column3 |
| column1 | column2 | column3 |
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> markdown </tag>
            
            <tag> å†™ä½œ </tag>
            
            <tag> å·¥å…· </tag>
            
            <tag> åšå®¢ </tag>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang restful æ¡†æ¶ä¹‹ go-swagger]]></title>
      <url>/2018/02/08/golang-restful-%E6%A1%86%E6%9E%B6%E4%B9%8B-go-swagger/</url>
      <content type="html"><![CDATA[<p>restful æ˜¯è¿™äº›å¹´çš„é«˜é¢‘è¯æ±‡äº†ï¼Œå„å¤§äº’è”ç½‘å…¬å¸ä¹Ÿéƒ½çº·çº·æ¨å‡ºäº†è‡ªå·±çš„ restful apiï¼Œå…¶å® restful å’Œ thriftï¼Œgrpc ç±»ä¼¼ï¼Œå°±æ˜¯ä¸€ç§åè®®ï¼Œä½†æ˜¯è¿™ç§åè®®æœ‰ç‚¹ç‰¹æ®Šçš„å°±æ˜¯ä½¿ç”¨ http æ¥å£ï¼Œè¿”å›çš„å¯¹è±¡ä¸€èˆ¬æ˜¯ json æ ¼å¼ï¼Œè¿™æ ·æœ‰ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥ä¾›å‰ç«¯çš„ js ç›´æ¥è°ƒç”¨ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œä½† http æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„åè®®ï¼Œåç«¯çš„å†…éƒ¨é€šä¿¡è¿˜æ˜¯ä½¿ç”¨ grpc æˆ–è€… thrift å¯ä»¥è·å¾—æ›´é«˜çš„æ€§èƒ½</p>
<p>å…¶å®å¦‚æœåªæ˜¯è¦ç”¨ http è¿”å› json æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹æƒ…ï¼Œä¸ç”¨ä»»ä½•æ¡†æ¶ï¼Œgolang æœ¬èº«ä¹Ÿèƒ½å¾ˆæ–¹ä¾¿åšåˆ°ï¼Œä½†æ˜¯å½“ä½ æœ‰å¾ˆå¤š api çš„æ—¶å€™ï¼Œè¿™äº› api çš„ç»´æŠ¤å’Œç®¡ç†å°±ä¼šå˜å¾—å¾ˆå¤æ‚ï¼Œä½ è‡ªå·±éƒ½æ— æ³•è®°ä½è¿™äº› api åº”è¯¥å¡«ä»€ä¹ˆå‚æ•°ï¼Œè¿”å›ä»€ä¹ˆï¼Œå½“ç„¶ä½ å¯ä»¥èŠ±å¾ˆå¤šæ—¶é—´å»ç»´æŠ¤ä¸€ä»½æ¥å£æ–‡æ¡£ï¼Œè¿™æ ·ä¸ä»…è€—æ—¶è€Œä¸”å¾ˆéš¾ä¿è¯æ–‡æ¡£çš„å³æ—¶æ€§ï¼Œå‡†ç¡®æ€§ä»¥åŠä¸€è‡´æ€§</p>
<p>swagger æœ‰ä¸€æ•´å¥—è§„èŒƒæ¥å®šä¹‰ä¸€ä¸ªæ¥å£æ–‡ä»¶ï¼Œç±»ä¼¼äº thrift å’Œ proto æ–‡ä»¶ï¼Œå®šä¹‰äº†æœåŠ¡çš„è¯·æ±‚å†…å®¹å’Œè¿”å›å†…å®¹ï¼ŒåŒæ ·ä¹Ÿæœ‰å·¥å…·å¯ä»¥ç”Ÿæˆå„ç§ä¸åŒè¯­è¨€çš„æ¡†æ¶ä»£ç ï¼Œåœ¨ golang é‡Œé¢æˆ‘ä»¬ä½¿ç”¨ go-swagger è¿™ä¸ªå·¥å…·ï¼Œè¿™ä¸ªå·¥å…·è¿˜æä¾›äº†é¢å¤–çš„åŠŸèƒ½ï¼Œå¯ä»¥å¯è§†åŒ–æ˜¾ç¤ºè¿™ä¸ªæ¥å£ï¼Œæ–¹ä¾¿é˜…è¯»</p>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸ªæ¡†æ¶çš„ä½¿ç”¨ï¼Œè¿˜æ˜¯ä¹‹å‰çš„ç‚¹èµè¯„è®ºç³»ç»Ÿï¼š<a href="https://github.com/hatlonely/microservices" target="_blank" rel="noopener">https://github.com/hatlonely/microservices</a></p>
<h3 id="go-swagger-ä½¿ç”¨æ–¹æ³•"><a href="#go-swagger-ä½¿ç”¨æ–¹æ³•" class="headerlink" title="go-swagger ä½¿ç”¨æ–¹æ³•"></a>go-swagger ä½¿ç”¨æ–¹æ³•</h3><h4 id="api-å®šä¹‰æ–‡ä»¶"><a href="#api-å®šä¹‰æ–‡ä»¶" class="headerlink" title="api å®šä¹‰æ–‡ä»¶"></a>api å®šä¹‰æ–‡ä»¶</h4><p>é¦–å…ˆéœ€è¦å†™ä¸€ä¸ª api å®šä¹‰æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘åªå±•ç¤ºå…¶ä¸­ä¸€ä¸ªæ¥å£ <code>countlike</code>ï¼Œè¯·æ±‚ä¸­å¸¦æœ‰æŸç¯‡æ–‡ç« ï¼Œè¿”å›ç‚¹èµçš„æ¬¡æ•°</p>
<pre><code>paths:
  /countlike:
    get:
      tags:
        - like
      summary: æœ‰å¤šå°‘èµ
      description: &#39;&#39;
      operationId: countLike
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: title
          in: query
          description: æ–‡ç« æ ‡é¢˜
          required: true
          type: string
      responses:
        &#39;200&#39;:
          description: æˆåŠŸ
          schema:
            $ref: &#39;#/definitions/CountLikeModel&#39;
        &#39;500&#39;:
          description: å†…éƒ¨é”™è¯¯
          schema:
            $ref: &#39;#/definitions/ErrorModel&#39;
definitions:
  CountLikeModel:
    type: object
    properties:
      count:
        type: integer
      title:
        type: string
        example: golang json æ€§èƒ½åˆ†æ
  ErrorModel:
    type: object
    properties:
      message:
        type: string
        example: error message
      code:
        type: integer
        example: 400
</code></pre><p>è¿™ä¸ªæ˜¯ yaml è¯­æ³•ï¼Œæœ‰ç‚¹åƒå»æ‰äº†æ‹¬å·çš„ json</p>
<p>è¿™é‡Œå®Œæ•´åœ°å®šä¹‰äº†è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å‚æ•°ã€æ­£å¸¸è¿”å›æ¥å£ã€å¼‚å¸¸è¿”å›ç»“æœï¼Œæœ‰äº†è¿™ä¸ªæ–‡ä»¶åªéœ€è¦æ‰§è¡Œä¸‹é¢å‘½ä»¤å°±èƒ½ç”Ÿæˆæ¡†æ¶ä»£ç äº†</p>
<pre><code>swagger generate server -f api/comment_like/comment_like.yaml
</code></pre><p>è¿˜å¯ä»¥ä¸‹é¢è¿™ä¸ªå‘½ä»¤å¯è§†åŒ–æŸ¥çœ‹è¿™ä¸ªæ¥å£æ–‡ä»¶</p>
<pre><code>swagger serve api/comment_like/comment_like.yaml
</code></pre><p>è¿™ä¸ªå‘½ä»¤ä¾èµ– swagger å·¥å…·ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤è·å–</p>
<p>Mac</p>
<pre><code>brew tap go-swagger/go-swagger
brew install go-swagger
</code></pre><p>Linux</p>
<pre><code>go get -u github.com/go-swagger/go-swagger/cmd/swagger
export PATH=$GOPATH/bin:$PATH
</code></pre><p>æ‰§è¡Œå®Œäº†ä¹‹åï¼Œä½ å‘ç°å¤šäº†å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­ <code>cmd</code> ç›®å½•é‡Œé¢åŒ…å« main å‡½æ•°ï¼Œæ˜¯æ•´ä¸ªç¨‹åºçš„å…¥å£ï¼Œ<code>restapi</code> æ–‡ä»¶å¤¹ä¸‹é¢åŒ…å«åè®®ç›¸å…³ä»£ç ï¼Œå…¶ä¸­ <code>configure_xxx.go</code> æ˜¯éœ€è¦ç‰¹åˆ«å…³æ³¨çš„ï¼Œä½ éœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢å®ç°ä½ å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</p>
<p>ç°åœ¨ä½ å°±å…¶å®å·²ç»å¯ä»¥è¿è¡Œç¨‹åºäº†ï¼Œ<code>go run cmd/comment-like-server/main.go</code>ï¼Œåœ¨æµè§ˆå™¨é‡Œé¢è®¿é—®ä¸€ä¸‹ä½ çš„ apiï¼Œä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå‘Šè¯‰ä½  api è¿˜æ²¡æœ‰å®ç°ï¼Œä¸‹é¢å°±æ¥å®ç°ä¸€ä¸‹å§</p>
<h4 id="ä¸šåŠ¡é€»è¾‘å®ç°"><a href="#ä¸šåŠ¡é€»è¾‘å®ç°" class="headerlink" title="ä¸šåŠ¡é€»è¾‘å®ç°"></a>ä¸šåŠ¡é€»è¾‘å®ç°</h4><pre><code>api.LikeCountLikeHandler = like.CountLikeHandlerFunc(func(params like.CountLikeParams) middleware.Responder {
    count, err := comment_like.CountLike(params.Title)
    if err != nil {
        return like.NewCountLikeInternalServerError().WithPayload(&amp;models.ErrorModel{
            Code: http.StatusInternalServerError,
            Message: err.Error(),
        })
    }
    return like.NewCountLikeOK().WithPayload(&amp;models.CountLikeModel{
        Count: count,
        Title: params.Title,
    })
})
</code></pre><p>ä½ åªéœ€è¦åœ¨è¿™äº› handler é‡Œé¢å®ç°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å³å¯ï¼Œè¿™é‡Œå¯¹åè®®çš„å°è£…éå¸¸å¥½ï¼Œé™¤äº†ä¸šåŠ¡é€»è¾‘ä»¥åŠæ‰“åŒ…è¿”å›ï¼Œæ²¡æœ‰å¤šä½™çš„é€»è¾‘</p>
<p>å†æ¬¡è¿è¡Œï¼Œç°åœ¨è¿”å›å·²ç»æ­£å¸¸äº†</p>
<h4 id="ç»Ÿä¸€å¤„ç†"><a href="#ç»Ÿä¸€å¤„ç†" class="headerlink" title="ç»Ÿä¸€å¤„ç†"></a>ç»Ÿä¸€å¤„ç†</h4><p>å¦‚æœä½ å¯¹è¯·æ±‚æœ‰ä¸€äº›æ“ä½œéœ€è¦ç»Ÿä¸€å¤„ç†ï¼Œæ¯”å¦‚è¾“å‡ºç»Ÿä¸€çš„æ—¥å¿—ä¹‹ç±»çš„ï¼Œå¯ä»¥é‡å†™è¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿåœ¨ <code>configure_xxx.go</code> è¿™ä¸ªæ–‡ä»¶ä¸­</p>
<pre><code>func setupGlobalMiddleware(handler http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;)
        handler.ServeHTTP(w, r)
    })
}
</code></pre><p>è¿™é‡Œæˆ‘ç»Ÿä¸€è®¾ç½®äº†ä¸€ä¸‹å¤´éƒ¨ï¼Œè§£å†³è·¨åŸŸè®¿é—®é—®é¢˜</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>go-swagger å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://goswagger.io" target="_blank" rel="noopener">https://goswagger.io</a></li>
<li>go-swagger githubï¼š<a href="https://github.com/go-swagger/go-swagger" target="_blank" rel="noopener">https://github.com/go-swagger/go-swagger</a></li>
<li>OpenApi 2.0ï¼š<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md" target="_blank" rel="noopener">https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md</a></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> swagger </tag>
            
            <tag> restful </tag>
            
            <tag> go-swagger </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang orm æ¡†æ¶ä¹‹ gorm]]></title>
      <url>/2018/02/08/golang-orm-%E6%A1%86%E6%9E%B6%E4%B9%8B-gorm/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨æƒ³ç»™è¿™ä¸ªå°ç«™å¢åŠ ç‚¹èµå’Œè¯„è®ºåŠŸèƒ½ï¼Œç¬¬ä¸‰æ–¹ç³»ç»Ÿåˆæœ‰å„ç§é™åˆ¶ï¼Œå°±æƒ³è‡ªå·±å¼„ä¸ªåç«¯ï¼Œå®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå¯¹äºä¸ªäººæ¥è¯´ï¼Œæ•°æ®é‡ä¸æ˜¯å¾ˆå¤§ï¼Œå•æœºçš„ mysql è¶³å¤Ÿå­˜ä¸‹æ‰€æœ‰æ•°æ®ï¼Œmysql ä½œä¸ºåº•å±‚å­˜å‚¨æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©</p>
<p>ä¹‹å‰åœ¨å…¬å¸æ˜¯ç›´æ¥ç”¨çš„ <code>github.com/go-sql-driver/mysql</code> è®¿é—®æ•°æ®åº“éƒ½æ˜¯ç›´æ¥ç”¨å†™ sqlï¼Œå–å‡ºç»“æœç„¶åè‡ªå·±æ‹¼æˆå¯¹è±¡ï¼Œä½¿ç”¨ä¸Šé¢ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå¯è¯»æ€§ä¹Ÿä¸å¥½ã€‚æƒ³èµ·ä¹‹å‰ç ”ç©¶ php laravel æ¡†æ¶çš„æ—¶å€™ï¼Œç›´æ¥æŠŠæ•°æ®åº“å±‚å±è”½äº†ï¼Œç”¨æˆ·çœ‹åˆ°çš„åªæœ‰å¯¹è±¡ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œjava é‡Œé¢è¿™ç§æ“ä½œæ–¹å¼åŸºæœ¬ä¸Šå·²ç»æˆäº†æ ‡å‡†åšæ³•ï¼Œå°±å» github ä¸Šæ‰¾äº†ä¸€ä¸‹ golang é‡Œé¢æœ‰æ²¡æœ‰ç±»ä¼¼çš„ä¸œè¥¿ï¼Œæœç„¶å·²ç»æœ‰éå¸¸æˆç†Ÿçš„æ¡†æ¶äº†ï¼Œ<code>github.com/jinzhu/gorm</code> å·²ç»æœ‰ 7k+ çš„ star äº†</p>
<p>ORMï¼ˆObject Relation Mappingï¼‰ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå®é™…ä¸Šå°±æ˜¯å¯¹æ•°æ®åº“çš„æ“ä½œè¿›è¡Œå°è£…ï¼Œå¯¹ä¸Šå±‚å¼€å‘äººå‘˜å±è”½æ•°æ®æ“ä½œçš„ç»†èŠ‚ï¼Œå¼€å‘äººå‘˜çœ‹åˆ°çš„å°±æ˜¯ä¸€ä¸ªä¸ªå¯¹è±¡ï¼Œå¤§å¤§ç®€åŒ–äº†å¼€å‘å·¥ä½œï¼Œæé«˜äº†ç”Ÿäº§æ•ˆç‡</p>
<p>å¥½äº†ï¼Œä¸‹é¢æˆ‘ä»¥è¿™ä¸ªç‚¹èµè¯„è®ºç³»ç»Ÿä¸ºä¾‹ï¼Œä»‹ç»ä¸€ä¸‹ gorm çš„ç®€å•ç”¨æ³•ï¼Œä»¥ä¸‹ä½¿ç”¨çš„å®Œæ•´ä»£ç ï¼š<a href="https://github.com/hatlonely/microservices/blob/master/internal/comment_like/comment_like.go" target="_blank" rel="noopener">https://github.com/hatlonely/microservices/blob/master/internal/comment_like/comment_like.go</a></p>
<h3 id="gorm-ç”¨æ³•ä»‹ç»"><a href="#gorm-ç”¨æ³•ä»‹ç»" class="headerlink" title="gorm ç”¨æ³•ä»‹ç»"></a>gorm ç”¨æ³•ä»‹ç»</h3><h4 id="åº“å®‰è£…"><a href="#åº“å®‰è£…" class="headerlink" title="åº“å®‰è£…"></a>åº“å®‰è£…</h4><pre><code>go get -u github.com/jinzhu/gorm
</code></pre><h4 id="æ•°æ®åº“è¿æ¥"><a href="#æ•°æ®åº“è¿æ¥" class="headerlink" title="æ•°æ®åº“è¿æ¥"></a>æ•°æ®åº“è¿æ¥</h4><pre><code class="golang">import (
    &quot;github.com/jinzhu/gorm&quot;
    _ &quot;github.com/jinzhu/gorm/dialects/mysql&quot;
ï¼‰

var db *gorm.DB

func init() {
    var err error
    db, err = gorm.Open(&quot;mysql&quot;, &quot;&lt;user&gt;:&lt;password&gt;/&lt;database&gt;?charset=utf8&amp;parseTime=True&amp;loc=Local&quot;)
    if err != nil {
        panic(err)
    }
}
</code></pre>
<p>è¿æ¥æ¯”è¾ƒç®€å•ï¼Œç›´æ¥è°ƒç”¨ <code>gorm.Open</code> ä¼ å…¥æ•°æ®åº“åœ°å€å³å¯</p>
<p><code>github.com/jinzhu/gorm/dialects/mysql</code> æ˜¯ golang çš„ mysql é©±åŠ¨ï¼Œå®é™…ä¸Šå°±æ˜¯ <code>github.com/go-sql-driver/mysql</code> ä½œè€…è¿™é‡Œä¸ºäº†å¥½è®°ï¼Œé‡æ–°å¼„äº†ä¸ªåå­—</p>
<p>è¿™é‡Œæˆ‘ç”¨çš„ mysqlï¼Œå®é™…ä¸Šæ”¯æŒåŸºæœ¬ä¸Šæ‰€æœ‰ä¸»æµçš„å…³ç³»æ•°æ®åº“ï¼Œè¿æ¥æ–¹å¼ä¸Šç•¥æœ‰ä¸åŒ</p>
<pre><code class="golang">db.DB().SetMaxIdleConns(10)
db.DB().SetMaxOpenConns(100)
</code></pre>
<p>è¿˜å¯ä»¥ä½¿ç”¨ <code>db.DB()</code> å¯¹è±¡è®¾ç½®è¿æ¥æ± ä¿¡æ¯</p>
<h4 id="è¡¨å®šä¹‰"><a href="#è¡¨å®šä¹‰" class="headerlink" title="è¡¨å®šä¹‰"></a>è¡¨å®šä¹‰</h4><p>å…ˆæ¥å®šä¹‰ä¸€ä¸ªç‚¹èµè¡¨ï¼Œè¿™é‡Œé¢ä¸€æ¡è®°å½•è¡¨ç¤ºæŸä¸ªç”¨æˆ·åœ¨æŸä¸ªæ—¶åˆ»å¯¹æŸç¯‡æ–‡ç« ç‚¹äº†ä¸€ä¸ªèµï¼Œç”¨ ip + ua æ¥æ ‡è¯†ç”¨æˆ·ï¼Œtitle æ ‡è¯†æ–‡ç« æ ‡é¢˜</p>
<pre><code class="golang">type Like struct {
    ID        int    `gorm:&quot;primary_key&quot;`
    Ip        string `gorm:&quot;type:varchar(20);not null;index:ip_idx&quot;`
    Ua        string `gorm:&quot;type:varchar(256);not null;&quot;`
    Title     string `gorm:&quot;type:varchar(128);not null;index:title_idx&quot;`
    Hash      uint64 `gorm:&quot;unique_index:hash_idx;&quot;`
    CreatedAt time.Time
}
</code></pre>
<p>gorm ç”¨ tag çš„æ–¹å¼æ¥æ ‡è¯† mysql é‡Œé¢çš„çº¦æŸ</p>
<p>åˆ›å»ºç´¢å¼•åªéœ€è¦ç›´æ¥æŒ‡å®šåˆ—å³å¯ï¼Œè¿™é‡Œåˆ›å»ºäº†ä¸¤ä¸ªç´¢å¼•ï¼Œ<code>ip_idx</code> å’Œ <code>title_idx</code>ï¼›å¦‚æœéœ€è¦å¤šåˆ—ç»„åˆç´¢å¼•ï¼Œç›´æ¥è®©ç´¢å¼•çš„åå­—ç›¸åŒå³å¯ï¼›å¦‚æœéœ€è¦åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼ŒæŒ‡å®šä¸º <code>unique_index</code> å³å¯</p>
<p>æ”¯æŒæ—¶é—´ç±»å‹ï¼Œç›´æ¥ä½¿ç”¨ <code>time.Time</code> å³å¯</p>
<h4 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h4><pre><code class="golang">if !db.HasTable(&amp;Like{}) {
    if err := db.Set(&quot;gorm:table_options&quot;, &quot;ENGINE=InnoDB DEFAULT CHARSET=utf8&quot;).CreateTable(&amp;Like{}).Error; err != nil {
        panic(err)
    }
}
</code></pre>
<p>ç›´æ¥é€šè¿‡ <code>db.CreateTable</code> å°±å¯ä»¥åˆ›å»ºè¡¨äº†ï¼Œéå¸¸æ–¹ä¾¿ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>db.Set</code> è®¾ç½®ä¸€äº›é¢å¤–çš„è¡¨å±æ€§</p>
<h4 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h4><pre><code class="golang">like := &amp;Like{
    Ip:        ip,
    Ua:        ua,
    Title:     title,
    Hash:      murmur3.Sum64([]byte(strings.Join([]string{ip, ua, title}, &quot;-&quot;))) &gt;&gt; 1,
    CreatedAt: time.Now(),
}

if err := db.Create(like).Error; err != nil {
    return err
}
</code></pre>
<p>å…ˆæ„é€ å·²ç»™å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨ <code>db.Create()</code> å°±å¯ä»¥æ’å…¥ä¸€æ¡è®°å½•äº†</p>
<h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><pre><code class="golang">if err := db.Where(&amp;Like{Hash: hash}).Delete(Like{}).Error; err != nil {
    return err
}
</code></pre>
<p>å…ˆç”¨ <code>db.Where()</code> æ„é€ æŸ¥è¯¢æ¡ä»¶ï¼Œå†è°ƒç”¨ <code>db.Delete()</code> å°±å¯ä»¥åˆ é™¤</p>
<h4 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h4><pre><code class="golang">var count int
err := db.Model(&amp;Like{}).Where(&amp;Like{Ip: ip, Ua: ua, Title: title}).Count(&amp;count).Error
if err != nil {
    return false, err
}
</code></pre>
<p>å…ˆç”¨ <code>db.Model()</code> é€‰æ‹©ä¸€ä¸ªè¡¨ï¼Œå†ç”¨ <code>db.Where()</code> æ„é€ æŸ¥è¯¢æ¡ä»¶ï¼Œåé¢å¯ä»¥ä½¿ç”¨ <code>db.Count()</code> è®¡ç®—æ•°é‡ï¼Œå¦‚æœè¦è·å–å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>db.Find(&amp;Likes)</code> æˆ–è€…åªéœ€è¦æŸ¥ä¸€æ¡è®°å½• <code>db.First(&amp;Like)</code></p>
<h4 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h4><pre><code class="golang">db.Model(&amp;user).Update(&quot;name&quot;, &quot;hello&quot;)
db.Model(&amp;user).Updates(User{Name: &quot;hello&quot;, Age: 18})
db.Model(&amp;user).Updates(User{Name: &quot;&quot;, Age: 0, Actived: false}) // nothing update
</code></pre>
<p>æˆ‘è¿™ä¸ªç³»ç»Ÿé‡Œé¢æ²¡æœ‰æ›´æ–°éœ€æ±‚ï¼Œè¿™å‡ ä¸ªä¾‹å­æ¥è‡ªäºå®˜ç½‘ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ›´æ–°å•æ¡è®°å½•ï¼›ç¬¬äºŒä¸ªæ˜¯æ›´æ–°æ•´æ¡è®°å½•ï¼Œæ³¨æ„åªæœ‰éç©ºå­—æ®µæ‰ä¼šæ›´æ–°ï¼›ç¬¬ä¸‰ä¸ªä¾‹å­æ˜¯ä¸ä¼šæ›´æ–°çš„ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡çš„æ—¶å€™è¦å°½é‡é¿å…è¿™äº›ç©ºå€¼æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œå¦‚æœä¸€å®šè¦æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œè®¾ç½®å•ä¸ªå€¼</p>
<h4 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h4><p>å…¶å®ä½ å·²ç»çœ‹åˆ°äº†ï¼Œè¿™é‡ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯é“¾å¼çš„ï¼Œå…¨éƒ¨éƒ½è¿”å› <code>db</code> å¯¹è±¡ï¼Œä»»ä½•æ—¶å€™è°ƒç”¨ <code>db.Error</code> å°±èƒ½è·å–åˆ°é”™è¯¯ä¿¡æ¯ï¼Œéå¸¸æ–¹ä¾¿</p>
<h4 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h4><pre><code class="golang">func CreateAnimals(db *gorm.DB) err {
    tx := db.Begin()
    if err := tx.Create(&amp;Animal{Name: &quot;Giraffe&quot;}).Error; err != nil {
        tx.Rollback()
        return err
    }
    if err := tx.Create(&amp;Animal{Name: &quot;Lion&quot;}).Error; err != nil {
        tx.Rollback()
        return err
    }
    tx.Commit()
    return nil
}
</code></pre>
<p>äº‹åŠ¡çš„å¤„ç†ä¹Ÿå¾ˆç®€å•ï¼Œç”¨ <code>db.Begin()</code> å£°æ˜å¼€å¯äº‹åŠ¡ï¼Œç»“æŸçš„æ—¶å€™è°ƒç”¨ <code>tx.Commit()</code>ï¼Œå¼‚å¸¸çš„æ—¶å€™è°ƒç”¨ <code>tx.Rollback()</code></p>
<h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><p>è¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ«ä»¥åŠæ”¹å˜æ—¥å¿—è¾“å‡ºåœ°æ–¹</p>
<pre><code>db.LogMode(true)
db.SetLogger(gorm.Logger{revel.TRACE})
db.SetLogger(log.New(os.Stdout, &quot;\r\n&quot;, 0))
</code></pre><p>ä¹Ÿæ”¯æŒæ™®é€šçš„ sqlï¼Œä½†æ˜¯å»ºè®®å°½é‡ä¸è¦ä½¿ç”¨</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>gorm å®˜æ–¹æ–‡æ¡£: <a href="http://gorm.io/" target="_blank" rel="noopener">http://gorm.io/</a></li>
<li>gorm github: <a href="https://github.com/jinzhu/gorm" target="_blank" rel="noopener">https://github.com/jinzhu/gorm</a></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> orm </tag>
            
            <tag> gorm </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> mysql </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å‡ ç§å®ç”¨çš„ pythonic è¯­æ³•]]></title>
      <url>/2018/02/04/%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%94%A8%E7%9A%84-pythonic-%E8%AF%AD%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>python æ˜¯ä¸€é—¨ç®€å•è€Œä¼˜é›…çš„è¯­è¨€ï¼Œå¯èƒ½æ˜¯è¿‡äºç®€å•äº†ï¼Œä¸ç”¨èŠ±å¤ªå¤šæ—¶é—´å­¦ä¹ å°±èƒ½ä½¿ç”¨ï¼Œå…¶å® python é‡Œé¢è¿˜æœ‰ä¸€äº›å¾ˆå¥½çš„ç‰¹æ€§ï¼Œèƒ½å¤§å¤§ç®€åŒ–ä½ ä»£ç çš„é€»è¾‘ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§</p>
<p>å…³äº pythonicï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯æ‰“å¼€ pythonï¼Œç„¶åè¾“å…¥ <code>import this</code>ï¼Œçœ‹çœ‹è¾“å‡ºä»€ä¹ˆï¼Œè¿™å°±æ˜¯ Tim Peters çš„ <a href="https://www.python.org/dev/peps/pep-0020/" target="_blank" rel="noopener">ã€ŠThe Zen of Pythonã€‹</a>ï¼Œè¿™é¦–å……æ»¡è¯—æ„çš„è¯—ç¯‡é‡Œæ¦‚å†µäº† python çš„è®¾è®¡å“²å­¦ï¼Œè€Œè¿™äº›æ€æƒ³ï¼Œå…¶å®åœ¨æ‰€æœ‰è¯­è¨€ä¹ŸåŸºæœ¬ä¸Šæ˜¯é€šç”¨çš„</p>
<blockquote>
<p>Beautiful is better than ugly.<br>Explicit is better than implicit.<br>Simple is better than complex.<br>Complex is better than complicated.<br>Flat is better than nested.<br>Sparse is better than dense.<br>Readability counts.<br>Special cases arenâ€™t special enough to break the rules.<br>Although practicality beats purity.<br>Errors should never pass silently.<br>Unless explicitly silenced.<br>In the face of ambiguity, refuse the temptation to guess.<br>There should be oneâ€“ and preferably only one â€“obvious way to do it.<br>Although that way may not be obvious at first unless youâ€™re Dutch.<br>Now is better than never.<br>Although never is often better than *right* now.<br>If the implementation is hard to explain, itâ€™s a bad idea.<br>If the implementation is easy to explain, it may be a good idea.<br>Namespaces are one honking great idea â€“ letâ€™s do more of those!</p>
</blockquote>
<h3 id="ä½¿ç”¨ç”Ÿæˆå™¨-yield"><a href="#ä½¿ç”¨ç”Ÿæˆå™¨-yield" class="headerlink" title="ä½¿ç”¨ç”Ÿæˆå™¨ yield"></a>ä½¿ç”¨ç”Ÿæˆå™¨ yield</h3><p>ç”Ÿæˆå™¨æ˜¯ python é‡Œé¢ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„è¯­æ³•ç‰¹æ€§ï¼Œå´ä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«å¿½è§†çš„ä¸€ä¸ªï¼Œå¯èƒ½æ˜¯å› ä¸ºå¤§éƒ¨åˆ†èƒ½ç”¨ç”Ÿæˆå™¨çš„åœ°æ–¹ä¹Ÿèƒ½ç”¨åˆ—è¡¨å§ã€‚</p>
<p>ç”Ÿæˆå™¨å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªå‡½æ•°ï¼Œæ¯æ¬¡æ‰§è¡Œåˆ° yield è¯­å¥å°±è¿”å›ä¸€ä¸ªå€¼ï¼Œé€šè¿‡ä¸åœåœ°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°±èƒ½è·å–åˆ°æ‰€æœ‰çš„å€¼ï¼Œè¿™äº›å€¼å°±èƒ½æ„æˆäº†ä¸€ä¸ªç­‰æ•ˆçš„åˆ—è¡¨ï¼Œä½†æ˜¯ä¸åˆ—è¡¨ä¸åŒçš„æ˜¯ï¼Œè¿™äº›å€¼æ˜¯ä¸æ–­è®¡ç®—å¾—å‡ºï¼Œè€Œåˆ—è¡¨æ˜¯åœ¨ä¸€å¼€å§‹å°±è®¡ç®—å¥½äº†ï¼Œè¿™å°±æ˜¯ lazy evaluation çš„æ€æƒ³ã€‚è¿™ä¸ªç‰¹æ€§åœ¨æ•°æ®é‡ç‰¹åˆ«å¤§çš„åœºæ™¯éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å¤§æ•°æ®å¤„ç†ï¼Œä¸€æ¬¡æ— æ³•åŠ è½½æ‰€æœ‰çš„æ–‡ä»¶ï¼Œä½¿ç”¨ç”Ÿæˆå™¨å°±èƒ½åšåˆ°ä¸€è¡Œä¸€è¡Œå¤„ç†ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå†…å­˜æº¢å‡º</p>
<pre><code class="python">def fibonacci():
    num0 = 0
    num1 = 1
    for i in range(10):
        num2 = num0 + num1
        yield num2
        num0 = num1
        num1 = num2

for i in fibonacci():
    print(i)
</code></pre>
<h3 id="ç”¨-else-å­å¥ç®€åŒ–å¾ªç¯å’Œå¼‚å¸¸"><a href="#ç”¨-else-å­å¥ç®€åŒ–å¾ªç¯å’Œå¼‚å¸¸" class="headerlink" title="ç”¨ else å­å¥ç®€åŒ–å¾ªç¯å’Œå¼‚å¸¸"></a>ç”¨ else å­å¥ç®€åŒ–å¾ªç¯å’Œå¼‚å¸¸</h3><p><code>if / else</code> å¤§å®¶éƒ½ç”¨è¿‡ï¼Œä½†æ˜¯åœ¨ python é‡Œé¢ï¼Œ<code>else</code> è¿˜å¯ä»¥ç”¨åœ¨å¾ªç¯å’Œå¼‚å¸¸é‡Œé¢</p>
<pre><code class="python"># pythonic å†™æ³•
for cc in [&#39;UK&#39;, &#39;ID&#39;, &#39;JP&#39;, &#39;US&#39;]:
    if cc == &#39;CN&#39;:
        break
else:
    print(&#39;no CN&#39;)

# ä¸€èˆ¬å†™æ³•
no_cn = True
for cc in [&#39;UK&#39;, &#39;ID&#39;, &#39;JP&#39;, &#39;US&#39;]:
    if cc == &#39;CN&#39;:
        no_cn = False
        break
if no_cn:
    print(&#39;no CN&#39;)
</code></pre>
<p><code>else</code> æ”¾åœ¨å¾ªç¯é‡Œé¢çš„å«ä¹‰æ˜¯ï¼Œå¦‚æœå¾ªç¯å…¨éƒ¨éå†å®Œæˆï¼Œæ²¡æœ‰æ‰§è¡Œ <code>break</code>ï¼Œåˆ™æ‰§è¡Œ <code>else</code> å­å¥</p>
<pre><code class="python"># pythonic å†™æ³•
try:
    db.execute(&#39;UPDATE table SET xx=xx WHERE yy=yy&#39;)
except DBError:
    db.rollback()
else:
    db.commit()

# ä¸€èˆ¬å†™æ³•
has_error = False
try:
    db.execute(&#39;UPDATE table SET xx=xx WHERE yy=yy&#39;)
except DBError:
    db.rollback()
    has_error = True
if not has_error:
    db.commit()
</code></pre>
<p><code>else</code> æ”¾åˆ°å¼‚å¸¸é‡Œé¢å¯ä»¥è¡¨ç¤ºï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸å‘ç”Ÿéœ€è¦æ‰§è¡Œçš„æ“ä½œ</p>
<h3 id="ç”¨-with-å­å¥è‡ªåŠ¨ç®¡ç†èµ„æº"><a href="#ç”¨-with-å­å¥è‡ªåŠ¨ç®¡ç†èµ„æº" class="headerlink" title="ç”¨ with å­å¥è‡ªåŠ¨ç®¡ç†èµ„æº"></a>ç”¨ with å­å¥è‡ªåŠ¨ç®¡ç†èµ„æº</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ‰“å¼€çš„æ–‡ä»¶éœ€è¦åœ¨ç”¨å®Œä¹‹åå…³é—­ï¼Œè¦ä¸å°±ä¼šé€ æˆèµ„æºæ³„éœ²ï¼Œä½†æ˜¯å®é™…ç¼–ç¨‹çš„æ—¶å€™ç»å¸¸ä¼šå¿˜è®°å…³é—­ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›é€»è¾‘å¤æ‚çš„åœºæ™¯ä¸­ï¼Œæ›´æ˜¯å¦‚æ­¤ï¼Œpython æœ‰ä¸€ä¸ªä¼˜é›…åœ°è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ <code>with</code> å­å¥</p>
<pre><code class="python"># pythonic å†™æ³•
with open(&#39;pythonic.py&#39;) as fp:
    for line in fp:
        print(line[:-1])

# ä¸€èˆ¬å†™æ³•
fp = open(&#39;pythonic.py&#39;)
for line in fp:
    print(line[:-1])
fp.close()
</code></pre>
<p>ä½¿ç”¨ <code>with as</code> è¯­å¥åï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ <code>fp.close()</code>, åœ¨ä½œç”¨åŸŸç»“æŸåï¼Œæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨ close æ‰ï¼Œå®Œæ•´çš„æ‰§è¡Œè¿‡å¦‚ä¸‹:</p>
<ol>
<li>è°ƒç”¨ <code>open(&#39;pythonic.py&#39;)</code>ï¼Œè¿”å›çš„ä¸€ä¸ªå¯¹è±¡ <code>obj</code>,</li>
<li>è°ƒç”¨ <code>obj.__enter__()</code> æ–¹æ³•ï¼Œè¿”å›çš„å€¼èµ‹ç»™ <code>fp</code></li>
<li>æ‰§è¡Œ <code>with</code> ä¸­çš„ä»£ç å—</li>
<li>æ‰§è¡Œ <code>obj.__exit__()</code></li>
<li>å¦‚æœè¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸ï¼Œå°†å¼‚å¸¸ä¼ ç»™ <code>obj.__exit__()</code>ï¼Œå¦‚æœ <code>obj.__exit__()</code> è¿”å› <code>False</code>, å¼‚å¸¸å°†è¢«ç»§ç»­æŠ›å‡ºï¼Œå¦‚æœè¿”å› <code>True</code>ï¼Œå¼‚å¸¸è¢«æŒ‚èµ·ï¼Œç¨‹åºç»§ç»­è¿è¡Œ</li>
</ol>
<h3 id="åˆ—è¡¨æ¨å¯¼ä¸ç”Ÿæˆå™¨è¡¨è¾¾å¼"><a href="#åˆ—è¡¨æ¨å¯¼ä¸ç”Ÿæˆå™¨è¡¨è¾¾å¼" class="headerlink" title="åˆ—è¡¨æ¨å¯¼ä¸ç”Ÿæˆå™¨è¡¨è¾¾å¼"></a>åˆ—è¡¨æ¨å¯¼ä¸ç”Ÿæˆå™¨è¡¨è¾¾å¼</h3><blockquote>
<p>åˆ—è¡¨æ¨å¯¼<br><code>[expr for iter_var in iterable if cond_expr]</code></p>
<p>ç”Ÿæˆå™¨è¡¨è¾¾å¼<br><code>(expr for iter_var in iterable if cond_expr)</code></p>
</blockquote>
<p>åˆ—è¡¨æ¨å¯¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼æä¾›äº†ä¸€ç§éå¸¸ç®€æ´é«˜æ•ˆçš„æ–¹å¼æ¥åˆ›å»ºåˆ—è¡¨æˆ–è€…è¿­ä»£å™¨</p>
<pre><code class="python"># pythonic å†™æ³•
squares = [x * x for x in range(10)]

# ä¸€èˆ¬å†™æ³•
squares = []
for x in range(10):
    squares.append(x * x)
</code></pre>
<h3 id="ç”¨-items-éå†-map"><a href="#ç”¨-items-éå†-map" class="headerlink" title="ç”¨ items éå† map"></a>ç”¨ items éå† map</h3><p>python é‡Œé¢ map çš„éå†æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œåœ¨éœ€è¦åŒäº‹ä½¿ç”¨ key å’Œ value çš„åœºåˆï¼Œå»ºè®®ä½¿ç”¨ <code>items()</code> å‡½æ•°</p>
<pre><code class="python">m = {&#39;one&#39;: 1, &#39;two&#39;: 2, &#39;three&#39;: 3}
for k, v in m.items():
    print(k, v)

for k, v in sorted(m.items()):
    print(k, v)
</code></pre>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>Google python è¯­è¨€è§„èŒƒ: <a href="http://zh-google-styleguide.readthedocs.io/en/latest/google-python-styleguide/python_language_rules/" target="_blank" rel="noopener">http://zh-google-styleguide.readthedocs.io/en/latest/google-python-styleguide/python_language_rules/</a></li>
<li>ã€Šç¼–å†™é«˜è´¨é‡ä»£ç ï¼šæ”¹å–„ Python ç¨‹åºçš„91ä¸ªå»ºè®®ã€‹</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> python </tag>
            
            <tag> pythonic </tag>
            
            <tag> è¯­æ³•ç³– </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang ç½‘ç»œæ¡†æ¶ä¹‹ thrift]]></title>
      <url>/2018/02/04/golang-%E7%BD%91%E7%BB%9C%E6%A1%86%E6%9E%B6%E4%B9%8B-thrift/</url>
      <content type="html"><![CDATA[<p>thrift æœ€åˆæ˜¯ facebook å¼€å‘ä½¿ç”¨çš„ rpc é€šä¿¡æ¡†æ¶ï¼Œåæ¥è´¡çŒ®ç»™äº† apache åŸºé‡‘ä¼šï¼Œå‡ºæ¥å¾—æ¯”è¾ƒæ—©ï¼Œå‡ ä¹æ”¯æŒæ‰€æœ‰çš„åç«¯è¯­è¨€ï¼Œä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œæ˜¯ä¸å¯ä¸çŸ¥çš„ä¸€ä¸ªç½‘ç»œæ¡†æ¶</p>
<p>å’Œ <a href="http://hatlonely.github.io/2018/02/03/golang-ç½‘ç»œæ¡†æ¶ä¹‹-grpc/">grpc</a> ä¸€æ ·ï¼Œéœ€è¦å…ˆå®šä¹‰é€šä¿¡åè®®ï¼Œç„¶åå®ç°è‡ªå·±ä¸šåŠ¡é€»è¾‘ï¼Œä¸‹é¢è¿˜æ˜¯é€šè¿‡ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼ˆä¹‹å‰çš„echoç¨‹åºï¼‰è¯´æ˜ thrift çš„ç”¨æ³•ï¼Œä¸‹é¢ç¤ºä¾‹ä½¿ç”¨çš„å®Œæ•´ä»£ç åœ¨ä¸‹åˆ—åœ°å€ï¼š<br>å®ç°æ–‡ä»¶ï¼š<a href="https://github.com/hatlonely/hellogolang/tree/master/cmd/thrift" target="_blank" rel="noopener">https://github.com/hatlonely/hellogolang/tree/master/cmd/thrift</a><br>åè®®æ–‡ä»¶ï¼š<a href="https://github.com/hatlonely/hellogolang/tree/master/api/echo_thrift" target="_blank" rel="noopener">https://github.com/hatlonely/hellogolang/tree/master/api/echo_thrift</a></p>
<h3 id="ç®€å•-echo-æœåŠ¡"><a href="#ç®€å•-echo-æœåŠ¡" class="headerlink" title="ç®€å• echo æœåŠ¡"></a>ç®€å• echo æœåŠ¡</h3><h4 id="è·å–-thrift"><a href="#è·å–-thrift" class="headerlink" title="è·å– thrift"></a>è·å– thrift</h4><pre><code>go get git.apache.org/thrift.git/lib/go
</code></pre><h4 id="å®šä¹‰åè®®æ–‡ä»¶"><a href="#å®šä¹‰åè®®æ–‡ä»¶" class="headerlink" title="å®šä¹‰åè®®æ–‡ä»¶"></a>å®šä¹‰åè®®æ–‡ä»¶</h4><pre><code>namespace go echo

struct EchoReq {
    1: string msg;
}

struct EchoRes {
    1: string msg;
}

service Echo {
    EchoRes echo(1: EchoReq req);
}
</code></pre><p>æ‰§è¡Œ <code>thrift -r --gen go echo.thrift</code> å‘½ä»¤ä¼šç”Ÿæˆ <code>gen-go</code> æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯å°†ä¸Šé¢çš„åè®®ç¿»è¯‘æˆ golang ä»£ç </p>
<p>è¿™ä¸ªå‘½ä»¤ä¾èµ–äº thrift å·¥å…·ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤è·å–</p>
<p>Mac</p>
<pre><code>brew install thrift
</code></pre><p>Linux</p>
<pre><code>wget http://www-us.apache.org/dist/thrift/0.11.0/thrift-0.11.0.tar.gz
tar -xzvf thrift-0.11.0.tar.gz
cd thrift-0.11.0
./configure
make -j8
[sudo] make install
</code></pre><h4 id="å®ç°æœåŠ¡ç«¯"><a href="#å®ç°æœåŠ¡ç«¯" class="headerlink" title="å®ç°æœåŠ¡ç«¯"></a>å®ç°æœåŠ¡ç«¯</h4><pre><code>type EchoServerImp struct {
}

func (e *EchoServerImp) Echo(ctx context.Context, req *echo.EchoReq) (*echo.EchoRes, error) {
    fmt.Printf(&quot;message from client: %v\n&quot;, req.GetMsg())

    res := &amp;echo.EchoRes{
        Msg: req.GetMsg(),
    }

    return res, nil
}

func main() {
    transport, err := thrift.NewTServerSocket(&quot;:3000&quot;)
    if err != nil {
        panic(err)
    }

    processor := echo.NewEchoProcessor(&amp;EchoServerImp{})
    server := thrift.NewTSimpleServer4(
        processor,
        transport,
        thrift.NewTBufferedTransportFactory(8192),
        thrift.NewTCompactProtocolFactory(),
    )
    if err := server.Serve(); err != nil {
        panic(err)
    }
}
</code></pre><p>è¿™ä¸ªè¿‡ç¨‹å’Œ grpc ç±»ä¼¼ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œthrift æ”¯æŒæ›´å¤šçš„æœåŠ¡å™¨ç±»å‹ï¼Œæ”¯æŒä¸åŒçš„åè®®æ‰“åŒ…æ–¹å¼ï¼Œæ–¹ä¾¿ç”¨æˆ·é€‰æ‹©ï¼Œè¿™é‡Œçš„ compact åè®®æ˜¯ä¸€ç§å‹ç¼©çš„åè®®ï¼Œä½¿ç”¨æ¯”è¾ƒå¤š</p>
<h4 id="å®ç°å®¢æˆ·ç«¯"><a href="#å®ç°å®¢æˆ·ç«¯" class="headerlink" title="å®ç°å®¢æˆ·ç«¯"></a>å®ç°å®¢æˆ·ç«¯</h4><pre><code>func main() {
    var transport thrift.TTransport
    var err error
    transport, err = thrift.NewTSocket(&quot;localhost:3000&quot;)
    if err != nil {
        fmt.Errorf(&quot;NewTSocket failed. err: [%v]\n&quot;, err)
        return
    }

    transport, err = thrift.NewTBufferedTransportFactory(8192).GetTransport(transport)
    if err != nil {
        fmt.Errorf(&quot;NewTransport failed. err: [%v]\n&quot;, err)
        return
    }
    defer transport.Close()

    if err := transport.Open(); err != nil {
        fmt.Errorf(&quot;Transport.Open failed. err: [%v]\n&quot;, err)
        return
    }

    protocolFactory := thrift.NewTCompactProtocolFactory()
    iprot := protocolFactory.GetProtocol(transport)
    oprot := protocolFactory.GetProtocol(transport)
    client := echo.NewEchoClient(thrift.NewTStandardClient(iprot, oprot))

    var res *echo.EchoRes
    res, err = client.Echo(context.Background(), &amp;echo.EchoReq{
        Msg: strings.Join(os.Args[1:], &quot; &quot;),
    })
    if err != nil {
        fmt.Errorf(&quot;client echo failed. err: [%v]&quot;, err)
        return
    }

    fmt.Printf(&quot;message from server: %v&quot;, res.GetMsg())
}
</code></pre><p>è¿™ä¸ª client ç›¸å¯¹å¤æ‚ä¸€äº›ï¼Œéœ€è¦å’Œ server ç«¯è®¾ç½®ä¸€è‡´çš„æ‰“åŒ…æ–¹å¼ï¼Œå¦‚æœä¸ä¸€è‡´ä¼šå‡ºç°é€šä¿¡å¤±è´¥ï¼Œè¿™ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>thrift go å®˜ç½‘: <a href="http://thrift.apache.org/tutorial/go" target="_blank" rel="noopener">http://thrift.apache.org/tutorial/go</a></li>
<li>thrift github: <a href="https://github.com/apache/thrift/" target="_blank" rel="noopener">https://github.com/apache/thrift/</a></li>
<li>thrift go tutorial: <a href="https://github.com/apache/thrift/tree/master/tutorial/go/src" target="_blank" rel="noopener">https://github.com/apache/thrift/tree/master/tutorial/go/src</a></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> ç½‘ç»œæ¡†æ¶ </tag>
            
            <tag> thrift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æˆ‘ä¸ºä»€ä¹ˆå†™åšå®¢]]></title>
      <url>/2018/02/04/%E6%88%91%E4%B8%BA%E4%BB%80%E4%B9%88%E5%86%99%E5%8D%9A%E5%AE%A2/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘æœ‰ç‚¹æ²‰è¿·äºè¿™ä¸ªåšå®¢äº†ï¼Œé™¤äº†å·¥ä½œï¼Œåƒé¥­ï¼Œç¡è§‰ï¼ŒåŸºæœ¬æ‰€æœ‰çš„æ—¶é—´éƒ½èŠ±åœ¨è¿™é‡Œäº†ï¼Œç»å¸¸å¼„åˆ°å¤œé‡Œä¸¤ç‚¹ï¼Œå’Œä¹‹å‰æ²‰è¿· dota æœ‰å¾—ä¸€æ‹¼ğŸ˜</p>
<p>ä¸€ç›´æœ‰ä¸€ä¸ªåšå®¢æ¢¦ï¼Œæ€»æ˜¯ç¾¡æ…•é‚£äº›æœ‰ä¸ªäººç½‘ç«™çš„äººï¼Œæœ‰é‚£ä¹ˆä¸€å—åœ°æ–¹ï¼Œå¯ä»¥å°½æƒ…åœ°ä¹¦å†™è‡ªå·±çš„æ„Ÿå—ï¼Œæ–½å±•è‡ªå·±çš„æ‰åï¼Œå±•ç°è‡ªå·±çš„ä¸ªæ€§ã€‚ç”¨è¿‡ csdnï¼Œè¯•è¿‡ qq ç©ºé—´ï¼Œåæ¥è‡ªå·±ç”¨ nodejs è‡ªå·±æ‰“äº†ä¸€ä¸ªï¼Œæ–­æ–­ç»­ç»­çš„ï¼Œç”±äºå„ç§å„æ ·çš„åŸå› æœ€ç»ˆéƒ½æ²¡æœ‰åšæŒä¸‹å»</p>
<p>ç›´åˆ°æœ€è¿‘ï¼Œé‚£ä¹ˆå¤šæ›¾ä»Šçš„ä¼™ä¼´å„å¥”ä¸œè¥¿ï¼Œå„ç§æ€ç»ªåœ¨è„‘æµ·é‡Œæ¶ŒåŠ¨ã€‚ä½ çŸ¥é“ï¼Œä¸€ä¸ªäººçš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šæƒ³å¾ˆå¤šäº‹æƒ…ã€‚æƒ³å¾—æœ€å¤šçš„å°±æ˜¯ï¼Œæˆ‘å°†è¦åšä»€ä¹ˆä»¥åŠæˆ‘åšäº†ä»€ä¹ˆã€‚å·¥ä½œä¸‰å¹´å¤šäº†ï¼Œå¥½åƒæ‡‚äº†å¾ˆå¤šï¼Œä½†æ˜¯çœŸçš„å½“æˆ‘æƒ³è¦å»æ€»ç»“çš„æ—¶å€™ï¼Œå´å‘ç°å¥½åƒä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œä»€ä¹ˆä¸œè¥¿éƒ½å¥½åƒçŸ¥é“ä¸€ç‚¹ï¼Œå´åˆä»€ä¹ˆä¸œè¥¿éƒ½è¯´ä¸æ¸…æ¥šï¼Œæ€»è§‰å¾—æ¯”åˆ«äººå‰å®³ä¸€ç‚¹ï¼Œå´åˆä¸çŸ¥é“å‰å®³åœ¨å“ªé‡Œã€‚å¼€å§‹æ€€ç–‘è‡ªå·±ï¼Œä¹Ÿä¸è¿‡åº¸äººä¸€ä¸ªï¼Œè¿˜è°ˆä»€ä¹ˆæ¢¦æƒ³ï¼Œåªä¸è¿‡ç©ºæƒ³</p>
<p>å›æƒ³èµ·æ¥ï¼Œè‡ªå·±å…¶å®ä¹Ÿå¹¶ä¸æ€ä¹ˆåŠªåŠ›ï¼Œä¹¦ä¹°äº†ä¸€å¤§å †ï¼Œä½†æ˜¯çœŸæ­£è¯»å®Œçš„æ²¡å‡ æœ¬ï¼›ä¸€ç›´æƒ³å­¦è‹±è¯­ï¼Œä¹Ÿåªæ˜¯è¯´è¯´è€Œå·²ï¼›åŠè¿‡å¥½å‡ å¼ å¥èº«å¡ï¼Œä¹Ÿåªèƒ½åšæŒä¸‰å¤©ï¼›èŠ±äº†é‚£ä¹ˆå¤šæ—¶é—´æ‰“æ¸¸æˆï¼Œæ°´å¹³ä¹Ÿè¿˜æ˜¯ä¸å’‹åœ°ã€‚è¿™æ ·ä¸‹å»ï¼Œå†è¿‡ä¸‰å¹´ï¼Œåˆä¼šæ€æ ·ï¼Œæˆ‘è¿˜æ˜¯æˆ‘ï¼Œè¿˜æ˜¯ä¸€æ ·æ²¡æœ‰å¥³æœ‹å‹ğŸ˜”</p>
<p>æˆ‘éœ€è¦ä¸€äº›å˜åŒ–ï¼Œå¼€å§‹çœ‹ä¹¦ï¼ŒèƒŒå•è¯ï¼Œç„¶åå¼€å§‹å†™åšå®¢</p>
<p>å†™åšå®¢å¯èƒ½ä¼šå¾ˆè€—æ—¶é—´ï¼Œä½†å®é™…ä¸Šå´æ˜¯ä¸€ä»¶æå¤§æå‡æ•ˆç‡çš„äº‹æƒ…ã€‚ITæ˜¯ä¸ªæ·±ä¸è§åº•è¡Œä¸šï¼Œä½ æ°¸è¿œéƒ½åœ¨å­¦ä¹ ï¼Œå´æ°¸è¿œéƒ½å­¦ä¸å®Œï¼Œè€Œäººæ˜¯ä¼šé—å¿˜çš„ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨é‡å¤è§£å†³ç€ä¹‹å‰è§£å†³è¿‡çš„é—®é¢˜ï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´ã€‚è€Œå†™åšå®¢ï¼Œä¸ä»…èƒ½é¿å…è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸”èƒ½å¸®ä½ ç†æ¸…æ€è·¯ï¼Œå¯¹è¿™ä¸ªé—®é¢˜æœ‰æ›´æ·±çš„ç†è§£ï¼Œå¦‚æœå†™å¾—å¥½çš„è¯ï¼Œåˆ†äº«å‡ºæ¥è¿˜èƒ½å¸®æ›´å¤šäººèŠ‚çœæ—¶é—´ï¼Œåè¿‡æ¥è¿˜èƒ½æå‡ä¸ªäººå½±å“åŠ›ã€‚</p>
<p>ä¹‹å‰å°±æœ‰ä½¿ç”¨è¿‡ hexo è¿™ä¸ªåšå®¢æ¨¡æ¿ï¼Œæœ€è¿‘çªç„¶åœ¨ github ä¸Šçœ‹åˆ° material ä¸»é¢˜ï¼Œæ—©åœ¨ material design å‡ºæ¥çš„æ—¶å€™ï¼Œå°±å¯¹è¿™ç§è®¾è®¡æ„Ÿåˆ°æƒŠå¹ï¼Œä¸€ç›´æƒ³åšä¸€ä¸ª material é£æ ¼çš„åšå®¢ï¼Œç”±äºè®¾è®¡å¤©åˆ†æœ‰é™ï¼Œå†åŠ ä¸Šæ²¡æœ‰ç»éªŒï¼Œä¸€ç›´ä¹Ÿæ²¡æœ‰å®ç°ï¼Œè¿™ä¸ªä¸»é¢˜æ­£å¥½æ»¡è¶³äº†æˆ‘çš„éœ€æ±‚ã€‚é‚£å¤©æ™šä¸Šæˆ‘æŠ˜è…¾åˆ°å‡Œæ™¨4ç‚¹ï¼Œç¬¬äºŒå¤©èµ·æ¥èŠ±äº†åŠå¤©æ—¶é—´è®¾è®¡æˆ‘çš„å¤´åƒï¼Œåªä¸ºäº†å’Œè¿™ä¸ªä¸»é¢˜é£æ ¼æ›´æ­ä¸€äº›ï¼Œåˆé™†é™†ç»­ç»­èŠ±äº†ä¸¤å¤©çš„æ—¶é—´ï¼Œä¿®æ”¹è¿™ä¸ªä¸»é¢˜ï¼ŒåŒ…æ‹¬æ‰‹æœºçš„é€‚é…ï¼Œä¸€äº›å° bug çš„ä¿®å¤ï¼Œä¸€äº› ui é…è‰²å’Œä¸€äº›å°ç»†èŠ‚çš„è°ƒæ•´ç­‰ç­‰ï¼Œæ¯ä¸€æ¬¡å°å°çš„æ”¹è¿›éƒ½è®©æˆ‘å¼€å¿ƒä¸å·²ã€‚æ¯ç¯‡åšå®¢è¿˜å¯ä»¥é…ä¸€å¼ å›¾ç‰‡ä½œä¸ºèƒŒæ™¯å›¾ï¼Œæ‰¾ä¸€å¼ å¥½çœ‹å›¾ç‰‡ä½œä¸ºèƒŒæ™¯ï¼Œä¸ºå†™åšå®¢å¢æ·»äº†ä¸å°‘ä¹è¶£ã€‚</p>
<p>æŠ˜è…¾äº†é‚£ä¹ˆä¹…ï¼Œç°åœ¨è¿™ä¸ªå°ç«™ï¼Œç®—æ˜¯åŸºæœ¬æ»¡æ„å§ï¼Œå¸Œæœ›è‡ªå·±å¯ä»¥åšæŒå†™ä¸‹å»ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> åšå®¢ </tag>
            
            <tag> hexo </tag>
            
            <tag> ç¨‹åºäººç”Ÿ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang ç½‘ç»œæ¡†æ¶ä¹‹ grpc]]></title>
      <url>/2018/02/03/golang-%E7%BD%91%E7%BB%9C%E6%A1%86%E6%9E%B6%E4%B9%8B-grpc/</url>
      <content type="html"><![CDATA[<p>grpc æ˜¯ google å¼€æºçš„ä¸€æ¬¾ç½‘ç»œæ¡†æ¶ï¼Œå…·æœ‰æå¥½çš„æ€§èƒ½ï¼Œå¯èƒ½æ˜¯ç›®å‰æ€§èƒ½æœ€å¥½çš„ç½‘ç»œæ¡†æ¶ï¼Œæ”¯æŒæµå¼ rpcï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ„å»ºæ¶ˆæ¯è®¢é˜…å‘å¸ƒç³»ç»Ÿï¼Œæ”¯æŒå‡ ä¹æ‰€æœ‰ä¸»æµçš„è¯­è¨€ï¼Œä½¿ç”¨ä¸Šé¢ä¹Ÿå¾ˆç®€å•ï¼Œå…¬å¸å¾ˆå¤šæœåŠ¡åŸºäº grpc æ¡†æ¶æ„å»ºï¼Œè¿è¡Œéå¸¸ç¨³å®š</p>
<p>å¼€å§‹ä¹‹å‰é¦–å…ˆä½ è¦çŸ¥é“ç½‘ç»œæ¡†æ¶ä¸ºä½ åšäº†å“ªäº›äº‹æƒ…ï¼š</p>
<blockquote>
<ol>
<li>ç½‘ç»œåè®®åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</li>
<li>ç½‘ç»œåº•å±‚é€šä¿¡</li>
<li>å¹¶å‘ç®¡ç†</li>
</ol>
</blockquote>
<p>ä»¥åŠéœ€è¦ä½ åšå“ªäº›äº‹æƒ…ï¼š</p>
<blockquote>
<ol>
<li>å®šä¹‰é€šä¿¡çš„å†…å®¹ï¼ˆé€šè¿‡åè®®æ–‡ä»¶ï¼‰</li>
<li>å®ç°é€šä¿¡çš„æ–¹æ³•ï¼ˆå®ç°åè®®æ¥å£ï¼‰</li>
</ol>
</blockquote>
<p>ä»¥ä¸‹é¢ä¸¤ä¸ªä¾‹å­æ¥åˆ†åˆ«è¯´æ˜ä¸¤ç§ rpc æœåŠ¡çš„ç®€å•ç”¨æ³•</p>
<p>ç¤ºä¾‹ä½¿ç”¨çš„å®Œæ•´ä»£ç åœ¨ä¸‹åˆ—åœ°å€ï¼š<br>å®ç°æ–‡ä»¶ï¼š<a href="https://github.com/hatlonely/hellogolang/tree/master/cmd/grpc" target="_blank" rel="noopener">https://github.com/hatlonely/hellogolang/tree/master/cmd/grpc</a><br>åè®®æ–‡ä»¶ï¼š<a href="https://github.com/hatlonely/hellogolang/tree/master/api" target="_blank" rel="noopener">https://github.com/hatlonely/hellogolang/tree/master/api</a></p>
<h3 id="ç®€å•-echo-æœåŠ¡"><a href="#ç®€å•-echo-æœåŠ¡" class="headerlink" title="ç®€å• echo æœåŠ¡"></a>ç®€å• echo æœåŠ¡</h3><p>è¦å®ç°çš„è¿™ä¸ªæœåŠ¡å¾ˆç®€å•ï¼ŒåŠŸèƒ½å’Œ echo å‘½ä»¤ç±»ä¼¼ï¼Œç”¨ä¸€ä¸ªå­—ç¬¦ä¸²è¯·æ±‚æœåŠ¡å™¨ï¼Œè¿”å›ç›¸åŒçš„å­—ç¬¦ä¸²</p>
<h4 id="è·å–-grpc"><a href="#è·å–-grpc" class="headerlink" title="è·å– grpc"></a>è·å– grpc</h4><pre><code>go get google.golang.org/grpc
go get google.golang.org/genproto/
</code></pre><p><code>go get</code> ä¸Šé¢ä¸¤ä¸ªåº“å°±å¯ä»¥äº†ã€‚å¯èƒ½è¢«å¢™äº†ï¼Œéœ€è¦ vpnï¼›å¦‚æœæ²¡æœ‰ vpnï¼Œå¯ä»¥æ‰¾ä¸€å°èƒ½ä¸‹è½½çš„æœåŠ¡å™¨ä¸‹è½½ä¸‹æ¥å†ä¼ åˆ°æœ¬åœ°ï¼›å¦‚æœä¹Ÿæ²¡æœ‰æœåŠ¡å™¨ï¼Œå¯ä»¥ç‚¹å‡»<a href="/resource/google.golang.org.tar.gz">è¿™é‡Œ</a>ä¸‹è½½ï¼Œè§£å‹åæ”¾åˆ° <code>vendor/</code> ç›®å½•ä¸‹å³å¯ï¼Œä¸è¿‡å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬</p>
<h4 id="å®šä¹‰åè®®æ–‡ä»¶"><a href="#å®šä¹‰åè®®æ–‡ä»¶" class="headerlink" title="å®šä¹‰åè®®æ–‡ä»¶"></a>å®šä¹‰åè®®æ–‡ä»¶</h4><p>é¦–å…ˆè¦å®šä¹‰é€šä¿¡çš„åè®®ï¼Œgrpc ä½¿ç”¨çš„æ˜¯ proto3 åºåˆ—åŒ–åè®®ï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„åè®®ï¼Œå…³äºè¿™ä¸ªåè®®çš„è·Ÿå¤šå†…å®¹å¯ä»¥å‚è€ƒä¸‹é¢é“¾æ¥ï¼š<a href="https://developers.google.com/protocol-buffers/docs/proto3" target="_blank" rel="noopener">https://developers.google.com/protocol-buffers/docs/proto3</a></p>
<pre><code>syntax = &quot;proto3&quot;;

package echo;

message EchoReq {
    string msg = 1;
}

message EchoRes {
    string msg = 1;
}

service Echo {
    rpc echo (EchoReq) returns (EchoRes);
}
</code></pre><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>echo.pb.go</code> æ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯æŠŠä¸Šé¢è¿™ä¸ªåè®®ç¿»è¯‘æˆ golangï¼š</p>
<pre><code>protoc --go_out=plugins=grpc:. echo.proto
</code></pre><p>å®é™…é¡¹ç›®ä¸­å¯ä»¥æŠŠè¿™ä¸ªå‘½ä»¤æ”¾åˆ°ä¸€ä¸ª <a href="https://github.com/hatlonely/hellogolang/blob/master/api/echo_proto/Makefile" target="_blank" rel="noopener">Makefile</a> æ–‡ä»¶ä¸­ï¼Œæ‰§è¡Œ <code>make</code> å‘½ä»¤å³å¯ç”Ÿæˆä»£ç </p>
<p>ä¸Šé¢å‘½ä»¤ä¾èµ– <code>protoc</code> å·¥å…·ï¼Œä»¥åŠ golang æ’ä»¶ <code>protoc-gen-go</code>ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è·å–</p>
<p>Mac</p>
<pre><code>brew install grpc
go get -u github.com/golang/protobuf/{proto,protoc-gen-go}
</code></pre><p>Linux</p>
<pre><code>wget https://github.com/google/protobuf/releases/download/v3.2.0/protobuf-cpp-3.2.0.tar.gz
tar -xzvf protobuf-cpp-3.2.0.tar.gz
cd protobuf-3.2.0
./configure
make -j8
[sudo] make install
go get -u github.com/golang/protobuf/{proto,protoc-gen-go}
</code></pre><h4 id="å®ç°åè®®æ¥å£"><a href="#å®ç°åè®®æ¥å£" class="headerlink" title="å®ç°åè®®æ¥å£"></a>å®ç°åè®®æ¥å£</h4><pre><code>type EchoServerImp struct {

}

func (e *EchoServerImp) Echo(ctx context.Context, req *echo.EchoReq) (*echo.EchoRes, error) {
    fmt.Printf(&quot;message from client: %v\n&quot;, req.GetMsg())

    res := &amp;echo.EchoRes{
        Msg: req.GetMsg(),
    }

    return res, nil
}
</code></pre><p>é¦–å…ˆè¦å®šä¹‰ä¸€ä¸ªæ¥å£çš„å®ç°ç±» <code>EchoServerImp</code>ï¼Œæ¥å£çš„çš„å®šä¹‰å¯ä»¥åœ¨ä¸Šé¢ç”Ÿæˆçš„æ–‡ä»¶ <code>echo.pb.go</code> ä¸­æ‰¾åˆ°ï¼Œè¿™ä¸ªç±»é‡Œé¢ä¹Ÿå¯ä»¥æœ‰ä¸€äº›å’Œä¸šåŠ¡é€»è¾‘ç›¸å…³çš„æˆå‘˜å˜é‡ï¼Œè¿™é‡Œæˆ‘ä»¬çš„éœ€æ±‚æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰å…¶ä»–çš„æˆå‘˜</p>
<p>ç„¶åéœ€è¦åœ¨æ¥å£å‡½æ•°é‡Œé¢å®ç°æˆ‘ä»¬å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿™é‡Œä»…ä»…æŠŠè¯·æ±‚é‡Œé¢çš„å†…å®¹è¯»å‡ºæ¥ï¼Œå†å†™å›åˆ°å“åº”é‡Œé¢</p>
<p>ä½ è¿˜å¯ä»¥ä¸ºè¿™ä¸ªç±»å¢åŠ å…¶ä»–çš„å‡½æ•°ï¼Œæ¯”å¦‚åˆå§‹åŒ–ä¹‹ç±»çš„ï¼Œæ ¹æ®ä½ å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å°±å¥½</p>
<h4 id="å®ç°æœåŠ¡ç«¯"><a href="#å®ç°æœåŠ¡ç«¯" class="headerlink" title="å®ç°æœåŠ¡ç«¯"></a>å®ç°æœåŠ¡ç«¯</h4><pre><code>func main() {
    server := grpc.NewServer()
    echo.RegisterEchoServer(server, &amp;EchoServerImp{})

    address, err := net.Listen(&quot;tcp&quot;, &quot;:3000&quot;)
    if err != nil {
        panic(err)
    }

    if err := server.Serve(address); err != nil {
        panic(err)
    }
}
</code></pre><p>æŠŠæˆ‘ä»¬åˆšåˆšå®ç°çš„ç±»å®ä¾‹æ³¨å†Œåˆ° grpc é‡Œï¼Œå†ç»‘å®šåˆ°æœ¬åœ°çš„ä¸€ä¸ªç«¯å£ä¸Šå°±å¯ä»¥äº†ï¼Œç°åœ¨å¯ä»¥å¯åŠ¨æœåŠ¡äº† <code>go run echo_server.go</code></p>
<h4 id="å®ç°å®¢æˆ·ç«¯"><a href="#å®ç°å®¢æˆ·ç«¯" class="headerlink" title="å®ç°å®¢æˆ·ç«¯"></a>å®ç°å®¢æˆ·ç«¯</h4><pre><code>func main() {
    conn, err := grpc.Dial(&quot;127.0.0.1:3000&quot;, grpc.WithInsecure())
    if err != nil {
        fmt.Errorf(&quot;dial failed. err: [%v]\n&quot;, err)
        return
    }

    client := echo.NewEchoClient(conn)
    res, err := client.Echo(context.Background(), &amp;echo.EchoReq{
        Msg: strings.Join(os.Args[1:], &quot; &quot;),
    })

    if err != nil {
        fmt.Errorf(&quot;client echo failed. err: [%v]&quot;, err)
        return
    }

    fmt.Printf(&quot;message from server: %v&quot;, res.GetMsg())
}
</code></pre><p>åˆ›å»ºä¸€ä¸ª client ä¹‹åï¼Œå°±å¯ä»¥åƒè®¿é—®æœ¬åœ°æ–¹æ³•ä¸€æ ·è®¿é—®æˆ‘ä»¬çš„æœåŠ¡äº†ï¼Œ<code>go run echo_client.go hellogrpc</code></p>
<h3 id="æµå¼-rpc-æœåŠ¡"><a href="#æµå¼-rpc-æœåŠ¡" class="headerlink" title="æµå¼ rpc æœåŠ¡"></a>æµå¼ rpc æœåŠ¡</h3><p>å®ç°ä¸€ä¸ª counter æœåŠ¡ï¼Œå®¢æˆ·ç«¯ä¼ è¿‡æ¥ä¸€ä¸ªæ•°å­—ï¼ŒæœåŠ¡ç«¯ä»è¿™ä¸ªæ•°å­—å¼€å§‹ï¼Œä¸åœåœ°å‘ä¸‹è®¡æ•°è¿”å›</p>
<h4 id="å®šä¹‰åè®®æ–‡ä»¶-1"><a href="#å®šä¹‰åè®®æ–‡ä»¶-1" class="headerlink" title="å®šä¹‰åè®®æ–‡ä»¶"></a>å®šä¹‰åè®®æ–‡ä»¶</h4><pre><code>syntax = &quot;proto3&quot;;

package counter;

message CountReq {
    int64 start = 1;
}

message CountRes {
    int64 num = 1;
}

service Counter {
    rpc count (CountReq) returns (stream CountRes);
}
</code></pre><p>å®šä¹‰ä¸€ä¸ªæµå¼çš„ rpc åªéœ€è¦åœ¨è¿”å›çš„å­—æ®µå‰åŠ ä¸€ä¸ª stream å…³é”®å­—å°±å¯ä»¥</p>
<h4 id="å®ç°æœåŠ¡ç«¯-1"><a href="#å®ç°æœåŠ¡ç«¯-1" class="headerlink" title="å®ç°æœåŠ¡ç«¯"></a>å®ç°æœåŠ¡ç«¯</h4><pre><code>type CounterServerImp struct {

}

func (c *CounterServerImp) Count(req *counter.CountReq, stream counter.Counter_CountServer) error {
    fmt.Printf(&quot;request from client. start: [%v]\n&quot;, req.GetStart())

    i := req.GetStart()
    for {
        i++
        stream.Send(&amp;counter.CountRes{
            Num: i,
        })
        time.Sleep(time.Duration(500) * time.Millisecond)
    }

    return nil
}

func main() {
    server := grpc.NewServer()
    counter.RegisterCounterServer(server, &amp;CounterServerImp{})

    address, err := net.Listen(&quot;tcp&quot;, &quot;:3000&quot;)
    if err != nil {
        panic(err)
    }

    if err := server.Serve(address); err != nil {
        panic(err)
    }
}
</code></pre><p>æ¥å£å®ç°ä¸Šéœ€è¦å†™ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸åœåœ°è°ƒç”¨ <code>Send</code> å‡½æ•°è¿”å›ç»“æœå³å¯</p>
<h4 id="å®ç°å®¢æˆ·ç«¯-1"><a href="#å®ç°å®¢æˆ·ç«¯-1" class="headerlink" title="å®ç°å®¢æˆ·ç«¯"></a>å®ç°å®¢æˆ·ç«¯</h4><pre><code>func main() {
    start, _ := strconv.ParseInt(os.Args[1], 10, 64)

    conn, err := grpc.Dial(&quot;127.0.0.1:3000&quot;, grpc.WithInsecure())
    if err != nil {
        fmt.Errorf(&quot;dial failed. err: [%v]\n&quot;, err)
        return
    }
    client := counter.NewCounterClient(conn)

    stream, err := client.Count(context.Background(), &amp;counter.CountReq{
        Start: start,
    })
    if err != nil {
        fmt.Errorf(&quot;count failed. err: [%v]\n&quot;, err)
        return
    }

    for {
        res, err := stream.Recv()
        if err != nil {
            fmt.Errorf(&quot;client count failed. err: [%v]&quot;, err)
            return
        }

        fmt.Printf(&quot;server count: %v\n&quot;, res.GetNum())
    }
}
</code></pre><p>å®¢æˆ·ç«¯çš„ <code>Count</code> æ¥å£è¿”å›çš„æ˜¯ä¸€ä¸ª <code>stream</code>ï¼Œä¸æ–­åœ°è°ƒç”¨è¿™ä¸ª <code>stream</code> çš„ <code>Recv</code> æ–¹æ³•ï¼Œå¯ä»¥ä¸æ–­åœ°è·å–æ¥è‡ªæœåŠ¡ç«¯çš„è¿”å›</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>grpc å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆ: <a href="http://doc.oschina.net/grpc?t=60133" target="_blank" rel="noopener">http://doc.oschina.net/grpc?t=60133</a></li>
<li>grpc å®˜æ–¹ç¤ºä¾‹: <a href="https://github.com/grpc/grpc-go/tree/master/examples/route_guide" target="_blank" rel="noopener">https://github.com/grpc/grpc-go/tree/master/examples/route_guide</a></li>
<li>proto3 è¯­æ³•: <a href="https://developers.google.com/protocol-buffers/docs/proto3" target="_blank" rel="noopener">https://developers.google.com/protocol-buffers/docs/proto3</a></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> ç½‘ç»œæ¡†æ¶ </tag>
            
            <tag> grpc </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang å•å…ƒæµ‹è¯•]]></title>
      <url>/2018/01/31/golang-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</url>
      <content type="html"><![CDATA[<p>å•å…ƒæµ‹è¯•æ˜¯è´¨é‡ä¿è¯ååˆ†é‡è¦çš„ä¸€ç¯ï¼Œå¥½çš„å•å…ƒæµ‹è¯•ä¸ä»…èƒ½åŠæ—¶åœ°å‘ç°é—®é¢˜ï¼Œæ›´èƒ½å¤Ÿæ–¹ä¾¿åœ°è°ƒè¯•ï¼Œæé«˜ç”Ÿäº§æ•ˆç‡ï¼Œæ‰€ä»¥å¾ˆå¤šäººè®¤ä¸ºå†™å•å…ƒæµ‹è¯•æ˜¯éœ€è¦é¢å¤–çš„æ—¶é—´ï¼Œä¼šé™ä½ç”Ÿäº§æ•ˆç‡ï¼Œæ˜¯å¯¹å•å…ƒæµ‹è¯•æœ€å¤§çš„åè§å’Œè¯¯è§£</p>
<p>go è¯­è¨€åŸç”Ÿæ”¯æŒäº†å•å…ƒæµ‹è¯•ï¼Œä½¿ç”¨ä¸Šéå¸¸ç®€å•ï¼Œæµ‹è¯•ä»£ç åªéœ€è¦æ”¾åˆ°ä»¥ <code>_test.go</code> ç»“å°¾çš„æ–‡ä»¶ä¸­å³å¯ã€‚golangçš„æµ‹è¯•åˆ†ä¸ºå•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•çš„æµ‹è¯•ç”¨ä¾‹ä»¥ <code>Test</code> å¼€å¤´ï¼Œæ€§èƒ½æµ‹è¯•ä»¥ <code>Benchmark</code> å¼€å¤´</p>
<h3 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h3><p>å®ç°æ’åˆ—ç»„åˆå‡½æ•°å¯¹åº”çš„å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•</p>
<h4 id="å®ç°æ’åˆ—ç»„åˆå‡½æ•°"><a href="#å®ç°æ’åˆ—ç»„åˆå‡½æ•°" class="headerlink" title="å®ç°æ’åˆ—ç»„åˆå‡½æ•°"></a>å®ç°æ’åˆ—ç»„åˆå‡½æ•°</h4><pre><code>// combination.go

package hmath

func combination(m, n int) int {
    if n &gt; m-n {
        n = m - n
    }

    c := 1
    for i := 0; i &lt; n; i++ {
        c *= m - i
        c /= i + 1
    }

    return c
}
</code></pre><h4 id="å®ç°å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•"><a href="#å®ç°å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•" class="headerlink" title="å®ç°å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•"></a>å®ç°å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•</h4><pre><code>// combination_test.go

package hmath

import (
    &quot;math/rand&quot;
    &quot;testing&quot;
)

// å•å…ƒæµ‹è¯•
// æµ‹è¯•å…¨å±€å‡½æ•°ï¼Œä»¥TestFunctionå‘½å
// æµ‹è¯•ç±»æˆå‘˜å‡½æ•°ï¼Œä»¥TestClass_Functionå‘½å
func TestCombination(t *testing.T) {
    // è¿™é‡Œå®šä¹‰ä¸€ä¸ªä¸´æ—¶çš„ç»“æ„ä½“æ¥å­˜å‚¨æµ‹è¯•caseçš„å‚æ•°ä»¥åŠæœŸæœ›çš„è¿”å›å€¼
    for _, unit := range []struct {
        m        int
        n        int
        expected int
    }{
        {1, 0, 1},
        {4, 1, 4},
        {4, 2, 6},
        {4, 3, 4},
        {4, 4, 1},
        {10, 1, 10},
        {10, 3, 120},
        {10, 7, 120},
    } {
        // è°ƒç”¨æ’åˆ—ç»„åˆå‡½æ•°ï¼Œä¸æœŸæœ›çš„ç»“æœæ¯”å¯¹ï¼Œå¦‚æœä¸ä¸€è‡´è¾“å‡ºé”™è¯¯
        if actually := combination(unit.m, unit.n); actually != unit.expected {
            t.Errorf(&quot;combination: [%v], actually: [%v]&quot;, unit, actually)
        }
    }
}

// æ€§èƒ½æµ‹è¯•
func BenchmarkCombination(b *testing.B) {
    // b.Nä¼šæ ¹æ®å‡½æ•°çš„è¿è¡Œæ—¶é—´å–ä¸€ä¸ªåˆé€‚çš„å€¼
    for i := 0; i &lt; b.N; i++ {
        combination(i+1, rand.Intn(i+1))
    }
}

// å¹¶å‘æ€§èƒ½æµ‹è¯•
func BenchmarkCombinationParallel(b *testing.B) {
    // æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸‹é¢æ˜¯å¦å®‰å…¨
    b.RunParallel(func(pb *testing.PB) {
        for pb.Next() {
            m := rand.Intn(100) + 1
            n := rand.Intn(m)
            combination(m, n)
        }
    })
}
</code></pre><h4 id="è¿è¡Œæµ‹è¯•"><a href="#è¿è¡Œæµ‹è¯•" class="headerlink" title="è¿è¡Œæµ‹è¯•"></a>è¿è¡Œæµ‹è¯•</h4><pre><code>go test combination_test.go combination.go           # å•å…ƒæµ‹è¯•
go test --cover combination_test.go combination.go   # å•å…ƒæµ‹è¯•è¦†ç›–ç‡
go test -bench=. combination_test.go combination.go  # æ€§èƒ½æµ‹è¯•
</code></pre><h4 id="setup-å’Œ-teardown"><a href="#setup-å’Œ-teardown" class="headerlink" title="setup å’Œ teardown"></a>setup å’Œ teardown</h4><p>setup å’Œ teardown æ˜¯åœ¨æ¯ä¸ª case æ‰§è¡Œå‰åéƒ½éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼Œgolang æ²¡æœ‰ç›´æ¥çš„å®ç°ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªæ–¹æ³•å®ç°å…¨å±€çš„ setup å’Œ teardownï¼Œå…·ä½“æ¯ä¸ª case çš„ setup å’Œ teardown éœ€è¦è‡ªå·±å®ç°</p>
<pre><code>func TestMain(m *testing.M) {
    // setup code...
    os.Exit(m.Run())
    // teardown code...
}
</code></pre><h3 id="goconvey"><a href="#goconvey" class="headerlink" title="goconvey"></a>goconvey</h3><p>è¿™ä¸ªç¬¬ä¸‰æ–¹å·¥å…·ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è·‘æµ‹è¯•ï¼Œå¹¶ä¸”ä»¥éå¸¸å‹å¥½çš„å¯è§†åŒ–ç•Œé¢å¸®æˆ‘ä»¬å±•ç¤ºæµ‹è¯•çš„ç»“æœï¼ŒåŒ…æ‹¬æµ‹è¯•å¤±è´¥çš„åŸå› ï¼Œæµ‹è¯•è¦†ç›–ç‡ç­‰ç­‰ï¼Œå†…éƒ¨è¿˜æä¾›äº†å¾ˆå¤šå‹å¥½çš„æ–­è¨€ï¼Œèƒ½æé«˜æµ‹è¯•ä»£ç çš„å¯è¯»æ€§</p>
<h4 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h4><pre><code>go get github.com/smartystreets/goconvey
</code></pre><p>ç„¶åç”¨ç»ˆç«¯åœ¨æµ‹è¯•ä»£ç çš„ç›®å½•ä¸‹è¿è¡Œ <code>goconvey</code> å‘½ä»¤å³å¯</p>
<h4 id="æµ‹è¯•ä¾‹å­"><a href="#æµ‹è¯•ä¾‹å­" class="headerlink" title="æµ‹è¯•ä¾‹å­"></a>æµ‹è¯•ä¾‹å­</h4><pre><code>package package_name

import (
    &quot;testing&quot;
    . &quot;github.com/smartystreets/goconvey/convey&quot;
)

func TestIntegerStuff(t *testing.T) {
    Convey(&quot;Given some integer with a starting value&quot;, t, func() {
        x := 1

        Convey(&quot;When the integer is incremented&quot;, func() {
            x++

            Convey(&quot;The value should be greater by one&quot;, func() {
                So(x, ShouldEqual, 2)
            })
        })
    })
}
</code></pre><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>go testing: <a href="http://docs.studygolang.com/pkg/testing/" target="_blank" rel="noopener">http://docs.studygolang.com/pkg/testing/</a></li>
<li>goconvey: <a href="https://github.com/smartystreets/goconvey" target="_blank" rel="noopener">https://github.com/smartystreets/goconvey</a></li>
<li>goconvey æ–‡æ¡£: <a href="https://github.com/smartystreets/goconvey/wiki/Documentation" target="_blank" rel="noopener">https://github.com/smartystreets/goconvey/wiki/Documentation</a></li>
<li>goconvey æ ‡å‡†æ–­è¨€: <a href="https://github.com/smartystreets/goconvey/wiki/Assertions" target="_blank" rel="noopener">https://github.com/smartystreets/goconvey/wiki/Assertions</a></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> å•å…ƒæµ‹è¯• </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang pprof æ€§èƒ½åˆ†æå·¥å…·]]></title>
      <url>/2018/01/29/golang-pprof-%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/</url>
      <content type="html"><![CDATA[<p>æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸ªæ°¸æ’çš„è¯é¢˜ï¼Œè€Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åœ¨ä½œæ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ï¼Œå¾€å¾€åŸºäºä»£ç ä¸Šé¢çš„ç›´è§‰ï¼ŒæŠŠæ‰€æœ‰èƒ½æƒ³åˆ°çš„ä¼˜åŒ–éƒ½ä¼˜åŒ–äº†ä¸€éï¼Œä¸é”™è¿‡ä»»ä½•å°çš„ä¼˜åŒ–ç‚¹ï¼Œç»“æœæ•´ä¸ªä»£ç çš„é€»è¾‘å˜å¾—æå…¶å¤æ‚ï¼Œè€Œæ€§èƒ½ä¸Šé¢å¹¶æ²¡æœ‰å¤ªå¤§çš„æå‡ã€‚äº‹å®ä¸Šï¼Œæ€§èƒ½é—®é¢˜å¾€å¾€é›†ä¸­åœ¨æŸäº›å°ç‚¹ï¼Œæœ‰æ—¶å€™å¾ˆå°çš„æ”¹åŠ¨å°±èƒ½æœ‰å·¨å¤§çš„æå‡ï¼Œæ‰€ä»¥é—®é¢˜çš„å…³é”®æ˜¯æ˜¯æ€ä¹ˆå»æ‰¾å‡ºè¿™äº›ä¼˜åŒ–ç‚¹ï¼Œå¹¸è¿çš„æ˜¯ golang åœ¨è®¾è®¡çš„æ—¶å€™å°±è€ƒè™‘äº†è¿™ä¸ªé—®é¢˜ï¼ŒåŸç”Ÿæä¾›äº†æ€§èƒ½åˆ†æçš„å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¸®æˆ‘ä»¬æ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆ</p>
<h3 id="pprof-ç®€ä»‹"><a href="#pprof-ç®€ä»‹" class="headerlink" title="pprof ç®€ä»‹"></a>pprof ç®€ä»‹</h3><p>golang çš„æ€§èƒ½åˆ†æåº“åœ¨ <code>runtime/pprof</code> é‡Œï¼Œä¸»è¦æä¾›ä¸‹é¢å‡ ä¸ªæ¥å£</p>
<pre><code class="golang">// å †æ ˆåˆ†æ
func WriteHeapProfile(w io.Writer) error
// cpuåˆ†æ
func StartCPUProfile(w io.Writer) error
func StopCPUProfile()
</code></pre>
<p>ä½¿ç”¨ä¸Šé¢æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦å°†æ–‡ä»¶æŒ‡é’ˆä¼ ç»™å¯¹åº”çš„å‡½æ•°å³å¯ï¼Œæ€§èƒ½æ•°æ®å°†å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œç„¶åå¯ä»¥ä½¿ç”¨ golang è‡ªå¸¦çš„ pprof å·¥å…·ç”Ÿæˆ svgï¼Œpdf çš„å¯è§†åŒ–å›¾ï¼Œç„¶åå°±å¯ä»¥å¾ˆç›´è§‚åœ°ä»è¿™äº›å›¾é‡Œé¢çœ‹åˆ°ä¸»è¦çš„æ€§èƒ½æ¶ˆè€—äº†</p>
<h3 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h3><h4 id="é¦–å…ˆéœ€è¦ä¸€ä¸ªç¨‹åº"><a href="#é¦–å…ˆéœ€è¦ä¸€ä¸ªç¨‹åº" class="headerlink" title="é¦–å…ˆéœ€è¦ä¸€ä¸ªç¨‹åº"></a>é¦–å…ˆéœ€è¦ä¸€ä¸ªç¨‹åº</h4><p>é¦–å…ˆéœ€è¦åœ¨ä½ çš„ç¨‹åºé‡Œé¢æ³¨å…¥ pprof ä»£ç ï¼Œä¸‹é¢æ˜¯ä¸€æ®µç¤ºä¾‹ä»£ç ï¼Œå®Œæ•´ä»£ç åœ¨ï¼š<a href="https://github.com/hatlonely/hellogolang/blob/master/cmd/pprof/pprof_runtime.go" target="_blank" rel="noopener">https://github.com/hatlonely/hellogolang/blob/master/cmd/pprof/pprof_runtime.go</a>ï¼Œè¿™é‡Œä½¿ç”¨çš„ <code>PPCmd</code> æ–¹æ³•ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œåšçš„ä¸€ä¸ªç®€å•å°è£…ï¼Œä»£ç åœ¨ï¼š<a href="https://github.com/hatlonely/easygolang/blob/master/pprof/pprof.go" target="_blank" rel="noopener">https://github.com/hatlonely/easygolang/blob/master/pprof/pprof.go</a></p>
<pre><code class="golang">func main() {
    go doSomething1()
    go doSomething2()
    go doSomething3()

    if err := pprof.PPCmd(&quot;cpu 10s&quot;); err != nil {
        panic(err)
    }

    if err := pprof.PPCmd(&quot;mem&quot;); err != nil {
        panic(err)
    }
}
</code></pre>
<p>ç¼–è¯‘ï¼Œè¿è¡Œä¸Šé¢ä»£ç ä¼šç”Ÿæˆä¸¤ä¸ª pprof æ–‡ä»¶ï¼Œ<code>cpu.pprof.yyyymmddhhmmss</code> å’Œ <code>mem.pprof.yyyymmddhhmmss</code>ï¼Œç¼–è¯‘è¿è¡Œçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>cd $GOPATH/src
git clone git@github.com:hatlonely/hellogolang.git
cd hellogolang
glide install
go build cmd/pprof_runtime.go
./pprof_runtime
</code></pre><h4 id="pprof-æ–‡ä»¶åˆ†æ"><a href="#pprof-æ–‡ä»¶åˆ†æ" class="headerlink" title="pprof æ–‡ä»¶åˆ†æ"></a>pprof æ–‡ä»¶åˆ†æ</h4><p>pprof æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶çš„ï¼Œä¸æ˜¯ç»™äººè¯»çš„ï¼Œéœ€è¦ç¿»è¯‘ä¸€ä¸‹ï¼Œè€Œ golang åŸç”Ÿå°±ç»™æˆ‘ä»¬æä¾›äº†åˆ†æå·¥å…·ï¼Œç›´æ¥æ‰§è¡Œä¸‹é¢å‘½ä»¤å³å¯ï¼Œä¼šç”Ÿæˆä¸€å¼ å¾ˆç›´è§‚çš„ svg å›¾ç‰‡ï¼Œç›´æ¥ç”¨ chrome å°±å¯ä»¥æ‰“å¼€ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”Ÿæˆåˆ«çš„æ ¼å¼ï¼ˆpdfï¼Œpng éƒ½å¯ä»¥ï¼‰ï¼Œå¯ä»¥ç”¨ <code>go tool pprof -h</code> å‘½ä»¤æŸ¥çœ‹æ”¯æŒçš„è¾“å‡ºç±»å‹</p>
<pre><code>go tool pprof -svg ./pprof_runtime cpu.pprof.201801301415 &gt; cpu.svg
</code></pre><p>æ³¨æ„è¿™ä¸ªå·¥å…·ä¾èµ–äº graphviz å·¥å…·ï¼ŒMac ä¸Šå¯ç”¨ <code>brew install graphviz</code>ï¼Œcentos <code>yum install graphviz</code> å³å¯</p>
<p><img src="/img/stats/pprof_runtime_cpu.png" alt="æ€§èƒ½åˆ†æå›¾"></p>
<h3 id="http-æ¥å£"><a href="#http-æ¥å£" class="headerlink" title="http æ¥å£"></a>http æ¥å£</h3><p><code>net/http/pprof</code> é‡Œé¢å¯¹ <code>runtime/pprof</code> ä½œäº†ä¸€äº›å°è£…ï¼Œå¯¹å¤–æä¾›äº† http æ¥å£ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œä½†æ˜¯åªæ˜¯ä¸€äº›å­—ç¬¦ä¸²çš„ç»“æœï¼Œæ²¡æœ‰ä½œå¯è§†åŒ–ï¼Œä½“éªŒå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œç”¨ <code>go tool</code> è®¿é—®ä½“éªŒèƒ½å¥½ä¸€ç‚¹</p>
<pre><code>go tool pprof http://localhost:3000/debug/pprof/profile
go tool pprof http://localhost:3000/debug/pprof/heap
</code></pre><p>ä¸ªäººæ„Ÿè§‰è¿™ä¸ªæ¥å£æ¯”è¾ƒé¸¡è‚‹ï¼Œé¦–å…ˆæœ€å¤§çš„é—®é¢˜æ˜¯å±•ç¤ºä¸Šé¢å¹¶ä¸ç›´è§‚ï¼Œè¦æ˜¯èƒ½ç›´æ¥åœ¨ç½‘é¡µä¸Šé¢å¯è§†åŒ–åœ°å±•ç¤ºå¯èƒ½è¿˜çœŸçš„æŒºæ–¹ä¾¿çš„ï¼›è¿˜æœ‰å°±æ˜¯éœ€è¦é¢å¤–çš„æä¾›ä¸€ä¸ª http çš„ç«¯å£ï¼Œè€Œè¿™ä¸ªæ¥å£è¿˜ä¾èµ– <code>net/http</code>è¿™å°±æ„å‘³ç€å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨çš„æ˜¯å…¶ä»–ç¬¬ä¸‰æ–¹çš„ http åº“ï¼Œå¯èƒ½è¿˜éœ€è¦è§£å†³å…¼å®¹æ€§çš„é—®é¢˜ï¼›å®é™…ä¸Šï¼Œæˆ‘å†ä½¿ç”¨è¿™ä¸ªæ¥å£çš„æ—¶å€™ï¼Œåœ¨æœåŠ¡å™¨å‹åŠ›è¾ƒå¤§çš„åœºæ™¯ä¸‹ï¼Œä¼šå‡ºç°è®¿é—®è¶…æ—¶ï¼Œè€Œè¿™ç§å‹åŠ›è¾ƒå¤§æƒ…å†µä¸‹çš„æ€§èƒ½å¯èƒ½æ‰æ˜¯çœŸæ­£çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>å»ºè®®åœ¨æ ¹æ®çš„éœ€æ±‚ï¼Œè‡ªå·±å°è£… <code>runtime/pprof</code> çš„æ¥å£ï¼Œå½“ç„¶æ˜¯ç”¨åœºæ™¯æ¯”è¾ƒç®€å•ä¹Ÿå¯ä»¥ç”¨æˆ‘ä¸Šé¢çš„å°è£…ï¼Œç„¶ååœ¨æœåŠ¡é‡Œé¢è‡ªå·±æä¾›ä¸€ä¸ªä¸“é—¨çš„æ€§èƒ½åˆ†ææ¥å£ï¼ˆå¯èƒ½æ˜¯ gprcï¼Œthriftï¼Œæˆ–è€…å…¶ä»–çš„ç¬¬ä¸‰æ–¹ http æ¡†æ¶ï¼‰</p>
<h3 id="ç«ç„°å›¾"><a href="#ç«ç„°å›¾" class="headerlink" title="ç«ç„°å›¾"></a>ç«ç„°å›¾</h3><p>é™¤äº†ä¸Šé¢ç”Ÿæˆçš„ svg å›¾ï¼Œè¿˜å¯ä»¥ç”Ÿæˆç«ç„°å›¾ï¼Œè¿™æ˜¯ uber æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œåœ¨æ˜¾ç¤ºä¸Šé¢å¯èƒ½æ›´ç›´è§‚ä¸€äº›</p>
<p>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code>go get github.com/uber/go-torch
git clone git@github.com:brendangregg/FlameGraph.git
export PATH=$PATH:/path/to/FlameGraph
</code></pre><p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>go-torch --binaryname=./pprof_runtime --binaryinput=cpu.pprof.201801301415
</code></pre><p><img src="/img/stats/pprof_runtime_cpu_torch.svg" alt="æ€§èƒ½åˆ†æå›¾"></p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>Package pprof: <a href="https://golang.org/pkg/runtime/pprof/" target="_blank" rel="noopener">https://golang.org/pkg/runtime/pprof/</a></li>
<li>Profiling Go Programs: <a href="https://blog.golang.org/profiling-go-programs" target="_blank" rel="noopener">https://blog.golang.org/profiling-go-programs</a></li>
<li>Go torch: <a href="https://github.com/uber/go-torch" target="_blank" rel="noopener">https://github.com/uber/go-torch</a></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> æ€§èƒ½ </tag>
            
            <tag> pprof </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang json æ€§èƒ½åˆ†æ]]></title>
      <url>/2018/01/28/golang-json-%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>Json ä½œä¸ºä¸€ç§é‡è¦çš„æ•°æ®æ ¼å¼ï¼Œå…·æœ‰è‰¯å¥½çš„å¯è¯»æ€§ä»¥åŠè‡ªæè¿°æ€§ï¼Œå¹¿æ³›åœ°åº”ç”¨åœ¨å„ç§æ•°æ®ä¼ è¾“åœºæ™¯ä¸­ã€‚Go è¯­è¨€é‡Œé¢åŸç”Ÿæ”¯æŒäº†è¿™ç§æ•°æ®æ ¼å¼çš„åºåˆ—åŒ–ä»¥åŠååºåˆ—åŒ–ï¼Œå†…éƒ¨ä½¿ç”¨åå°„æœºåˆ¶å®ç°ï¼Œæ€§èƒ½æœ‰ç‚¹å·®ï¼Œåœ¨é«˜åº¦ä¾èµ– json è§£æçš„åº”ç”¨é‡Œï¼Œå¾€å¾€ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œå¥½åœ¨å·²æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¹ˆå¤šåº“ï¼Œå¯¹äºåƒæˆ‘è¿™ç§æœ‰é€‰æ‹©å›°éš¾ç—‡çš„äººæ¥è¯´ï¼Œåˆ°åº•è¦æ€ä¹ˆé€‰æ‹©å‘¢ï¼Œä¸‹é¢å°±ç»™å¤§å®¶æ¥ä¸€ä¸€åˆ†æä¸€ä¸‹</p>
<h3 id="ffjson"><a href="#ffjson" class="headerlink" title="ffjson"></a>ffjson</h3><pre><code>go get -u github.com/pquerna/ffjson
</code></pre><p>åŸç”Ÿçš„åº“æ€§èƒ½æ¯”è¾ƒå·®çš„ä¸»è¦åŸå› æ˜¯ä½¿ç”¨äº†å¾ˆå¤šåå°„çš„æœºåˆ¶ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œffjson é€šè¿‡é¢„ç¼–è¯‘ç”Ÿæˆä»£ç ï¼Œç±»å‹çš„åˆ¤æ–­åœ¨é¢„ç¼–è¯‘é˜¶æ®µå·²ç»ç¡®å®šï¼Œé¿å…äº†åœ¨è¿è¡Œæ—¶çš„åå°„</p>
<p>ä½†ä¹Ÿå› æ­¤åœ¨ç¼–è¯‘å‰éœ€è¦å¤šä¸€ä¸ªæ­¥éª¤ï¼Œéœ€è¦å…ˆç”Ÿæˆ ffjson ä»£ç ï¼Œç”Ÿæˆä»£ç åªéœ€è¦æ‰§è¡Œ <code>ffjson &lt;file.go&gt;</code> å°±å¯ä»¥äº†ï¼Œå…¶ä¸­ <code>file.go</code> æ˜¯ä¸€ä¸ªåŒ…å« json ç»“æ„ä½“å®šä¹‰çš„ go æ–‡ä»¶ã€‚æ³¨æ„è¿™é‡Œ ffjson æ˜¯è¿™ä¸ªåº“æä¾›çš„ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œç›´æ¥æ‰§è¡Œä¸Šé¢çš„ <code>go get</code> ä¼šæŠŠè¿™ä¸ªå·¥å…·å®‰è£…åœ¨ <code>$GOPATH/bin</code> ç›®å½•ä¸‹ï¼ŒæŠŠ <code>$GOPATH/bin</code> åŠ åˆ° <code>$PATH</code> ç¯å¢ƒå˜é‡é‡Œé¢ï¼Œå¯ä»¥å…¨å±€è®¿é—®</p>
<p>å¦å¤–ï¼Œå¦‚æœæœ‰äº›ç»“æ„ï¼Œä¸æƒ³è®© ffjson ç”Ÿæˆä»£ç ï¼Œå¯ä»¥é€šè¿‡å¢åŠ æ³¨é‡Šçš„æ–¹å¼</p>
<pre><code class="golang">// ffjson: skip
type Foo struct {
   Bar string
}

// ffjson: nodecoder
type Foo struct {
   Bar string
}
</code></pre>
<h3 id="easyjson"><a href="#easyjson" class="headerlink" title="easyjson"></a>easyjson</h3><pre><code>go get -u github.com/mailru/easyjson/...
</code></pre><p>easyjson çš„æ€æƒ³å’Œ ffjson æ˜¯ä¸€è‡´çš„ï¼Œéƒ½æ˜¯å¢åŠ ä¸€ä¸ªé¢„ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œé¢„å…ˆç”Ÿæˆå¯¹åº”ç»“æ„çš„åºåˆ—åŒ–ååºåˆ—åŒ–ä»£ç ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œeasyjson è¿˜æ”¾å¼ƒäº†ä¸€äº›åŸç”Ÿåº“é‡Œé¢æ”¯æŒçš„ä¸€äº›ä¸å¿…è¦çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ï¼škey ç±»å‹å£°æ˜ï¼Œkey å¤§å°å†™ä¸æ•æ„Ÿç­‰ç­‰ï¼Œä»¥è¾¾åˆ°æ›´é«˜çš„æ€§èƒ½</p>
<p>ç”Ÿæˆä»£ç æ‰§è¡Œ <code>easyjson -all &lt;file.go&gt;</code> å³å¯ï¼Œå¦‚æœä¸æŒ‡å®š <code>-all</code> å‚æ•°ï¼Œåªä¼šå¯¹å¸¦æœ‰ <code>//easyjson:json</code> çš„ç»“æ„ç”Ÿæˆä»£ç </p>
<pre><code class="golang">//easyjson:json
type A struct {
    Bar string
}
</code></pre>
<h3 id="jsoniter"><a href="#jsoniter" class="headerlink" title="jsoniter"></a>jsoniter</h3><pre><code>go get -u github.com/json-iterator/go
</code></pre><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆç¥å¥‡çš„åº“ï¼Œæ»´æ»´å¼€å‘çš„ï¼Œä¸åƒ easyjson å’Œ ffjson éƒ½ä½¿ç”¨äº†é¢„ç¼–è¯‘ï¼Œè€Œä¸” 100% å…¼å®¹åŸç”Ÿåº“ï¼Œä½†æ˜¯æ€§èƒ½è¶…çº§å¥½ï¼Œä¹Ÿä¸çŸ¥é“æ€ä¹ˆå®ç°çš„ï¼Œå¦‚æœæœ‰äººçŸ¥é“çš„è¯ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ä¸€ä¸‹å—ï¼Ÿ</p>
<blockquote>
<p>2018-1-28æ—¥æ›´æ–°ï¼Œæ¥è‡ªå®˜æ–¹ï¼ˆ@taowenï¼‰çš„å›å¤ï¼š<br>æ²¡å•¥ç¥å¥‡çš„ã€‚å°±æ˜¯é¢„å…ˆç¼“å­˜äº†å¯¹åº”structçš„decoderå®ä¾‹è€Œå·²ã€‚ç„¶åunsafe.Pointerçœæ‰äº†ä¸€äº›interface{}çš„å¼€é”€ã€‚è¿˜æœ‰ä¸€äº›æ–‡æœ¬è§£æä¸Šçš„ä¼˜åŒ–</p>
</blockquote>
<p>ä½¿ç”¨ä¸Šé¢ï¼Œä½ åªè¦æŠŠæ‰€æœ‰çš„ </p>
<pre><code>import &quot;encoding/json&quot;
</code></pre><p>æ›¿æ¢æˆ</p>
<pre><code>import &quot;github.com/json-iterator/go&quot;

var json = jsoniter.ConfigCompatibleWithStandardLibrary
</code></pre><p>å°±å¯ä»¥äº†ï¼Œå…¶å®ƒéƒ½ä¸éœ€è¦åŠ¨</p>
<h3 id="codec-json"><a href="#codec-json" class="headerlink" title="codec-json"></a>codec-json</h3><pre><code>go get -u github.com/ugorji/go/codec
</code></pre><p>è¿™ä¸ªåº“é‡Œé¢å…¶å®åŒ…å«å¾ˆå¤šå†…å®¹ï¼Œjson åªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæ¯”è¾ƒè€ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œæ€§èƒ½ä¹Ÿä¸æ˜¯å¾ˆå¥½</p>
<h3 id="jsonparser"><a href="#jsonparser" class="headerlink" title="jsonparser"></a>jsonparser</h3><pre><code>go get -u github.com/buger/jsonparser
</code></pre><p>ä¸¥æ ¼æ¥è¯´ï¼Œè¿™ä¸ªåº“ä¸å±äº json åºåˆ—åŒ–çš„åº“ï¼Œåªæ˜¯æä¾›äº†ä¸€äº› json è§£æçš„æ¥å£ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦è‡ªå·±å»è®¾ç½®ç»“æ„é‡Œé¢çš„å€¼ï¼Œäº‹å®ä¸Šï¼Œæ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦é‡æ–°è§£æ json å¯¹è±¡ï¼Œæ€§èƒ½å¹¶ä¸æ˜¯å¾ˆå¥½</p>
<p>å°±åƒåå­—æš—ç¤ºçš„é‚£æ ·ï¼Œè¿™ä¸ªåº“åªæ˜¯ä¸€ä¸ªè§£æåº“ï¼Œå¹¶æ²¡æœ‰åºåˆ—åŒ–çš„æ¥å£</p>
<h3 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h3><p>å¯¹ä¸Šé¢è¿™äº› json åº“ï¼Œä½œäº†ä¸€äº›æ€§èƒ½æµ‹è¯•ï¼Œæµ‹è¯•ä»£ç åœ¨ï¼š<a href="https://github.com/hatlonely/hellogolang/blob/master/internal/json/json_benchmark_test.go" target="_blank" rel="noopener">https://github.com/hatlonely/hellogolang/blob/master/internal/json/json_benchmark_test.go</a>ï¼Œä¸‹é¢æ˜¯åœ¨æˆ‘çš„ Macbook ä¸Šæµ‹è¯•çš„ç»“æœï¼ˆå®é™…ç»“æœå’Œåº“çš„ç‰ˆæœ¬ä»¥åŠæœºå™¨ç¯å¢ƒæœ‰å…³ï¼Œå»ºè®®è‡ªå·±å†æµ‹è¯•ä¸€éï¼‰ï¼š</p>
<pre><code>BenchmarkMarshalStdJson-4                    1000000          1097 ns/op
BenchmarkMarshalJsonIterator-4               2000000           781 ns/op
BenchmarkMarshalFfjson-4                     2000000           941 ns/op
BenchmarkMarshalEasyjson-4                   3000000           513 ns/op
BenchmarkMarshalCodecJson-4                  1000000          1074 ns/op
BenchmarkMarshalCodecJsonWithBufio-4         1000000          2161 ns/op
BenchmarkUnMarshalStdJson-4                   500000          2512 ns/op
BenchmarkUnMarshalJsonIterator-4             2000000           591 ns/op
BenchmarkUnMarshalFfjson-4                   1000000          1127 ns/op
BenchmarkUnMarshalEasyjson-4                 2000000           608 ns/op
BenchmarkUnMarshalCodecJson-4                  20000        122694 ns/op
BenchmarkUnMarshalCodecJsonWithBufio-4        500000          3417 ns/op
BenchmarkUnMarshalJsonparser-4               2000000           877 ns/op
</code></pre><p><img src="/img/stats/golang_json_performance.png" alt="golang_json_performance"></p>
<p>ä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡ºæ¥ï¼š</p>
<ol>
<li>easyjson æ— è®ºæ˜¯åºåˆ—åŒ–è¿˜æ˜¯ååºåˆ—åŒ–éƒ½æ˜¯æœ€ä¼˜çš„ï¼Œåºåˆ—åŒ–æå‡äº†1å€ï¼Œååºåˆ—åŒ–æå‡äº†3å€</li>
<li>jsoniter æ€§èƒ½ä¹Ÿå¾ˆå¥½ï¼Œæ¥è¿‘äºeasyjsonï¼Œå…³é”®æ˜¯æ²¡æœ‰é¢„ç¼–è¯‘è¿‡ç¨‹ï¼Œ100%å…¼å®¹åŸç”Ÿåº“</li>
<li>ffjson çš„åºåˆ—åŒ–æå‡å¹¶ä¸æ˜æ˜¾ï¼Œååºåˆ—åŒ–æå‡äº†1å€</li>
<li>codecjson å’ŒåŸç”Ÿåº“ç›¸æ¯”ï¼Œå·®ä¸å¤ªå¤šï¼Œç”šè‡³æ›´å·®</li>
<li>jsonparser ä¸å¤ªé€‚åˆè¿™æ ·çš„åœºæ™¯ï¼Œæ€§èƒ½æå‡å¹¶ä¸æ˜æ˜¾ï¼Œè€Œä¸”æ²¡æœ‰ååºåˆ—åŒ–</li>
</ol>
<p><strong>æ‰€ä»¥ç»¼åˆè€ƒè™‘ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨ jsoniterï¼Œå¦‚æœè¿½æ±‚æè‡´çš„æ€§èƒ½ï¼Œè€ƒè™‘ easyjson</strong></p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>ffjson: <a href="https://github.com/pquerna/ffjson" target="_blank" rel="noopener">https://github.com/pquerna/ffjson</a></li>
<li>easyjson: <a href="https://github.com/mailru/easyjson" target="_blank" rel="noopener">https://github.com/mailru/easyjson</a></li>
<li>jsoniter: <a href="https://github.com/json-iterator/go" target="_blank" rel="noopener">https://github.com/json-iterator/go</a></li>
<li>jsonparser: <a href="https://github.com/buger/jsonparser" target="_blank" rel="noopener">https://github.com/buger/jsonparser</a></li>
<li>codecjson: <a href="http://ugorji.net/blog/go-codec-primer" target="_blank" rel="noopener">http://ugorji.net/blog/go-codec-primer</a></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> json </tag>
            
            <tag> æ€§èƒ½ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang ä¾èµ–ç®¡ç†]]></title>
      <url>/2018/01/27/golang-%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<p>ä¾èµ–ç®¡ç†æ˜¯ä¸€ä¸ªè¯­è¨€éå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šç€ä¸€ä¸ªè¯­è¨€çš„æµè¡Œç¨‹åº¦ï¼Œæµè¡Œçš„è¯­è¨€å¤§å¤šéƒ½æœ‰éå¸¸æˆç†Ÿçš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œjava çš„ maven å’Œ gradleï¼Œjavascript çš„ npmï¼Œpython çš„ pipï¼Œè¿™äº›å·¥å…·æå¤§åœ°é™ä½äº†æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æˆæœ¬ï¼Œæé«˜äº†ç”Ÿäº§æ•ˆç‡ï¼Œè€Œ c++ æ¯”è¾ƒå¥‡è‘©ï¼Œå¹¶æ²¡æœ‰è¿™æ ·ç»Ÿä¸€çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¤§å…¬å¸å¥½ä¸€ç‚¹ï¼Œæœ‰ä¸“é—¨çš„å›¢é˜Ÿå»åšè¿™æ ·çš„å·¥å…·è§£å†³ä¾èµ–çš„é—®é¢˜ï¼Œå°å…¬å¸å°±åªèƒ½è‡ªå·±æŠŠæºç æ‹‰ä¸‹æ¥ï¼Œæ”¾åˆ°å›ºå®šçš„ç›®å½•ï¼Œç„¶åç¼–è¯‘æˆäºŒè¿›åˆ¶ï¼Œè¿æ°”ä¸å¥½çš„è¯ï¼Œè¿˜è¦è‡ªå·±è§£å†³å„ç§å…¼å®¹æ€§çš„é—®é¢˜ï¼Œå¦‚æœæœ‰ç‰ˆæœ¬æ›´æ–°ï¼Œè¿™ä¸ªè¿‡ç¨‹è¿˜å¾—é‡å¤ä¸€éï¼Œç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨å’Œç»´æŠ¤æˆæœ¬ä¹‹é«˜ï¼Œè®©äººç®€ç›´å°±æƒ³æ”¾å¼ƒâ€¦â€¦</p>
<p>Golang æ˜¯è‡ªå¸¦ä¾èµ–ç®¡ç†å·¥å…·çš„ï¼Œç›´æ¥ <code>go get &lt;packages&gt;</code> å°±å¯ä»¥æŠŠä¾èµ–æ‹‰ä¸‹æ¥ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æœ‰ä¸ªç¼ºé™·ï¼Œæ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶ï¼Œä½ æ¯æ¬¡æ‹‰ä¸‹æ¥çš„ <code>package</code> éƒ½æ˜¯ <code>master</code> åˆ†æ”¯ä¸Šçš„ç‰ˆæœ¬ï¼Œè¿™æ ·æ˜¯å¾ˆå±é™©çš„ï¼Œæºä»£ç æ›´æ–°å¯èƒ½ä¼šæœ‰ä¸€äº›å¯¹å¤–æ¥å£ä¸Šé¢çš„è°ƒæ•´ï¼Œè¿™äº›è°ƒæ•´å¾ˆæœ‰å¯èƒ½å°±å¯¼è‡´ä½ çš„ç¨‹åºç¼–è¯‘é€šä¸è¿‡ï¼Œè€Œæ›´è‡´å‘½çš„æ˜¯ï¼Œæ–°çš„ä»£ç å¼•å…¥äº†ä¸€äº›æ–°çš„ bug æˆ–è€…æ¥å£è¯­ä¹‰ä¸Šçš„å˜åŒ–ä¼šå¯¼è‡´ä½ çš„ç¨‹åºå´©æºƒï¼Œæ‰€ä»¥æ—©æœŸçš„ gopher å¼€å‘äº†å¦ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…· <a href="https://github.com/tools/godep" target="_blank" rel="noopener"><code>godep</code></a>è§£å†³äº†ç‰ˆæœ¬ç®¡ç†çš„é—®é¢˜ï¼Œæœ€è¿‘ï¼Œgolang å®˜æ–¹ä¹Ÿåœ¨å¼€å‘ä¸€ä¸ªæ–°çš„ä¾èµ–ç®¡ç†å·¥å…· <a href="https://github.com/golang/dep" target="_blank" rel="noopener"><code>dep</code></a>ï¼Œä½†ä»Šå¤©æˆ‘ç»™å¤§å®¶æ¨èçš„æ˜¯ <a href="https://github.com/Masterminds/glide" target="_blank" rel="noopener"><code>glide</code></a> è¿™æ¬¾å·¥å…·ï¼Œå’Œå…¶ä»–å·¥å…·ç›¸æ¯”å‘¢ï¼Œè¿™æ¬¾å·¥å…·æ”¯æŒæ›´å¤šçš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬æ”¯æŒä¾èµ–çš„è‡ªåŠ¨åˆ†æï¼ŒæŒ‡å®šç‰ˆæœ¬èŒƒå›´ï¼Œä¾èµ–æ¸…ç†ç­‰ç­‰ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚è¿™é‡Œæœ‰ä¸€äº›å·¥å…·çš„å¯¹æ¯”ï¼š<a href="https://github.com/Masterminds/glide/wiki/Go-Package-Manager-Comparison" target="_blank" rel="noopener">https://github.com/Masterminds/glide/wiki/Go-Package-Manager-Comparison</a></p>
<p>ä¸‹é¢æˆ‘ç»™å¤§å®¶ç®€å•ä»‹ç»ä¸€ä¸‹ <code>glide</code> åœ¨å®é™…é¡¹ç›®ä¸­çš„ä½¿ç”¨</p>
<h3 id="glideä½¿ç”¨"><a href="#glideä½¿ç”¨" class="headerlink" title="glideä½¿ç”¨"></a>glideä½¿ç”¨</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>Linux</p>
<pre><code>curl https://glide.sh/get | sh
</code></pre><p>Mac</p>
<pre><code>brew install glide
</code></pre><h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><pre><code>glide init
</code></pre><p>è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨åˆ†æä½ ä»£ç é‡Œé¢çš„ä¾èµ–ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª <code>glide.yaml</code> æ¥æè¿°ä½ å½“å‰é¡¹ç›®çš„ä¾èµ–ï¼Œç”Ÿæˆçš„è¿™ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥æ‰‹åŠ¨ç¼–è¾‘çš„ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ä¸€äº›ç‰ˆæœ¬ä¹‹ç±»çš„ä¿¡æ¯</p>
<p>å¦‚æœæœ‰äº›æ–‡ä»¶å¤¹ä¸å¸Œæœ›è¢«æ‰«æï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>glide.yaml</code>ï¼Œå¢åŠ  <code>excludeDirs</code>ï¼Œå¸Œæœ›å¿½ç•¥æŸäº›å¼•å…¥çš„åŒ…å¯ä»¥ä½¿ç”¨ <code>ignore</code>ï¼Œæ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒï¼š<a href="https://glide.readthedocs.io/en/latest/glide.yaml/" target="_blank" rel="noopener">https://glide.readthedocs.io/en/latest/glide.yaml/</a></p>
<pre><code>ignore:
- api
excludeDirs:
- api
- cmd
</code></pre><p>æé†’ä¸€ä¸‹ï¼Œè¿™ä¸ªæ“ä½œå¿…é¡»åœ¨ <code>$GOPATH/src/</code> çš„å­ç›®å½•ä¸‹é¢ï¼Œè¿™ä¸ªå’Œ golang æœ¬èº«çš„åŒ…ç®¡ç†æœºåˆ¶æœ‰å…³ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® <code>$GOPATH</code>ï¼Œè®°å¾—è®¾ç½®ä¸€ä¸‹ <code>export GOPATH=&lt;directory&gt;</code></p>
<h4 id="ä¾èµ–ä¸‹è½½"><a href="#ä¾èµ–ä¸‹è½½" class="headerlink" title="ä¾èµ–ä¸‹è½½"></a>ä¾èµ–ä¸‹è½½</h4><pre><code>glide update
</code></pre><p>è¿™ä¸ªå‘½ä»¤ä¼šä¸‹è½½ <code>glide.yaml</code> é‡Œé¢çš„ä¾èµ–åº“ï¼Œå¹¶ä¸”åŒæ ·ä¼šåˆ†æå¹¶ä¸‹è½½ä¾èµ–åº“ä¾èµ–çš„å…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼Œä¸‹è½½çš„ä¾èµ–ä¼šæ”¾åˆ°ä¸ <code>glide.yaml</code> åŒçº§çš„ <code>vendor</code> ç›®å½•ï¼ŒåŒæ—¶è¿˜ä¼šç”Ÿæˆä¸€ä¸ª <code>glide.lock</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œé¢æè¿°äº†å½“å‰ä¾èµ–çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¸è¦æ‰‹å·¥ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶</p>
<p>å¦‚æœä½ åœ¨ä¸­å›½ï¼Œè¿™ä¸ªæ­¥éª¤é‡Œé¢å¯èƒ½ä¼šç¢°åˆ°æœ‰äº› <code>gopkg</code> çš„åº“æ‹‰ä¸ä¸‹æ¥ï¼Œä¹Ÿä¸çŸ¥é“ä¸ºå•¥è¦æŠŠè¿™ä¸ªä¹Ÿç¦äº†â€¦â€¦å¦‚æœä½ ç¢°åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥æ‰‹åŠ¨æŠŠè¿™äº›åº“ä¸‹è½½åˆ° <code>${GOROOT}/src/golang.org/x</code> ä¸‹é¢</p>
<pre><code>git clone https://github.com/golang/crypto.git
git clone https://github.com/golang/sys.git
git clone https://github.com/golang/sync.git
git clone https://github.com/golang/text.git
git clone https://github.com/golang/net.git
</code></pre><h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><pre><code>glide get --all-dependencies github.com/foo/bar
</code></pre><p>ä¹Ÿå¯ä»¥æŒ‡å®šç‰ˆæœ¬</p>
<pre><code>glide get --all-dependencies github.com/foo/bar#^1.2.3
</code></pre><p>é™¤äº† <code>github</code> ä¸Šçš„ä¾èµ–ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„å¹³å°ï¼Œæ¯”å¦‚ <code>gitee</code>ï¼Œæˆ–è€…è‡ªå·±å…¬å¸æ­å»ºçš„ gitlabï¼Œåªè¦æœ‰æƒé™å°±å¯ä»¥ï¼Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œç‰ˆæœ¬å¿…é¡»æ˜¯ä¸‰ä½æ•°å­—çš„ç‰ˆæœ¬å·ï¼Œå¦åˆ™å¯èƒ½è¯†åˆ«ä¸äº†</p>
<h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><pre><code>glide install
</code></pre><p>è¿™ä¸ªå‘½ä»¤æ˜¯åœ¨ä¸€ä¸ªå·²ç»ä½¿ç”¨ glide ç®¡ç†ä¾èµ–çš„é¡¹ç›®é‡Œï¼Œéœ€è¦åœ¨æ–°ç¯å¢ƒä¸‹é‡æ–°å®‰è£…ä¾èµ–ä½¿ç”¨çš„ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šæŒ‰ç…§ <code>glide.lock</code> çš„ä¿¡æ¯ï¼ŒæŠŠæ‰€æœ‰çš„ä¾èµ–æ‹‰å–åˆ°æœ¬åœ°ï¼Œå’Œ <code>glide update</code> ä¸åŒçš„æ˜¯ï¼Œ<code>glide update</code> ä¼šæ¥å»æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¼šä¿®æ”¹ <code>glide.lock</code>ï¼Œè€Œ <code>glide install</code> åªä¸‹è½½ä¹‹å‰çš„ä¾èµ–</p>
<h4 id="ä¾èµ–é•œåƒ"><a href="#ä¾èµ–é•œåƒ" class="headerlink" title="ä¾èµ–é•œåƒ"></a>ä¾èµ–é•œåƒ</h4><pre><code>glide mirror set [original] [replacement]
</code></pre><p>æœ‰äº›åº“å¦‚æœè®¿é—®ä¸äº†å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è®¾ç½®é•œåƒï¼Œgolang.org è¢«ç¦çš„é—®é¢˜ä¹Ÿå¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•è§£å†³</p>
<pre><code>glide mirror set https://golang.org/x/crypto https://github.com/golang/crypto --vcs git
glide mirror set https://golang.org/x/net https://github.com/golang/net --vcs git
glide mirror set https://golang.org/x/text https://github.com/golang/text --vcs git
glide mirror set https://golang.org/x/sys https://github.com/golang/sys --vcs git
</code></pre><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li>glide github: <a href="https://github.com/Masterminds/glide" target="_blank" rel="noopener">https://github.com/Masterminds/glide</a></li>
<li>glide å®˜ç½‘: <a href="https://glide.sh/" target="_blank" rel="noopener">https://glide.sh/</a></li>
<li>glide æ–‡æ¡£: <a href="https://glide.readthedocs.io/en/latest/" target="_blank" rel="noopener">https://glide.readthedocs.io/en/latest/</a></li>
<li>go ä¾èµ–åŒ…ç®¡ç†å·¥å…·å¯¹æ¯”: <a href="https://ieevee.com/tech/2017/07/10/go-import.html" target="_blank" rel="noopener">https://ieevee.com/tech/2017/07/10/go-import.html</a></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> ä¾èµ–ç®¡ç† </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è“„æ°´æ± ç®—æ³•]]></title>
      <url>/2018/01/26/%E8%93%84%E6%B0%B4%E6%B1%A0%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦ä»ä¸å›ºå®šå¤§å°çš„æ•°æ®é›†ä¸­å–å›ºå®šæ•°é‡çš„æ•°æ®ä½œä¸ºæ ·æœ¬ï¼Œæœ‰ä¸ªåŒå­¦æåˆ°äº†è“„æ°´æ± ç®—æ³•ï¼Œäºæ˜¯äº†è§£äº†ä¸€ä¸‹ã€‚</p>
<p>è“„æ°´æ± ç®—æ³•ï¼Œæœ¬èº«æ˜¯ä¸ºäº†è§£å†³æµ·é‡æ•°æ®çš„éšæœºæŠ½æ ·é—®é¢˜ï¼Œåœ¨ç®—æ³•é¢†åŸŸåº”ç”¨è¿˜æ˜¯æŒºå¹¿æ³›çš„ï¼Œç”±äºæ•°æ®æœ¬èº«æ˜¯æœ‰æƒé‡ï¼Œåˆå‡ºç°äº†åŠ æƒè“„æ°´æ± ç®—æ³•ã€‚</p>
<h3 id="è“„æ°´æ± ç®—æ³•"><a href="#è“„æ°´æ± ç®—æ³•" class="headerlink" title="è“„æ°´æ± ç®—æ³•"></a>è“„æ°´æ± ç®—æ³•</h3><p><strong>é—®é¢˜æè¿°</strong>: ç»™å®šä¸€ä¸ªä¸å›ºå®šé•¿åº¦çš„æ•°æ®é›†åˆ <code>sequence</code>ï¼Œä»ä¸­ç­‰æ¦‚ç‡åœ°æŠ½å– <code>k</code> ä¸ªå…ƒç´ ä½œä¸ºæ ·æœ¬è¿”å›</p>
<p><strong>é—®é¢˜æ€è·¯</strong>: å…ˆæŠŠæ ·æœ¬å¡«æ»¡ï¼Œç„¶åä¸æ–­å¾€æ ·æœ¬é‡Œé¢ç­‰æ¦‚ç‡æ›¿æ¢å…ƒç´ </p>
<p><strong>ç®—æ³•å®ç°</strong></p>
<pre><code class="python">def reservior_sampling(sequence, k):
    n = len(sequence)
    if k &gt; n:
        return sequence

    sample = list()
    for i in range(k):
        sample.append(sequence[i])

    for i in range(k, n):
        j = random.randint(0, i)
        if j &gt;= k:
            continue
        sample[j] = sequence[i]

    return sample
</code></pre>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å¾€æ ·æœ¬é‡Œé¢æ›¿æ¢å…ƒç´ çš„æ—¶å€™ï¼Œç¬¬ <code>i</code> ä¸ªå…ƒç´ èƒ½è¢«é€‰ä¸­ç”¨æ¥æ›¿æ¢çš„æ¦‚ç‡æ˜¯ <code>k / i + 1</code>ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ¯ä¸ªå…ƒç´ è¢«é€‰ä¸­çš„æœºä¼šéƒ½æ˜¯å‡ç­‰çš„</p>
<h3 id="åŠ æƒè“„æ°´æ± ç®—æ³•"><a href="#åŠ æƒè“„æ°´æ± ç®—æ³•" class="headerlink" title="åŠ æƒè“„æ°´æ± ç®—æ³•"></a>åŠ æƒè“„æ°´æ± ç®—æ³•</h3><p><strong>é—®é¢˜æè¿°</strong>: ç»™å®šä¸€ä¸ªä¸å›ºå®šé•¿åº¦çš„éå¸¸å¤§çš„æ•°æ®é›†åˆ <code>sequence</code>ï¼Œé›†åˆä¸­æ¯ä¸ªå…ƒç´ åŒ…å«ä¸€ä¸ªæƒé‡ <code>weight</code>ï¼ŒæŒ‰ç…§æƒé‡ä»é›†åˆä¸­æŠ½å– <code>k</code> ä¸ªå…ƒç´ è¿”å›</p>
<p><strong>é—®é¢˜æ€è·¯</strong>: å’Œè“„æ°´æ± ç®—æ³•çš„æ€è·¯ä¸€æ ·ï¼Œå…ˆæŠŠæ ·æœ¬å¡«æ»¡ï¼Œç„¶åä¸æ–­åœ°æŒ‰ç…§æƒé‡æ›¿æ¢å…ƒç´ </p>
<p><strong>ç®—æ³•å®ç°</strong></p>
<pre><code class="python">def weighted_reservior_sampling_achao(sequence, k):
    n = len(sequence)
    if k &gt; n:
        return sequence

    wsum = 0
    sample = list()
    for i in range(k):
        sample.append(sequence[i])
        wsum += sequence[i][&#39;weight&#39;] / k

    for i in range(k, n):
        wsum += sequence[i][&#39;weight&#39;] / k
        p = sequence[i][&#39;weight&#39;] / wsum
        j = random.random()
        if j &lt;= p:
            sample[random.randint(0, k-1)] = sequence[i]

    return sample
</code></pre>
<p>è¿™é‡Œç¬¬ <code>i</code> ä¸ªå…ƒç´ è¢«é€‰ä¸­ç”¨æ¥æ›¿æ¢çš„æ¦‚ç‡æ˜¯ <code>sequence[i].weight * k / sum(sequence[0:i+1].weight)</code>ï¼Œå½“æ‰€æœ‰æƒé‡éƒ½ä¸€è‡´çš„æ—¶å€™ï¼Œå°±å’Œè“„æ°´æ± ç®—æ³•æ˜¯ä¸€è‡´çš„äº†ã€‚</p>
<p>è¿™é‡Œé¢æœ‰ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯ä¸€å¼€å§‹ç”¨æ¥å¡«å……æ ·æœ¬çš„æ•°æ®ï¼Œå…¶å®æ˜¯ç­‰æ¦‚ç‡çš„ï¼Œè¿™æ ·ä¼šå¯¼è‡´ï¼Œå¡«å……æ ·æœ¬çš„æ•°æ®æƒé‡å¤±æ•ˆï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜åªåœ¨æ•°æ®é›†åˆè¾ƒå°ï¼ˆå‡†ç¡®åœ°è¯´ <code>k</code> å’Œ <code>len(sequence)</code> æ¯”è¾ƒæ¥è¿‘ï¼‰çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„ç¼ºé™·ï¼Œåœ¨æµ·é‡æ•°æ®é›†çš„æƒ…å†µä¸‹ï¼Œè¿™ç§å½±å“æ˜¯å¾®ä¹å…¶å¾®çš„ã€‚</p>
<p>å®Œæ•´ä»£ç : <a href="https://github.com/hatlonely/algorithm/blob/master/reservoir_sampling.py" target="_blank" rel="noopener">https://github.com/hatlonely/algorithm/blob/master/reservoir_sampling.py</a></p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p>Reservoir sampling: <a href="https://en.wikipedia.org/wiki/Reservoir_sampling" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Reservoir_sampling</a></p>
]]></content>
      
        
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang å‡ ç§å­—ç¬¦ä¸²çš„è¿æ¥æ–¹å¼]]></title>
      <url>/2018/01/24/golang-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%87%A0%E7%A7%8D%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨åšæ€§èƒ½ä¼˜åŒ–ï¼Œæœ‰ä¸ªå‡½æ•°é‡Œé¢çš„è€—æ—¶ç‰¹åˆ«é•¿ï¼Œçœ‹é‡Œé¢çš„æ“ä½œå¤§å¤šæ˜¯ä¸€äº›å­—ç¬¦ä¸²æ‹¼æ¥çš„æ“ä½œï¼Œè€Œå­—ç¬¦ä¸²æ‹¼æ¥åœ¨ golang é‡Œé¢å…¶å®æœ‰å¾ˆå¤šç§å®ç°ã€‚</p>
<h3 id="å®ç°æ–¹æ³•"><a href="#å®ç°æ–¹æ³•" class="headerlink" title="å®ç°æ–¹æ³•"></a>å®ç°æ–¹æ³•</h3><h4 id="1-ç›´æ¥ä½¿ç”¨è¿ç®—ç¬¦"><a href="#1-ç›´æ¥ä½¿ç”¨è¿ç®—ç¬¦" class="headerlink" title="1. ç›´æ¥ä½¿ç”¨è¿ç®—ç¬¦"></a>1. ç›´æ¥ä½¿ç”¨è¿ç®—ç¬¦</h4><pre><code class="golang">func BenchmarkAddStringWithOperator(b *testing.B) {
    hello := &quot;hello&quot;
    world := &quot;world&quot;
    for i := 0; i &lt; b.N; i++ {
        _ = hello + &quot;,&quot; + world
    }
}
</code></pre>
<p>golang é‡Œé¢çš„å­—ç¬¦ä¸²éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œæ¯æ¬¡è¿ç®—éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿå¾ˆå¤šä¸´æ—¶çš„æ— ç”¨çš„å­—ç¬¦ä¸²ï¼Œä¸ä»…æ²¡æœ‰ç”¨ï¼Œè¿˜ä¼šç»™ gc å¸¦æ¥é¢å¤–çš„è´Ÿæ‹…ï¼Œæ‰€ä»¥æ€§èƒ½æ¯”è¾ƒå·®</p>
<h4 id="2-fmt-Sprintf"><a href="#2-fmt-Sprintf" class="headerlink" title="2. fmt.Sprintf()"></a>2. fmt.Sprintf()</h4><pre><code class="golang">func BenchmarkAddStringWithSprintf(b *testing.B) {
    hello := &quot;hello&quot;
    world := &quot;world&quot;
    for i := 0; i &lt; b.N; i++ {
        _ = fmt.Sprintf(&quot;%s,%s&quot;, hello, world)
    }
}
</code></pre>
<p>å†…éƒ¨ä½¿ç”¨ <code>[]byte</code> å®ç°ï¼Œä¸åƒç›´æ¥è¿ç®—ç¬¦è¿™ç§ä¼šäº§ç”Ÿå¾ˆå¤šä¸´æ—¶çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å†…éƒ¨çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œæœ‰å¾ˆå¤šé¢å¤–çš„åˆ¤æ–­ï¼Œè¿˜ç”¨åˆ°äº† <code>interface</code>ï¼Œæ‰€ä»¥æ€§èƒ½ä¹Ÿä¸æ˜¯å¾ˆå¥½</p>
<h4 id="3-strings-Join"><a href="#3-strings-Join" class="headerlink" title="3. strings.Join()"></a>3. strings.Join()</h4><pre><code class="golang">func BenchmarkAddStringWithJoin(b *testing.B) {
    hello := &quot;hello&quot;
    world := &quot;world&quot;
    for i := 0; i &lt; b.N; i++ {
        _ = strings.Join([]string{hello, world}, &quot;,&quot;)
    }
}
</code></pre>
<p>joinä¼šå…ˆæ ¹æ®å­—ç¬¦ä¸²æ•°ç»„çš„å†…å®¹ï¼Œè®¡ç®—å‡ºä¸€ä¸ªæ‹¼æ¥ä¹‹åçš„é•¿åº¦ï¼Œç„¶åç”³è¯·å¯¹åº”å¤§å°çš„å†…å­˜ï¼Œä¸€ä¸ªä¸€ä¸ªå­—ç¬¦ä¸²å¡«å…¥ï¼Œåœ¨å·²æœ‰ä¸€ä¸ªæ•°ç»„çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æ•ˆç‡ä¼šå¾ˆé«˜ï¼Œä½†æ˜¯æœ¬æ¥æ²¡æœ‰ï¼Œå»æ„é€ è¿™ä¸ªæ•°æ®çš„ä»£ä»·ä¹Ÿä¸å°</p>
<h4 id="4-buffer-WriteString"><a href="#4-buffer-WriteString" class="headerlink" title="4. buffer.WriteString()"></a>4. buffer.WriteString()</h4><pre><code class="golang">func BenchmarkAddStringWithBuffer(b *testing.B) {
    hello := &quot;hello&quot;
    world := &quot;world&quot;
    for i := 0; i &lt; 1000; i++ {
        var buffer bytes.Buffer
        buffer.WriteString(hello)
        buffer.WriteString(&quot;,&quot;)
        buffer.WriteString(world)
        _ = buffer.String()
    }
}
</code></pre>
<p>è¿™ä¸ªæ¯”è¾ƒç†æƒ³ï¼Œå¯ä»¥å½“æˆå¯å˜å­—ç¬¦ä½¿ç”¨ï¼Œå¯¹å†…å­˜çš„å¢é•¿ä¹Ÿæœ‰ä¼˜åŒ–ï¼Œå¦‚æœèƒ½é¢„ä¼°å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¿˜å¯ä»¥ç”¨ <code>buffer.Grow()</code> æ¥å£æ¥è®¾ç½® capacity</p>
<h3 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h3><pre><code>BenchmarkAddStringWithOperator-8            50000000             30.3 ns/op
BenchmarkAddStringWithSprintf-8             5000000              261  ns/op
BenchmarkAddStringWithJoin-8                30000000             58.7 ns/op
BenchmarkAddStringWithBuffer-8              2000000000           0.00 ns/op
</code></pre><p>è¿™ä¸ªæ˜¯åœ¨æˆ‘çš„è‡ªå·± Mac ä¸Šé¢è·‘çš„ç»“æœï¼Œgo ç‰ˆæœ¬ <code>go version go1.8 darwin/amd64</code>ï¼Œè¿™ä¸ªç»“æœä»…ä¾›å‚è€ƒï¼Œè¿˜æ˜¯è¦ä»¥å®é™…ç”Ÿäº§ç¯å¢ƒçš„å€¼ä¸ºå‡†ï¼Œä»£ç åœ¨ï¼š<a href="https://github.com/hatlonely/hellogolang/blob/master/internal/buildin/string_test.go" target="_blank" rel="noopener">https://github.com/hatlonely/hellogolang/blob/master/internal/buildin/string_test.go</a></p>
<h3 id="ä¸»è¦ç»“è®º"><a href="#ä¸»è¦ç»“è®º" class="headerlink" title="ä¸»è¦ç»“è®º"></a>ä¸»è¦ç»“è®º</h3><ol>
<li>åœ¨å·²æœ‰å­—ç¬¦ä¸²æ•°ç»„çš„åœºåˆï¼Œä½¿ç”¨ <code>strings.Join()</code> èƒ½æœ‰æ¯”è¾ƒå¥½çš„æ€§èƒ½</li>
<li>åœ¨ä¸€äº›æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœºåˆï¼Œå°½é‡ä½¿ç”¨ <code>buffer.WriteString()</code> ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½</li>
<li>æ€§èƒ½è¦æ±‚ä¸å¤ªé«˜çš„åœºåˆï¼Œç›´æ¥ä½¿ç”¨è¿ç®—ç¬¦ï¼Œä»£ç æ›´ç®€çŸ­æ¸…æ™°ï¼Œèƒ½è·å¾—æ¯”è¾ƒå¥½çš„å¯è¯»æ€§</li>
<li>å¦‚æœéœ€è¦æ‹¼æ¥çš„ä¸ä»…ä»…æ˜¯å­—ç¬¦ä¸²ï¼Œè¿˜æœ‰æ•°å­—ä¹‹ç±»çš„å…¶ä»–éœ€æ±‚çš„è¯ï¼Œå¯ä»¥è€ƒè™‘ <code>fmt.Sprintf</code></li>
</ol>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p>goè¯­è¨€å­—ç¬¦ä¸²æ‹¼æ¥æ€§èƒ½åˆ†æ: <a href="http://herman.asia/efficient-string-concatenation-in-go" target="_blank" rel="noopener">http://herman.asia/efficient-string-concatenation-in-go</a></p>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> string </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç¬¬ä¸€æ¬¡å†™JD]]></title>
      <url>/2018/01/22/%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%86%99JD/</url>
      <content type="html"><![CDATA[<p>æœ‰ä¸ªåŒå­¦ï¼ˆåŒäº‹+åŒå­¦+å®¤å‹+åŸºå‹ï¼‰è¦ç¦»èŒäº†ï¼ˆç¦»èŒçš„åŸå› ï¼Œå› ä¸ºçˆ±æƒ…ï¼Œè®©æˆ‘ä»¬ä¸€èµ·ç¥ç¦ä»–ä»¬å§ï¼‰ï¼Œç¼ºä¸€ä¸ªäººï¼Œè€å¤§è¯´ï¼Œä½ è¦æ‰¾ä¸ªä»€ä¹ˆæ ·çš„äººï¼Œä½ è‡ªå·±æ¥å†™JDå§ã€‚</p>
<p>JDï¼ˆjob descriptionï¼‰ç¿»è¯‘è¿‡æ¥å·¥ä½œå²—ä½æè¿°ï¼Œå…ˆæ¥çœ‹ä¸‹æˆ‘å†™çš„JDå§ã€‚</p>
<blockquote>
<p><strong>èŒä½è¯±æƒ‘</strong></p>
<blockquote>
<p>åŒå€äºBATçš„æˆé•¿é€Ÿåº¦</p>
</blockquote>
<p><strong>èŒä½èŒè´£</strong></p>
<blockquote>
<ol>
<li>åç«¯å·¥ç¨‹æ¶æ„çš„è®¾è®¡ä¸å®ç°</li>
</ol>
</blockquote>
<p><strong>èŒä½è¦æ±‚</strong></p>
<blockquote>
<ol>
<li>æ•¬ç•æŠ€æœ¯ï¼Œè¿½æ±‚å“è¶Š</li>
<li>ç²¾é€šæ•°æ®ç»“æ„ä¸ç®—æ³•</li>
<li>è‡³å°‘å¯¹ä¸€é—¨è¯­è¨€æœ‰è¾ƒæ·±å…¥çš„ç ”ç©¶ï¼Œè‡³å°‘å¯¹ä¸€é¡¹æŠ€æœ¯æœ‰è‡ªå·±çš„ç†è§£</li>
<li>è‰¯å¥½çš„å­¦ä¹ èƒ½åŠ›ï¼Œè‰¯å¥½çš„æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›</li>
<li>çˆ±æŠ€æœ¯ï¼Œçˆ±æŠ˜è…¾ï¼Œæœ‰ä»£ç æ´ç™–ã€åšå®¢ã€githubè€…ä¼˜å…ˆ</li>
<li>ä¸æ¥å—éæœ¬äººåˆ¶ä½œçš„ç®€å†</li>
</ol>
</blockquote>
<p><strong>å·¥ä½œåœ°ç‚¹</strong></p>
<blockquote>
<p>åŒ—äº¬-æœ›äº¬-é‡‘è¾‰å¤§å¦</p>
</blockquote>
</blockquote>
<p>èŒä½è¯±æƒ‘ï¼Œæˆ‘çœ‹åˆ°æ‹‰å‹¾ç½‘ä¸Šå¥½å¤šå†™çš„éƒ½æ˜¯ï¼Œä»€ä¹ˆåŠå¹´è°ƒè–ªï¼Œå­£åº¦å¥–é‡‘ï¼Œå…¬å¸ç¦åˆ©å¥½å•Šä¹‹ç±»çš„ï¼Œå¥½åƒç°åœ¨æ‰€æœ‰äº’è”ç½‘å…¬å¸éƒ½è¿™æ ·è¯´ï¼Œä½†æ˜¯åšå¾—æ€ä¹ˆæ ·å¯èƒ½å°±å·®è·å¾ˆå¤§äº†ï¼Œè¿™äº›ä¸œè¥¿éƒ½çš„å¯è§£é‡Šæ€§å¾ˆå¼ºï¼Œæ¯”å¦‚å¥–é‡‘ï¼Œäººå®¶ç‹è€…è£è€€å‘å‡ åä¸ªæœˆçš„å¹´ç»ˆå¥–ï¼Œä½ å‘ä¸€ä¸ªæœˆè¿˜å¾—ä¹˜ä¸ªç³»æ•°ï¼›äººå®¶ä¸€å¹´è°ƒäº†ä¸‰æ¬¡è–ªæ°´ï¼Œä½ ä¸€å¹´è°ƒäº†ä¸€æ¬¡ï¼Œæ¶¨äº†5%ï¼›å…¬å¸è¯´å…è´¹çš„ä¸‰é¤ï¼Œå¦‚æœä½ æƒ³å˜ç˜¦çš„è¯ï¼Œç¡®å®è¿˜æŒºé€‚åˆä½ çš„ã€‚æ‰€ä»¥è¿™äº›ä¸œè¥¿çœŸçš„æœ‰ä»€ä¹ˆè¯±æƒ‘åŠ›å—ï¼Ÿå…¶å®æœ€å®é™…çš„è¿˜æ˜¯æœ€å offer é‡Œé¢é‡Œé¢çš„å®é™…è–ªèµ„ï¼Œä½ è¦ç›´æ¥å‘Šè¯‰æˆ‘ï¼Œè¿™ä¸ªèŒä½æœˆè–ª 50Kï¼Œé‚£ç¡®å®ä¼šæœ‰ä¸€äº›è¯±æƒ‘åŠ›ã€‚</p>
<p>é‚£é™¤äº†è‡ªå·±çš„åˆ©ç›Šï¼Œè¿˜æœ‰ä»€ä¹ˆè¯±æƒ‘å‘¢ï¼Ÿæˆ‘è§‰å¾—è¿˜æœ‰ä¸¤ç‚¹ï¼Œä¸ªäººçš„æˆé•¿ä»¥åŠå…¬å¸çš„æ„¿æ™¯ã€‚æˆ‘è‡ªå·±å°±æ˜¯ä¸€ä¸ªå¾ˆå…³æ³¨è‡ªèº«æˆé•¿çš„äººï¼Œæ¯•ä¸šä¹‹åå»ç™¾åº¦ï¼ŒåŒ…æ‹¬åæ¥ç¦»å¼€ï¼Œæ¥åˆ°mobvistaï¼Œæ¯æ¬¡é€‰æ‹©éƒ½æŠŠä¸ªäººæˆé•¿æ”¾åˆ°é¦–è¦çš„ä½ç½®ï¼Œå› ä¸ºæˆ‘çŸ¥é“ï¼Œäººç”Ÿå¾ˆçŸ­ï¼Œè€ŒæŠ€æœ¯è¿™æ¡è·¯å¾ˆé•¿ï¼Œå¹¶æ²¡æœ‰é‚£ä¹ˆå¤šæ—¶é—´èƒ½è®©æˆ‘å»æŒ¥éœï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ é‡åˆ°çš„äººå…¶å®å¾ˆå…³é”®ï¼Œä¿—è¯è¯´ã€å¬å›ä¸€å¸­è¯ï¼Œèƒœè¯»åå¹´ä¹¦ã€ï¼Œæœ‰äº›ä¸œè¥¿ï¼Œä½ è¦é è‡ªå·±å»æ‘¸ç´¢ï¼ŒçœŸçš„ä¼šèµ°å¾ˆå¤šå¼¯è·¯ï¼Œç”šè‡³å®Œå…¨å°±èµ°åäº†ï¼Œæ„Ÿè°¢æˆ‘é‡åˆ°çš„æ¯ä¸ªäººï¼Œæ„Ÿè°¢ä½ ä»¬å¸¦ç»™æˆ‘çš„æˆé•¿ã€‚è€Œå…¬å¸æ„¿æ™¯ï¼Œå¯èƒ½å¬èµ·æ¥å¾ˆè™šï¼Œä½†æ˜¯å®é™…ä¸Šå¯¹æŸäº›äººæ¥è¯´ï¼Œç‰¹åˆ«æ˜¯ä¸ç”˜äºå¹³åº¸çš„äººæ¥è¯´ï¼Œæ˜¯éå¸¸å¸å¼•äººçš„ï¼Œæœ€è¿‘æˆ‘æ—¶å¸¸åœ¨æƒ³ä¸€ä¸ªè¯ï¼Œã€ç¤¾ä¼šè´£ä»»æ„Ÿã€ï¼Œè¿‘äºŒä¸‰åå¹´ï¼Œäº’è”ç½‘çš„é£é€Ÿå‘å±•ï¼Œå½»åº•åœ°æ”¹å˜äº†äººä»¬çš„ç”Ÿæ´»ï¼Œè€Œæˆ‘ç°åœ¨ï¼Œæ·±å¤„åœ¨è¿™æ ·ä¸€ä¸ªæ—¶ä»£çš„æ½®æµä¹‹ä¸­ï¼Œåƒæˆ‘è¿™æ ·ä¸€ä¸ªäººï¼Œåˆ°åº•èƒ½ä¸ºè¿™ä¸ªç¤¾ä¼šåˆ›é€ æ€æ ·çš„ä»·å€¼ï¼Ÿ</p>
<p>æ‰€ä»¥æˆ‘å†™ä¸‹äº†åŒå€äºBATçš„æˆé•¿é€Ÿåº¦ï¼Œå¾ˆè™šï¼Œè°ä¹Ÿä¸çŸ¥é“åŒå€æ˜¯å¤šå¿«ï¼Œç”šè‡³ä¸çŸ¥é“æœ‰æ²¡æœ‰æ›´å¿«ï¼Œä½†æ˜¯æˆ‘åªæ˜¯æƒ³è®©ä½ çŸ¥é“ï¼Œæˆ‘åœ¨å…³æ³¨è¿™ä»¶äº‹æƒ…ï¼Œæˆ‘ä¼šå°½æˆ‘æ‰€èƒ½åœ°å»åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œè¿™æ˜¯æˆ‘çš„è´£ä»»ï¼Œä¹Ÿæ˜¯æˆ‘å¯¹ä½ çš„æ‰¿è¯ºã€‚</p>
<p>èŒä½èŒè´£ï¼Œæˆ‘çœ‹å¾ˆå¤šéƒ½ä¼šå†™ç°åœ¨å…·ä½“åšçš„äº‹æƒ…ï¼Œè¿˜ä¼šå†™ä¸€äº›ä»€ä¹ˆé—®é¢˜æ’æŸ¥å•Šï¼Œæ€§èƒ½ä¼˜åŒ–ä¹‹ç±»çš„äº‹æƒ…ï¼Œè¿™äº›äº‹æƒ…ï¼Œæˆ‘ä¸å†™éš¾é“ä½ ä¸çŸ¥é“å—ï¼Œè€Œæˆ‘å†™äº†ï¼Œéš¾é“å°±åªæœ‰è¿™äº›å—ï¼Ÿæ‰€ä»¥æˆ‘æŠŠè¿™äº›å†…å®¹éƒ½çœç•¥äº†ï¼Œåªæœ‰ä¸€æ¡ï¼Œåç«¯æ¶æ„çš„è®¾è®¡ä¸å®ç°ï¼Œä½ è¦çŸ¥é“ï¼Œä½ æ¥åšçš„æ˜¯åç«¯ï¼Œä¸æ˜¯å‰ç«¯ï¼Œä¹Ÿä¸æ˜¯iosæˆ–è€…Androidï¼Œå¦å¤–ä½ è¦åšçš„äº‹æƒ…ï¼Œä¸ä»…ä»…åŒ…å«ç³»ç»Ÿçš„å®ç°ï¼ŒåŒæ ·åŒ…å«ç³»ç»Ÿçš„è®¾è®¡ã€‚</p>
<p>èŒä½è¦æ±‚ï¼Œæˆ‘é‡ç‚¹å†™äº†ä¸€ä¸‹ï¼Œä¸»è¦ä¸ºäº†èŠ‚çº¦ä¸€äº›æ—¶é—´ï¼Œè¦çŸ¥é“ï¼Œé¢è¯•å…¶å®ä¹Ÿæ˜¯ä¸€ä»¶è€—æ—¶ä¸”æ— è¶£çš„äº‹æƒ…ï¼Œéè¯šå‹¿æ‰°ï¼Œè°¢è°¢ï¼</p>
<p>ç¬¬ä¸€ç‚¹ï¼Œã€æ•¬ç•æŠ€æœ¯ï¼Œè¿½æ±‚å“è¶Šã€ï¼Œè¿™ä¸ªå…¶å®æ˜¯å…¬å¸æŠ€æœ¯éƒ¨é—¨ï¼Œç»å†ä¸€äº›æƒ¨ç—›æ•™è®­ä¹‹åå–Šå‡ºæ¥çš„å£å·ï¼Œæˆ‘å¾ˆå¼€å¿ƒå…¬å¸èƒ½æœ‰è¿™æ ·è½¬å˜ï¼Œç‰¹åˆ«æ˜¯æœ€è¿‘è¶…å“¥ï¼ˆè”¡è¶…ï¼Œå‰äºšé©¬é€Šä¸­å›½ç ”å‘ä¸­å¿ƒé¦–å¸­æ¶æ„å¸ˆï¼‰çš„åŠ å…¥ï¼Œèƒ½æ˜æ˜¾çš„æ„Ÿè§‰åˆ°æŠ€æœ¯æ–‡åŒ–çš„ä¸€äº›å˜åŒ–ã€‚</p>
<p>æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œé¢è¯•è¿‡å¾ˆå¤šä¸ƒå…«å¹´å·¥ä½œç»éªŒçš„äººï¼Œå¾ˆå°‘äººæœ‰èƒ½è®©æˆ‘æ»¡æ„çš„ï¼ˆå…¶å®ç¦»æ»¡æ„å·®å¾ˆè¿œï¼Œç®€ç›´éš¾ä»¥ç›¸ä¿¡ï¼‰ï¼Œåè€Œæ˜¯ä¸€äº›å¹´è½»äº›çš„æœ‹å‹ï¼Œèƒ½åšå¾—æ¯”è¾ƒå¥½ï¼Œå¾ˆå¤šäººåé©³æˆ‘è¯´ï¼Œå·¥ä½œæ—¶é—´é•¿äº†ï¼Œè¿™äº›ä¸œè¥¿ç»å¸¸ä¸ç”¨ï¼Œå°±å¿˜äº†ï¼Œä¹Ÿå¯ä»¥ç†è§£ï¼Œè¦æ±‚ä¸è¦å¤ªé«˜ï¼Œå·®ä¸å¤šè¡Œäº†ï¼Œç¡®å®æˆ‘ä¹Ÿåšè¿‡ä¸€äº›è®©æ­¥ï¼Œæ”¾ä½ä¸€äº›è¦æ±‚ã€‚ä½†æ˜¯ä¸å¾—ä¸è¯´è¿™æ˜¯ä¸€ç§æ‚²å“€ï¼Œæ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œå¯ä»¥è¯´æ˜¯æ•´ä¸ªè®¡ç®—æœºè¡Œä¸šçš„åŸºç¡€ï¼Œä»»ä½•çš„ç¨‹åºéƒ½æ˜¯æ„å»ºåœ¨è¿™æ ·çš„åŸºç¡€ä¹‹ä¸Šï¼Œä½ å‘Šè¯‰æˆ‘è¯´ï¼Œéšç€å·¥ä½œç»éªŒçš„å¢é•¿ï¼Œè¿™äº›åŸºç¡€ä½ å¿˜è®°äº†ï¼Œé‚£æˆ‘ä¼šæ€€ç–‘æˆ‘ä»¬çœŸçš„æ˜¯åœ¨åŒä¸€ä¸ªè¡Œä¸šå—ï¼Ÿäº‹å®ä¸Šï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰åŸºç¡€ï¼Œé‚£ä½ çš„å¾ˆå¤šå®ç°å°±ä¼šå˜å¾—å¾ˆéº»çƒ¦ï¼Œå¾ˆéš¾ç†è§£ï¼Œè€—æ—¶å¾ˆé•¿ï¼Œè€Œä¸”é—®é¢˜å¾ˆå¤šã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå›½å¤–çš„å…¬å¸å°±å¾ˆçœ‹é‡è¿™ä¸ªï¼Œå¥½å‡ è½®çš„é¢è¯•å…¨éƒ½æ˜¯ç®—æ³•ï¼Œä¸æŠŠ <a href="https://leetcode.com/" target="_blank" rel="noopener"><code>leetcode</code></a> åˆ·ä¸ªä¸¤ä¸‰éï¼Œéƒ½ä¸å¥½æ„æ€å»æ‰¾å·¥ä½œã€‚ä¸å…¶è¯´å·¥ä½œæ—¶é—´é•¿äº†å¿˜äº†ï¼Œä¸å¦‚è¯´æ˜¯è¢«æƒ¯åäº†ï¼Œå› ä¸ºå›½å†…è¿™ç§æµ®èºçš„æ°›å›´ï¼Œåæ­£å¹²è¿™è¡Œï¼Œå°±è‚¯å®šèƒ½æ‰¾åˆ°å·¥ä½œï¼Œæ­¤å¤„ä¸ç•™çˆ·è‡ªæœ‰ç•™çˆ·å¤„ï¼Œä½•å¿…èŠ±é‚£äº›æ—¶é—´å»æŠ˜è…¾é‚£äº›åŸºç¡€çš„ä¸œè¥¿ï¼Œæé’±æ‰æœ€é‡è¦ï¼Œè¿‡ä¸ªä¸€ä¸¤å¹´ï¼Œå¹²ä¸ä¸‹å»äº†ï¼Œå†æ¢ä¸ªå…¬å¸ï¼Œè¿˜èƒ½æ¶¨æ¯”é’±ï¼Œæ•´ä¸ªè¡Œä¸šçš„æ•´ä½“äººæ‰ç´ è´¨ï¼Œå°±æ˜¯è¿™æ ·è¢«æ‹‰ä½äº†â€¦â€¦æ‰€ä»¥ï¼Œåˆ«å’Œæˆ‘è¯´ä½ å†å“ªå“ªå“ªå¹²è¿‡å¤šå°‘å¹´ï¼Œç®¡è¿‡å¤šå°‘ä¸ªäººï¼Œåœ¨æˆ‘è¿™ä¸å¥½ä½¿ï¼Œéº»çƒ¦è®©æˆ‘çœ‹åˆ°ï¼Œç°åœ¨æ­¤åˆ»ä½ æœ‰èƒ½åŠ›è§£å†³è¿™ä¸ªç®—æ³•é—®é¢˜ã€‚</p>
<p>ç¬¬ä¸‰ç‚¹ï¼Œè‡³å°‘å¯¹ä¸€é—¨è¯­è¨€æœ‰è¾ƒæ·±å…¥çš„ç ”ç©¶ï¼Œè‡³å°‘å¯¹ä¸€é¡¹æŠ€æœ¯æœ‰è‡ªå·±çš„ç†è§£ã€‚è¿™ä¸ªå…¶å®æŒºéš¾çš„ï¼Œæˆ‘çœ‹å¾ˆå¤šç®€å†ä¸Šéƒ½å†™ç€ï¼Œæœ‰ä¸ƒå…«å¹´çš„ c++ ä½¿ç”¨ç»éªŒï¼Œç„¶åç«Ÿç„¶ä¸çŸ¥é“æ ‡å‡†åº“é‡Œé¢çš„æ’åºæ€ä¹ˆç”¨ï¼Œä¸çŸ¥é“ <code>vector</code> å¯ä»¥è®¾ç½® <code>capcity</code>ï¼Œä½ â€¦â€¦è®©æˆ‘æƒ…ä½•ä»¥å ªâ€¦â€¦ï¼Œæœ€è¿‘åœ¨ç”¨ golangï¼Œè™½ç„¶ç”¨çš„æ—¶é—´ä¸é•¿ï¼Œä½†è‡ªä»¥ä¸ºç”¨å¾—è¿˜æŒº6ï¼Œä½†æ˜¯è¶…å“¥çš„åŠ å…¥ï¼Œè®©æˆ‘å‘ç°è‡ªå·±å¯¹ golang å…¶å®ä¸€æ— æ‰€çŸ¥ï¼Œå•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œpprof æ€§èƒ½åˆ†æï¼Œå †æ ˆå†…å­˜åˆ†é…æœºåˆ¶ï¼Œé”çš„æ€§èƒ½å¼€é”€ï¼Œgc ä»¥åŠåç¨‹è°ƒåº¦å¼€é”€ç­‰ç­‰ï¼Œè®©æˆ‘å¼€å§‹åæ€è‡ªå·±åˆ°åº•å­¦äº†äº›ä»€ä¹ˆâ€¦â€¦è¿™é‡Œæˆ‘å¯¹è¯­è¨€å’ŒæŠ€æœ¯çš„å®šä¹‰éƒ½æ¯”è¾ƒå®½æ³›ï¼Œæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šä½•ç§è¯­è¨€ï¼Œå“ªç§æŠ€æœ¯ï¼Œå› ä¸ºæˆ‘è§‰å¾—æŠ€æœ¯è¿™ä¸œè¥¿çš„æ€æƒ³æ˜¯ç›¸é€šçš„ï¼Œä½ èƒ½æŒæ¡å¥½ä¸€ç§ï¼Œå°±èƒ½å¾ˆå¿«æŒæ¡åˆ«çš„ï¼Œä½†æ˜¯å‰ææ˜¯ä½ å¾—æŒæ¡è‡³å°‘ä¸€ç§ï¼Œæˆ‘çœ‹é‡çš„æ˜¯ä½ çš„å­¦ä¹ èƒ½åŠ›ï¼Œçœ‹è¿‡æŸä¸ªç‰›äººè¯´è¿‡ï¼Œã€æˆ‘ä¸æ˜¯å•¥éƒ½æ‡‚ï¼Œæˆ‘åªæ˜¯å­¦å¾—å¿«ã€ï¼Œå¦‚æœä½ ä¸€ç§éƒ½ä¸ç²¾é€šï¼Œå¾ˆéš¾è®©æˆ‘ç›¸ä¿¡ä½ æœ‰å¾ˆå¼ºçš„å­¦ä¹ èƒ½åŠ›ã€‚</p>
<p>ç¬¬å››ç‚¹ï¼Œæˆ‘åˆå¼ºè°ƒäº†ä¸€ä¸‹å­¦ä¹ èƒ½åŠ›ï¼Œå› ä¸ºè¿™ä¸ªèƒ½åŠ›çœŸçš„å¾ˆé‡è¦ï¼Œè¿™ä¸ªè¡Œä¸šå‘å±•é‚£ä¹ˆè¿…é€Ÿï¼Œæ²¡æœ‰å¾ˆå¼ºçš„å­¦ä¹ èƒ½åŠ›ï¼Œä¸€å®šä¼šæˆä¸ºå›¢é˜Ÿçš„è´Ÿæ‹…ã€‚å¦å¤–æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›ï¼Œè¿™ä¸ªè¢«æˆ‘ä¹‹å‰è¢«æˆ‘å¿½è§†çš„èƒ½åŠ›ï¼Œåœ¨æœ€è¿‘çš„ä¸€å¹´é‡Œï¼Œè®©æˆ‘æœ‰éå¸¸æ·±åˆ‡çš„ä½“ä¼šã€‚è¿™ä¸ªèƒ½åŠ›åŒ…å«ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯å¦‚ä½•å¿«é€Ÿå‡†ç¡®ç†è§£åˆ«äººç»™ä½ çš„ä¿¡æ¯ï¼Œè¿˜ä¸€ä¸ªæ˜¯å¦‚ä½•å‡†ç¡®åœ°ä¼ è¾¾ä½ æƒ³è¦è¡¨è¾¾çš„ä¿¡æ¯ã€‚æ¯•ç«Ÿè¿™æ˜¯ä¸€ä¸ªé«˜åº¦ç¤¾ä¼šåŒ–çš„è¡Œä¸šï¼Œä»»ä½•äº‹æƒ…éƒ½æ˜¯äººä¸äººåˆä½œçš„ç»“æœï¼Œä¸­é—´ä»»ä½•ä¸€ç‚¹ç†è§£ä¸Šé¢çš„åå·®éƒ½æœ‰å¯èƒ½é€ æˆéå¸¸ä¸¥é‡çš„åæœã€‚</p>
<p>ç¬¬äº”ç‚¹ï¼Œå¯ä»¥è¯´æ˜¯æˆ‘ä¸ªäººçš„ä¸€ä¸ªä»·å€¼è§‚å§ï¼Œæˆ‘ä»å¿ƒé‡Œæ¬£èµè¿™æ ·çš„äººï¼Œå¸Œæœ›ä¸è¿™æ ·çš„äººç›¸å¤„ï¼Œå’Œä»–ä»¬ä¸€èµ·å…±äº‹ã€‚æœ€è¿‘è®¤è¯†äº†ä¸€äº›æ–°æœ‹å‹ï¼Œéƒ½è¿˜æ˜¯å­¦ç”Ÿï¼Œå·²ç»èƒ½åœ¨ github ä¸Šå†™å‡º star 2k+çš„é¡¹ç›®äº†ï¼Œåœ¨çœ‹çœ‹è‡ªå·±ï¼Œæ„Ÿè§‰å¾ˆæ˜¯æƒ­æ„§â€¦â€¦</p>
<p>ç¬¬å…­ç‚¹ï¼Œç‰¹åˆ«æ³¨æ˜äº†ä¸€ä¸‹ï¼Œä¸æ¥å—éæœ¬äººåˆ¶ä½œçš„ç®€å†ï¼Œç°åœ¨è¿™ç§æ‰¾å·¥ä½œçš„ App åšå¾—éƒ½å¾ˆæ–¹ä¾¿ï¼Œä½ åœ¨ä¸Šé¢éšä¾¿å¡«å†™ä¸œè¥¿ï¼Œç„¶åå°±ä¼šæœ‰çŒå¤´æ‰¾åˆ°ä½ ï¼Œå¸®ä½ æ‰¾å·¥ä½œï¼Œç„¶åè¿˜èƒ½è‡ªåŠ¨å¸®ä½ ç”Ÿæˆç®€å†ï¼Œæˆ‘åªæƒ³è¯´è¿™ç§ç®€å†å®åœ¨æ˜¯å¤ªlowã€‚ç®€å†å…¶å®å¯ä»¥çœ‹å‡ºå¾ˆå¤šä¸œè¥¿ï¼Œæ’ç‰ˆç»„ç»‡å…¶å®å¯ä»¥çœ‹å‡ºæ¥ä½ ä¸ªäººçš„ä¸€äº›æ€§æ ¼ï¼Œå¯¹é¡¹ç›®çš„æè¿°ï¼Œä¹Ÿèƒ½çœ‹å‡ºæ¥ä½ çš„ä¸€äº›è¡¨è¾¾èƒ½åŠ›ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šç»†èŠ‚å•¦ï¼Œè¿™ç§è‡ªåŠ¨ç”Ÿæˆçš„ä¸œè¥¿å®Œå…¨æ²¡æœ‰å¤ªå¤šçš„å‚è€ƒä»·å€¼ã€‚å¦‚æœä½ è§‰å¾—è¿™ä¸ªä¸œè¥¿å¾ˆæ–¹ä¾¿ï¼Œèƒ½å¸®ä½ èŠ‚çº¦æ—¶é—´çš„è¯ï¼Œé‚£æˆ‘å¤šå°‘ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œä½ æ˜¯ä¸€ä¸ªå¯¹è‡ªå·±ä¸è´Ÿè´£ä»»ï¼Œå¾—è¿‡ä¸”è¿‡çš„äººï¼Œå¯¹è‡ªå·±å°šä¸”å¦‚æ­¤ï¼Œå·¥ä½œäº¦ç„¶ã€‚æ‰€ä»¥ï¼Œå¯¹è‡ªå·±å¥½ä¸€ç‚¹ï¼Œåšä¸ªç²¾è‡´çš„ç®€å†å§ï¼</p>
<p>æœ€åç¥å¤§å®¶éƒ½èƒ½æ‰¾åˆ°è‡ªå·±ç†æƒ³çš„å·¥ä½œï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥æ¥æŠ•å¥”æˆ‘ğŸ˜</p>
]]></content>
      
        
        <tags>
            
            <tag> ç¨‹åºäººç”Ÿ </tag>
            
            <tag> æ‹›è˜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¸vimçš„ä¸€æ®µå¾€äº‹]]></title>
      <url>/2018/01/21/%E4%B8%8Evim%E7%9A%84%E4%B8%80%E6%AE%B5%E5%BE%80%E4%BA%8B/</url>
      <content type="html"><![CDATA[<p>è¿™å°±è¦ä»å¤§å­¦é‡Œé¢å­¦cè¯­è¨€è¯´èµ·äº†ï¼Œé‚£ä¸ªæ—¶å€™æˆ‘ä»¬è¿˜åœ¨ç”¨å¤è€çš„ visual c++ 6.0ï¼ˆæ»¡æ»¡çš„å›å¿†æœ‰æœ¨æœ‰â€¦â€¦ï¼‰ï¼Œä¸è¿‡æˆ‘å”¯ä¸€çš„å°è±¡åªå‰©ä¸‹äº†ï¼Œå—¯ï¼Œè¿™ä¸ªä¸œè¥¿çœŸçš„å¾ˆä¸‘å¾ˆéš¾ç”¨ï¼Œä¸è¿‡è¿˜å¥½ï¼Œä¸ä¹…å°±æœ‰äº† visual studio 2010ï¼Œå¥½çœ‹æ˜¯å¥½çœ‹äº†ï¼Œä½†æ˜¯å¥½åƒå¡å¾—ä¸è¡Œï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ windows çš„é”…å‘¢ï¼Œè¿˜æ˜¯ vs çš„é”…å‘¢ï¼Œè¿˜æ˜¯æˆ‘ç”µè„‘é…ç½®å¤ªä½ï¼Œanywayï¼Œè¿™äº›éƒ½ä¸å¤ªé‡è¦ï¼Œåæ­£é‚£ä¸ªæ—¶å€™å¯¹ IDE æ²¡æœ‰ä»€ä¹ˆå¥½æ„Ÿï¼Œå†åŠ ä¸Šè‹±è¯­ä¹Ÿä¸å¤ªå¥½ï¼Œé‚£äº›è½¯ä»¶åˆéƒ½æ˜¯è‹±æ–‡ï¼Œå°±æ›´ä¸æƒ³ç”¨äº†â€¦â€¦</p>
<p>åæ¥å‘¢ï¼Œè¿›äº†ä¸€ä¸ªå®éªŒå®¤ï¼Œå‘ç°å¤§å®¶éƒ½åœ¨ä¸€ä¸ªé»‘ç™½çš„ç»ˆç«¯ä¸‹é¢å†™ä»£ç ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½é€šè¿‡é”®ç›˜å®Œæˆï¼Œå®Œå…¨ä¸ç”¨é¼ æ ‡ï¼Œå½“æ—¶æˆ‘éƒ½æƒŠå‘†äº†ï¼Œè¿™å’Œç”µè§†é‡Œé¢æ¼”çš„é»‘å®¢ä¸æ˜¯ä¸€æ¨¡ä¸€æ ·ä¹ˆï¼Œç¬é—´è§‰å¾—é‚£äº› IDE ç®€ç›´ low çˆ†äº†ï¼ŒçœŸæ­£å‰å®³çš„é»‘å®¢æ˜¯ä¸ç”¨ IDE çš„ï¼ˆå½“æ—¶å¤©çœŸçš„æƒ³æ³•â€¦â€¦ï¼‰ã€‚Vim â€”â€” Text editor of the Godsï¼Œæ­£æ˜¯æˆ‘æƒ³è¦çš„ã€‚</p>
<p>äºæ˜¯å¼€å§‹è¯»vimçš„ä¹¦ï¼ŒæŸ¥ç›¸å…³çš„èµ„æ–™ï¼Œè®°å„ç§å¿«æ·é”®ï¼Œè£…å„ç§æ’ä»¶ï¼ŒæŠ˜è…¾æˆ‘çš„ vimrcã€‚ä¸ºäº†ç”¨ä¸Šæ›´çº¯ç²¹çš„ vimï¼Œæˆ‘è£…äº†åŒç³»ç»Ÿï¼›ä¸ºæˆ‘çš„ chrome è£…äº† vim æ’ä»¶ï¼›åœ¨ win ç³»ç»Ÿä¸‹ç”¨ vim æ•´äº†ä¸€å¥—å¼€å‘ç¯å¢ƒã€‚è¿œç¦»é¼ æ ‡ï¼æ‹’ç» IDEï¼å¾ˆå¿«æˆ‘å°±åœ¨ vim çš„ä½¿ç”¨ä¸Šé¢å°æœ‰æˆå°±ã€‚</p>
<p>ç„¶è€Œä¸€ç›´æœ‰ä¸€ä¸ªé—®é¢˜æˆ‘æ²¡æœ‰è§£å†³ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡å’Œå…¶ä»–é—®é¢˜ä¸€æ ·ï¼Œå¾ˆå¿«å°±èƒ½æ‰¾åˆ°ç­”æ¡ˆã€‚è¿™ä¸ªé—®é¢˜å°±æ˜¯ï¼Œæˆ‘æƒ³åšåˆ°åƒ IDE é‚£æ ·çš„æ™ºèƒ½ä»£ç æç¤ºï¼Œä»¥åŠå‡½æ•°çš„è°ƒç”¨ä»¥åŠå£°æ˜çš„è·³è½¬ã€‚æˆ‘æŸ¥äº†å¥½å¤šèµ„æ–™ï¼Œå°è¯•äº†å¾ˆå¤šæ–¹æ¡ˆï¼Œæœ€åå¥½ä¸å®¹æ˜“æ˜¯æœ‰æç¤ºäº†ï¼Œä½†æ˜¯æç¤ºçš„å†…å®¹åªæ˜¯è¿™ä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„å…¶ä»–æ ‡è¯†ç¬¦ï¼Œä¹Ÿæœ‰ç‚¹ç”¨ï¼Œä½†æ˜¯å’Œæˆ‘æƒ³è¦çš„è¿˜å·®å¾ˆè¿œï¼›ç„¶ååˆç»§ç»­å°è¯•ï¼ŒåŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œç»ˆäºæ‰¾åˆ°äº†æ ‡å‡†åº“çš„ä»£ç æç¤ºï¼Œç„¶è€Œåªèƒ½æç¤ºæ ‡å‡†åº“ï¼Œæˆ‘è‡ªå·±å†™çš„ç±»å¹¶æ²¡æœ‰ç”¨ï¼›ç„¶åæˆ‘åˆç»§ç»­å°è¯•ï¼Œç„¶åæ—¶é—´ä¸€å¤©å¤©è¿‡å»ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆè¿›å±•ï¼Œæ¸æ¸åœ°ä¹Ÿå°±æ²¡æœ‰å¤ªå¤§çš„å…´è¶£äº†ï¼Œç°åœ¨è¿™ä¹ˆç”¨ä¹ŸæŒºå¥½ï¼ŒçœŸæ­£çš„é»‘å®¢æ˜¯ä¸ä¾èµ– IDE çš„æç¤ºçš„ã€‚è€Œå‡½æ•°è·³è½¬çš„é‚£ä¸ªé—®é¢˜ä¹Ÿç±»ä¼¼ï¼Œä¸€ç›´ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>åæ¥å¼€å§‹å­¦ java äº†ï¼Œä½œä¸º vim çš„è„‘æ®‹ç²‰ï¼Œè‚¯å®šæ˜¯è¦ç”¨ vim æ¥å†™ java çš„ï¼Œæ²¡æœ‰ä»£ç æç¤ºï¼Œæ²¡æœ‰å‡½æ•°è·³è½¬ï¼Œæ²¡æœ‰ç¼–è¯‘è°ƒè¯•ç¯å¢ƒï¼Œæ— å½¢ä¹‹ä¸­ç»™è‡ªå·±å¢åŠ äº†å¥½å¤šéš¾åº¦ï¼Œä½†æ˜¯è€å¸ˆå¯ä¸ä¼šç­‰æˆ‘æŠŠè¿™äº›éƒ½æ•´æ˜ç™½äº†å†æ•™ï¼Œæ²¡åŠæ³•ï¼Œæœ€ç»ˆè¿˜æ˜¯å¾ˆä¸æƒ…æ„¿åœ°éšäº†å¤§æµï¼Œç”¨äº† eclipseã€‚</p>
<p>åæ¥ç»ˆäºæ¯•ä¸šäº†ï¼Œçœ‹åˆ°å…¬å¸é‡Œå¤§å®¶éƒ½åœ¨ç”¨ vimï¼Œæˆ‘å°±æ”¾å¿ƒäº†ï¼Œè¿™é‡Œè¿™ä¹ˆå¤šå¤§ç‰›ï¼Œå›°æ‰°æˆ‘å¥½å‡ å¹´çš„é—®é¢˜åº”è¯¥èƒ½å¾ˆå¿«å°±è§£å†³äº†å§ã€‚ç„¶è€Œâ€¦â€¦ï¼Œæˆ‘å‘ç°ï¼Œæˆ‘ç«Ÿç„¶æ˜¯è¿™é‡Œé¢ç”¨ vim ç”¨å¾—æœ€ç†Ÿç»ƒâ€¦â€¦ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯è¯¥é«˜å…´å‘¢ï¼Œè¿˜æ˜¯è¯¥å¿§ä¼¤â€¦â€¦</p>
<p>çœåƒä¿­ç”¨çš„å·¥èµ„ç»ˆäºå¤Ÿä¹° Macï¼Œç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯é…ç½®å¥½ vimã€‚ç„¶åæœæ–­æ”¾å¼ƒ windowsï¼Œå¼€å§‹æŠ˜è…¾æ–°çš„ Macã€‚å‘ç° Mac ä¸Šè‡ªå¸¦çš„ xcode åšå¾—è¿˜æŒºå¥½çœ‹çš„ï¼Œå…³é”®æ˜¯è¿˜èƒ½å†™ c++ï¼Œç„¶åå°±è¯•äº†è¯•ï¼Œæ„Ÿè§‰è¿˜æŒºçˆ½ï¼Œå…³é”®æ˜¯æœ‰é”™è¯¯ç›´æ¥å°±èƒ½çœ‹å‡ºæ¥ï¼Œä¸åƒä¹‹å‰ç”¨ vim é‚£æ ·å†™äº†ä¸€å¤§å †ï¼Œå°è¯•ç¼–è¯‘ä¸€ä¸‹ï¼Œè·³å‡ºå‡ åä¸ªé”™è¯¯ï¼›æ™ºèƒ½æç¤ºä¹Ÿå¾ˆå‹å¥½ï¼Œå¥½å¤šä¹‹å‰æ²¡ç”¨è¿‡çš„å‡½æ•°è¢«æç¤ºå‡ºæ¥æ‰çŸ¥é“ï¼ŒåŸæ¥è¿˜æœ‰è¿™ä¹ˆæ–¹ä¾¿çš„å‡½æ•°ï¼Œä¹‹å‰æˆ‘éƒ½ç”¨åˆ«çš„æ–¹å¼è‡ªå·±å®ç°äº†ä¸€ä¸‹â€¦â€¦ï¼›æŒ‰ä½ <code>cmd</code> é”®å°±èƒ½å¾ˆæ–¹ä¾¿åœ°è·³è½¬åˆ°å‡½æ•°å®ç°çš„åœ°æ–¹ï¼Œå†ä¹Ÿä¸ç”¨ä»ä¸€å †æ–‡ä»¶é‡Œé¢å»çŒœï¼Œè¿™ä¸ªå‡½æ•°å¯èƒ½æ˜¯åœ¨å“ªé‡Œå®ç°çš„äº†ã€‚å°åˆ°ç”œå¤´ä¹‹åï¼Œå¼€å§‹å°è¯•æŠŠå…¬å¸çš„é¡¹ç›®å¾€ xcode ä¸Šé¢è¿ï¼Œç»“æœå¼€å‘æ•ˆç‡æœ‰äº†æå¤§çš„æå‡ï¼Œè€Œæ›´å…³é”®çš„æ˜¯å†™ä»£ç å˜æˆäº†ä¸€ä»¶æ„‰å¿«çš„äº‹æƒ…ã€‚</p>
<p>ç°åœ¨ï¼ŒåŸºæœ¬æˆ‘æ‰€æœ‰çš„ä»£ç éƒ½ç”¨ä¸åŒçš„ IDEï¼ˆxcode, goland, ideal, pycharm, sublime text 3, webstormï¼‰å¼€å‘å®Œæˆã€‚è€Œæ›¾ç»é‚£ä¹ˆè¿·æ‹çš„ vimï¼Œæœ‰æ—¶å€™åœ¨æœåŠ¡å™¨ä¸Šå†™ä¸€äº›ä¸´æ—¶çš„è„šæœ¬ï¼Œä¹Ÿè¿˜æ˜¯ä¼šç”¨ä¸€ç”¨çš„ã€‚</p>
<p>è®²çœŸçš„ï¼Œé¼ æ ‡å’Œ IDE éƒ½æ˜¯éå¸¸ä¼Ÿå¤§çš„å‘æ˜ï¼ŒæŠŠäººä»ç¹å¤é‡å¤æ— èŠçš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œè®©äººçš„ç²¾åŠ›é›†ä¸­åœ¨æ›´å…·åˆ›é€ åŠ›çš„åœ°æ–¹ï¼Œæå¤§æé«˜äº†ç”Ÿäº§æ•ˆç‡ï¼Œæ¨åŠ¨äº†æ•´ä¸ªè¡Œä¸šçš„å¿«é€Ÿå‘å±•ã€‚è€Œ vim ä½œä¸ºä¸Šä¸€ä¸ªæ—¶ä»£çš„æ•ˆç‡çš„ä»£è¡¨ï¼Œä¹Ÿæ›¾ç»é‚£ä¹ˆå…‰å½©ç…§äººï¼Œä¹Ÿæ˜¯æ—¶å€™åŠŸæˆèº«é€€äº†ã€‚</p>
<p>ç§‘æŠ€åœ¨è¿›æ­¥ï¼Œæ—¶ä»£åœ¨å‘å‰ï¼Œè™½ç„¶æˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªæ€€æ—§çš„äººï¼Œä½†ä¹Ÿä¸æƒ³è¢«æ½®æµç”©å¼€å¤ªè¿œã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> vim </tag>
            
            <tag> ide </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è°ˆè°ˆæ³¨é‡Š]]></title>
      <url>/2018/01/19/%E8%B0%88%E8%B0%88%E6%B3%A8%E9%87%8A/</url>
      <content type="html"><![CDATA[<p>å¤§å®¶è‚¯å®šéƒ½æœ‰å†™è¿‡æ³¨é‡Šï¼Œæ³¨é‡Šè¿™ä¸ªä¸œè¥¿ä¸åŒäºä»£ç ï¼Œä¸ç¨‹åºé€»è¾‘çš„æ­£ç¡®æ€§æ²¡æœ‰ç›´æ¥çš„å…³ç³»ï¼Œæ‰€ä»¥æ¯ä¸ªäººå¯èƒ½éƒ½æœ‰è‡ªå·±çš„é£æ ¼ï¼Œæ¯ä¸ªäººå¯¹å“ªé‡Œåº”è¯¥å†™æ³¨é‡Šï¼Œæ³¨é‡Šåº”è¯¥å†™æˆä»€ä¹ˆæ ·å­å¯èƒ½éƒ½æœ‰è‡ªå·±çš„ç†è§£ã€‚</p>
<p>æˆ‘ä¸ªäººå¯¹æ³¨é‡Šçš„ç†è§£ç»å†äº†å››ä¸ªé˜¶æ®µã€‚</p>
<p>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œå®Œå…¨ä¸å†™æ³¨é‡Šï¼Œè¿™ä¸ªé˜¶æ®µè¿˜å¤„åœ¨ä»£ç é€»è¾‘çš„å®ç°ä¸Šé¢ï¼ŒèŠ±å¤§é‡çš„æ—¶é—´å»è°ƒè¯•ï¼Œä¿®æ”¹ä»£ç ï¼Œæ ¹æœ¬å°±æ— æš‡é¡¾åŠåˆ°æ³¨é‡Šè¿™ä¸ªäº‹æƒ…ã€‚è¿‡äº†ä¸€æ®µæ—¶é—´åï¼Œå‘ç°ä¹‹å‰å†™çš„åˆè‡­åˆé•¿çš„ä»£ç å®Œå…¨çœ‹ä¸æ˜ç™½äº†ï¼Œæ‰æ„è¯†åˆ°æ³¨é‡Šçš„é‡è¦æ€§ï¼Œäºæ˜¯å¼€å§‹æ…¢æ…¢è¿›å…¥äº†ç¬¬äºŒä¸ªé˜¶æ®µã€‚</p>
<p>ç¬¬äºŒä¸ªé˜¶æ®µï¼Œå“ªå“ªéƒ½æ˜¯æ³¨é‡Šï¼Œæ¯ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªç±»ï¼Œæ¯ä¸ªå‡½æ•°ï¼Œè®¾ç½®æ¯ä¸ªåˆ†æ”¯ï¼Œæ¯ä¸ªå˜é‡ï¼Œéƒ½æœ‰ä¸€ä¸ªæ³¨é‡Šæ¥è¯´æ˜ï¼Œå°±æ€•æ¼æ‰æŸä¸ªå°ç»†èŠ‚ç„¶åå°±çœ‹ä¸æ‡‚äº†ã€‚åæ¥åˆå‘ç°äº†ä¸€ä¸ªå«åšæ–‡æ¡£æ³¨é‡Šçš„ä¸œè¥¿ï¼ˆdoxygenï¼‰ï¼Œè¿™ä¸ªä¸œè¥¿ä¸è¦å¤ªé…·ï¼Œå¯ä»¥æ ¹æ®ä½ çš„å†™çš„æ³¨é‡Šç›´æ¥ç”Ÿæˆæ–‡æ¡£ï¼Œäºæ˜¯åˆ°å¤„éƒ½æ˜¯æ–‡æ¡£æ³¨é‡Šï¼Œæ¯ä¸ªæ–‡ä»¶é‡Œé¢éƒ½æœ‰ä¸€æ®µç®€ä»‹ï¼Œè€Œç®€ä»‹é‡Œé¢æœ€é‡è¦çš„å†…å®¹å¯èƒ½å°±æ˜¯ <code>@author: hatlonely</code>ï¼Œç”Ÿæ€•åˆ«äººä¸çŸ¥é“è¿™äº›è¿™ä¹ˆlowçš„ä»£ç æ˜¯ä½ å†™å‡ºæ¥çš„ğŸ¤¦â€â™€ï¸ï¼Œæ¯ä¸ªå‡½æ•°å‚æ•°ï¼Œå‡½æ•°å‚æ•°çš„è¿”å›å€¼ç­‰ç­‰ï¼Œä¹Ÿéƒ½æœ‰è¯¦å°½çš„æ³¨é‡Šï¼Œæ³¨é‡Šçš„é•¿åº¦å·²ç»è¿œè¿œè¶…è¿‡äº†ä»£ç çš„é•¿åº¦ã€‚çœ‹èµ·æ¥å¥½åƒå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çœ‹ä¸æ‡‚ä¹‹å‰å†™çš„ä»£ç äº†ï¼Œç„¶è€Œï¼Œä¸€æ®µæ—¶é—´å½“æˆ‘é‡æ–°è¯»åˆ°addè¿™ä¸ªå‡½æ•°çš„æ³¨é‡Šçš„æ—¶å€™ï¼Œæˆ‘å‘ç°è¿™äº›ä¿¡æ¯å¯¹æˆ‘æ¥è¯´å¥½åƒå¹¶æ²¡æœ‰ç”¨ï¼Œè¿™æ®µä»£ç å·²ç»è¶³å¤Ÿçš„æ¸…æ™°ç®€å•ï¼Œç”šè‡³æ¯”æ³¨é‡Šæ›´å®¹æ˜“è¯»æ‡‚ï¼Œé‚£è¿™ä¸ªæ³¨é‡Šåœ¨è¿™é‡Œå­˜åœ¨çš„æ„ä¹‰åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Œä»…ä»…æ˜¯ä¸ºäº†ç”Ÿæˆæ–‡æ¡£æ³¨é‡Šå—ï¼Ÿè€Œæ›´å¤§çš„é—®é¢˜å¯èƒ½æ˜¯ï¼Œå¦‚æœæˆ‘è¦æ–°å¢ä¸€ä¸ªå‡½æ•°ï¼Œ<code>add3(int a, int b, int c)</code> æˆ‘ä¸å¾—ä¸æŒ‰ç…§ä¹‹å‰çš„æ–‡æ¡£æ³¨é‡Šæ ¼å¼å†™ä¸€å¤§å †çš„æ³¨é‡Šâ€¦â€¦æ³¨é‡Šçš„ç»´æŠ¤ä¹Ÿæ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œæ¯æ¬¡é€»è¾‘çš„å˜æ›´ï¼Œéƒ½éœ€è¦å»æ”¹å¯¹åº”çš„æ³¨é‡Šï¼Œå¦‚æœå¿˜è®°ä¿®æ”¹ï¼Œæ³¨é‡Šå’Œä»£ç é€»è¾‘çš„ä¸ä¸€è‡´ä¼šè®©äººæ›´åŠ å›°æƒ‘ã€‚äºæ˜¯æ³¨é‡Šçš„ç»´æŠ¤å˜æˆäº†ä¸€ä»¶éå¸¸æ— èŠçš„äº‹æƒ…ï¼Œå¤§å¤§åœ°é™ä½äº†ç¼–ç¨‹ä½“éªŒï¼Œè€Œå¦ä¸€æ–¹é¢å†—é•¿ç¹å¤çš„æ³¨é‡Šä¹Ÿé™ä½äº†ä»£ç çš„é˜…è¯»ä½“éªŒã€‚</p>
<pre><code class="c++">// @file: è°ˆè°ˆæ³¨é‡Š.md
// @date: 2018-01-19 14:00
// @author: hatlonely
// @brief: ä¸€äº›å¯¹æ³¨é‡Šçš„ç†è§£

// @brief: æ±‚ä¸¤ä¸ªæ•°çš„å’Œ 
// @param a åŠ æ•°
// @param b è¢«åŠ æ•°
// @return å’Œ
int add(int a, int b) {
    return a + b;
}
</code></pre>
<p>ç¬¬ä¸‰ä¸ªé˜¶æ®µï¼Œä»£ç å³æ³¨é‡Šã€‚çªç„¶æœ‰ä¸€å¤©ï¼Œçœ‹åˆ°ä¸€ä¸ªè§‚ç‚¹ï¼Œä»£ç æ˜¯ä¸€ç§è‰ºæœ¯ï¼Œæœ¬èº«å°±æ˜¯ç¾ï¼Œå°±åƒæ˜¯è¯—æ­Œï¼Œä½ è§è¿‡ä¸€é¦–è¯—æ­Œé‡Œé¢æ’å…¥äº†å¾ˆå¤šæ³¨é‡Šå—ï¼Ÿæ³¨é‡Šä¸æ˜¯å¯¹ä»£ç çš„ç¿»è¯‘ï¼Œè€Œç»å¤§å¤šæ•°æ—¶å€™ï¼Œä½ åœ¨è€ƒè™‘ç”¨ä¸€ä¸ªæ³¨é‡Šè§£é‡Šä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¾€å¾€å¯ä»¥é€šè¿‡ä¸€ä¸ªå¥½çš„å˜é‡åæ¥é¿å…è¿™ä¸ªæ³¨é‡Šï¼ŒåŒæ ·ï¼Œå½“ä½ è¦æ³¨é‡ŠæŸæ®µé€»è¾‘çš„æ—¶å€™ï¼Œä¹Ÿå¾€å¾€å¯ä»¥é€šè¿‡ä¼˜åŒ–è¿™æ®µé€»è¾‘ç»“æ„ï¼Œä½¿ç”¨ä¸€äº›å¯è¯»æ€§æ›´å¼ºçš„å˜é‡æ¥æè¿°æŸäº›è¿‡ç¨‹ã€‚äºæ˜¯æˆ‘å»æ‰äº†æ‰€æœ‰çš„æ³¨é‡Šï¼Œå¼€å§‹ç¼–å†™å¯è¯»æ€§æ›´å¼ºçš„ä»£ç ï¼Œå¼€å§‹çº ç»“æ¯ä¸€ä¸ªæ™®é€šçš„å°å˜é‡çš„å‘½åï¼Œå¼€å§‹ç«™åœ¨æ™®é€šäººçš„è§’åº¦å»æ€è€ƒä»£ç çš„é€»è¾‘ï¼Œè®©ä»£ç æ›´è´´è¿‘è‡ªç„¶è¯­è¨€ï¼ŒæŠŠè®©æ²¡æœ‰ä»»ä½•è®¡ç®—æœºåŸºç¡€çš„äººéƒ½èƒ½è¯»æ‡‚æˆ‘çš„ä»£ç ä½œä¸ºç›®æ ‡ã€‚äºæ˜¯ç°åœ¨ä»£ç çœ‹èµ·æ¥æ¸…çˆ½äº†ä¸å°‘ï¼Œä»£ç æœ¬è¯¥å¦‚æ­¤ç®€å•ã€‚ä½†æ˜¯æˆ‘æ»¡æ„äº†å—ï¼Ÿå¹¶æ²¡æœ‰ã€‚</p>
<p>ç¬¬å››ä¸ªé˜¶æ®µï¼Œå¿…è¦çš„æ³¨é‡Šã€‚æ¯•ç«Ÿä»£ç ä¸æ˜¯è¯—æ­Œï¼Œå¦‚æœæ²¡æœ‰å½“æ—¶çš„æ–‡åŒ–èƒŒæ™¯ä»¥åŠåˆ«äººçš„è§£è¯»ï¼Œå¤§éƒ¨åˆ†æ˜¯è¯—æ­Œæ™®é€šäººåº”è¯¥ä¹Ÿæ˜¯è¯»ä¸æ‡‚çš„å§ã€‚ä»£ç é€»è¾‘æ˜¯ç”±ç‰¹å®šçš„åœºæ™¯å†³å®šï¼ŒåŒä¸€ä»½ä»£ç åœ¨ä¸åŒçš„åœºæ™¯ä¸‹é¢ä¹Ÿå¯èƒ½æ˜¯å®Œå…¨ä¸åŒçš„å«ä¹‰ï¼Œæ‰€ä»¥ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·ä¸€ä¸ªé€»è¾‘ï¼Œæ˜¯è¿™ä¸ªåœºæ™¯ä¸‹ç‰¹å®šçš„èƒŒæ™¯æ‰€å†³å®šçš„ï¼Œè€Œä»£ç æœ¬èº«å¹¶ä¸èƒ½åŒ…å«è¿™äº›èƒŒæ™¯ä¿¡æ¯ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œå…³äºiosè¿‡æ»¤çš„è¿™æ®µé€»è¾‘ï¼Œæ˜¯å› ä¸ºç›®å‰çš„ä¸šåŠ¡ä¸Šæš‚æ—¶è¿˜æ²¡æœ‰è¿™ä¸ªéœ€æ±‚å†³å®šçš„ï¼Œè¿™é‡Œçš„æ³¨é‡Šç»™äº†æˆ‘ä»¬ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œå¯¹æˆ‘ä»¬ç†è§£è¿™æ®µé€»è¾‘æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œå¦‚æœæ²¡æœ‰è¿™æ®µæ³¨é‡Šï¼Œä¸€ä¸ªæœˆåï¼Œä½ å¯èƒ½ä¹Ÿå¿˜è®°äº†ä¸ºä»€ä¹ˆè¦æœ‰iosè¿™æ ·ä¸€ä¸ªç‰¹æ®Šçš„é€»è¾‘ï¼Œä¸æ•¢åŠ¨ä¹Ÿä¸çŸ¥é“ï¼Œä¹…è€Œä¹…ä¹‹è¿™äº›ä»£ç å°±æˆäº†è°œä¸€æ ·çš„å­˜åœ¨ã€‚å—¯ï¼Œçœ‹èµ·æ¥å¾ˆä¼˜é›…ï¼Œç°åœ¨æˆ‘æ»¡æ„äº†ï¼</p>
<pre><code class="golang">func checkDeviceType(info DeviceInfo, deviceTypeSet map[int32]struct{}) bool {
    // iosçš„è®¾å¤‡ç±»å‹ä¸æƒ³androidé‚£ä¹ˆå¤šï¼Œæš‚æ—¶è¿˜æ²¡æœ‰å®šå‘éœ€æ±‚
    if info.platform != &quot;ios&quot; {
        return true
    }

    if _, ok := deviceTypeSet[info.deviceType]; ok {
        return true
    }
    return false
}
</code></pre>
<p>ä¸‹ä¸€ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯æ—¶å€™æé«˜ä¸€ä¸‹è‡ªå·±çš„è¡¨è¿°èƒ½åŠ›äº†ğŸ¤£ğŸ¤£ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> æ³¨é‡Š </tag>
            
            <tag> ç¼–ç é£æ ¼ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang slice æ€§èƒ½åˆ†æ]]></title>
      <url>/2018/01/18/golang-slice-%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>golang åœ¨ gc è¿™å—çš„åšå¾—æ¯”è¾ƒå¼±ï¼Œé¢‘ç¹åœ°ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ä¼šæ¶ˆè€—å¾ˆå¤šçš„èµ„æºã€‚å¦å¤– slice ä½¿ç”¨æ•°ç»„å®ç°ï¼Œæœ‰ä¸€ä¸ªå®¹é‡å’Œé•¿åº¦çš„é—®é¢˜ï¼Œå½“ slice çš„å®¹é‡ç”¨å®Œå†ç»§ç»­æ·»åŠ å…ƒç´ æ—¶éœ€è¦æ‰©å®¹ï¼Œè€Œè¿™ä¸ªæ‰©å®¹ä¼šæŠŠç”³è¯·æ–°çš„ç©ºé—´ï¼ŒæŠŠè€çš„å†…å®¹å¤åˆ¶åˆ°æ–°çš„ç©ºé—´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸è€—æ—¶çš„æ“ä½œã€‚æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å‡å°‘è¿™ä¸ªé—®é¢˜å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼š</p>
<ol>
<li>åœ¨ slice åˆå§‹åŒ–çš„æ—¶å€™è®¾ç½® capacityï¼ˆä½†æ›´å¤šçš„æ—¶å€™æˆ‘ä»¬å¯èƒ½å¹¶ä¸çŸ¥é“ capacity çš„å¤§å°ï¼‰</li>
<li>å¤ç”¨ slice</li>
</ol>
<p>ä¸‹é¢å°±é’ˆå¯¹è¿™ä¸¤ä¸ªä¼˜åŒ–è®¾è®¡äº†å¦‚ä¸‹çš„benchmarkï¼Œä»£ç åœ¨: <a href="https://github.com/hatlonely/hellogolang/blob/master/internal/buildin/slice_test.go" target="_blank" rel="noopener">https://github.com/hatlonely/hellogolang/blob/master/internal/buildin/slice_test.go</a></p>
<pre><code>BenchmarkAppendWithoutCapacity-8                     100      21442390 ns/op
BenchmarkAppendWithCapLessLen10th-8                  100      18579700 ns/op
BenchmarkAppendWithCapLessLen3th-8                   100      13867060 ns/op
BenchmarkAppendWithCapEqualLen-8                     200       6287940 ns/op
BenchmarkAppendWithCapGreaterLen10th-8               100      18692880 ns/op
BenchmarkAppendWithoutCapacityReuse-8                300       5014320 ns/op
BenchmarkAppendWithCapEqualLenReuse-8                300       4821420 ns/op
BenchmarkAppendWithCapGreaterLen10thReuse-8          300       4903230 ns/op
</code></pre><h3 id="ä¸»è¦ç»“è®º"><a href="#ä¸»è¦ç»“è®º" class="headerlink" title="ä¸»è¦ç»“è®º"></a>ä¸»è¦ç»“è®º</h3><ol>
<li>åœ¨å·²çŸ¥ capacity çš„æƒ…å†µä¸‹ï¼Œç›´æ¥è®¾ç½® capacity å‡å°‘å†…å­˜çš„é‡æ–°åˆ†é…ï¼Œæœ‰æ•ˆæé«˜æ€§èƒ½</li>
<li>capacity &lt; lengthï¼Œcapacity è¶Šæ¥è¿‘ lengthï¼Œæ€§èƒ½è¶Šå¥½</li>
<li>capacity &gt; lengthï¼Œå¦‚æœå¤ªå¤§ï¼Œåè€Œä¼šé€ æˆæ€§èƒ½ä¸‹é™ï¼Œè¿™é‡Œå½“ capacity &gt; 10 * lengthæ—¶ï¼Œä¸ä¸è®¾ç½® capacity çš„æ€§èƒ½å·®ä¸å¤ªå¤š</li>
<li>å¤šæ¬¡ä½¿ç”¨å¤ç”¨åŒä¸€å—å†…å­˜èƒ½æœ‰æ•ˆæé«˜æ€§èƒ½</li>
</ol>
<h3 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h3><pre><code class="go">func BenchmarkAppendWithoutCapacity(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        var arr []int
        for i := 0; i &lt; N; i++ {
            arr = append(arr, i)
        }
    }
}

func BenchmarkAppendWithCapLessLen10th(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        arr := make([]int, 0, N/10)
        for i := 0; i &lt; N; i++ {
            arr = append(arr, i)
        }
    }
}

func BenchmarkAppendWithCapLessLen3th(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        arr := make([]int, 0, N/3)
        for i := 0; i &lt; N; i++ {
            arr = append(arr, i)
        }
    }
}

func BenchmarkAppendWithCapEqualLen(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        arr := make([]int, 0, N)
        for i := 0; i &lt; N; i++ {
            arr = append(arr, i)
        }
    }
}

func BenchmarkAppendWithCapGreaterLen10th(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        arr := make([]int, 0, N*10)
        for i := 0; i &lt; N; i++ {
            arr = append(arr, i)
        }
    }
}

func BenchmarkAppendWithoutCapacityReuse(b *testing.B) {
    var arr []int
    for i := 0; i &lt; b.N; i++ {
        arr = arr[:0]
        for i := 0; i &lt; N; i++ {
            arr = append(arr, i)
        }
    }
}

func BenchmarkAppendWithCapEqualLenReuse(b *testing.B) {
    arr := make([]int, N)
    for i := 0; i &lt; b.N; i++ {
        arr = arr[:0]
        for i := 0; i &lt; N; i++ {
            arr = append(arr, i)
        }
    }
}

func BenchmarkAppendWithCapGreaterLen10thReuse(b *testing.B) {
    arr := make([]int, N*10)
    for i := 0; i &lt; b.N; i++ {
        arr = arr[:0]
        for i := 0; i &lt; N; i++ {
            arr = append(arr, i)
        }
    }
}
</code></pre>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> æ€§èƒ½ </tag>
            
            <tag> slice </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[golang å¼€å‘ç›®å½•ç»“æ„]]></title>
      <url>/2018/01/16/golang-%E5%BC%80%E5%8F%91%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/</url>
      <content type="html"><![CDATA[<p>åœ¨å®é™…çš„é¡¹ç›®ä¸­å‘ç°å¤§å®¶çš„ç›®å½•ç»“æ„éƒ½æ¯”è¾ƒå‡Œä¹±ï¼ŒåŸºæœ¬æ¯ä¸ªäººéƒ½æœ‰æ¯ä¸ªäººçš„é£æ ¼ï¼Œä¸€ä¸ªé¡¹ç›®åœ¨ä¸æ–­åœ°å˜å¤§ï¼Œä¸€äº›æ–°çš„æ–‡ä»¶æˆ–ç›®å½•åˆä¸æ–­åœ°è¢«æ·»åŠ è¿›æ¥ï¼Œä»è¿™é‡Œé¢å»æ‰¾åˆ°è‡ªå·±éœ€è¦çš„ä¿¡æ¯çš„æˆæœ¬è¶Šæ¥è¶Šé«˜ï¼Œä¸€ä¸ªç»Ÿä¸€çš„é€šç”¨çš„ç›®å½•ç»“æ„éå¸¸æœ‰å¿…è¦ã€‚</p>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªäºgithubä¸Šçš„è¿™ä¸ªé¡¹ç›®ï¼ˆ<a href="https://github.com/golang-standards/project-layout" target="_blank" rel="noopener">https://github.com/golang-standards/project-layout</a>ï¼‰</p>
<h3 id="cmd"><a href="#cmd" class="headerlink" title="/cmd"></a><code>/cmd</code></h3><p>mainå‡½æ•°æ–‡ä»¶ï¼ˆæ¯”å¦‚ <code>/cmd/myapp.go</code>ï¼‰ç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¸‹é¢ï¼Œæ¯ä¸ªæ–‡ä»¶åœ¨ç¼–è¯‘ä¹‹åéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚</p>
<p>ä¸è¦æŠŠå¾ˆå¤šçš„ä»£ç æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹é¢ï¼Œè¿™é‡Œé¢çš„ä»£ç å°½å¯èƒ½ç®€å•ã€‚</p>
<h3 id="internal"><a href="#internal" class="headerlink" title="/internal"></a><code>/internal</code></h3><p>åº”ç”¨ç¨‹åºçš„å°è£…çš„ä»£ç ï¼ŒæŸä¸ªåº”ç”¨ç§æœ‰çš„ä»£ç æ”¾åˆ° <code>/internal/myapp/</code> ç›®å½•ä¸‹ï¼Œå¤šä¸ªåº”ç”¨é€šç”¨çš„å…¬å…±çš„ä»£ç ï¼Œæ”¾åˆ° <code>/internal/common</code> ä¹‹ç±»çš„ç›®å½•ã€‚</p>
<h3 id="pkg"><a href="#pkg" class="headerlink" title="/pkg"></a><code>/pkg</code></h3><p>ä¸€äº›é€šç”¨çš„å¯ä»¥è¢«å…¶ä»–é¡¹ç›®æ‰€ä½¿ç”¨çš„ä»£ç ï¼Œæ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹é¢</p>
<h3 id="vendor"><a href="#vendor" class="headerlink" title="/vendor"></a><code>/vendor</code></h3><p>é¡¹ç›®ä¾èµ–çš„å…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼Œä½¿ç”¨ <a href="https://github.com/Masterminds/glide" target="_blank" rel="noopener"><code>glide</code></a> å·¥å…·æ¥ç®¡ç†ä¾èµ–</p>
<h3 id="api"><a href="#api" class="headerlink" title="/api"></a><code>/api</code></h3><p>åè®®æ–‡ä»¶ï¼Œ<code>Swagger/thrift/protobuf</code> ç­‰</p>
<h3 id="web"><a href="#web" class="headerlink" title="/web"></a><code>/web</code></h3><p>webæœåŠ¡æ‰€éœ€è¦çš„é™æ€æ–‡ä»¶</p>
<h3 id="configs"><a href="#configs" class="headerlink" title="/configs"></a><code>/configs</code></h3><p>é…ç½®æ–‡ä»¶</p>
<h3 id="init"><a href="#init" class="headerlink" title="/init"></a><code>/init</code></h3><p>æœåŠ¡å¯åœè„šæœ¬</p>
<h3 id="scripts"><a href="#scripts" class="headerlink" title="/scripts"></a><code>/scripts</code></h3><p>å…¶ä»–ä¸€äº›è„šæœ¬ï¼Œç¼–è¯‘ã€å®‰è£…ã€æµ‹è¯•ã€åˆ†æç­‰ç­‰</p>
<h3 id="build"><a href="#build" class="headerlink" title="/build"></a><code>/build</code></h3><p>æŒç»­é›†æˆç›®å½•</p>
<p>äº‘ (AMI), å®¹å™¨ (Docker), æ“ä½œç³»ç»Ÿ (deb, rpm, pkg)ç­‰çš„åŒ…é…ç½®å’Œè„šæœ¬æ”¾åˆ° <code>/build/package/</code> ç›®å½•</p>
<h3 id="deployments"><a href="#deployments" class="headerlink" title="/deployments"></a><code>/deployments</code></h3><p>éƒ¨ç½²ç›¸å…³çš„é…ç½®æ–‡ä»¶å’Œæ¨¡æ¿</p>
<h3 id="test"><a href="#test" class="headerlink" title="/test"></a><code>/test</code></h3><p>å…¶ä»–æµ‹è¯•ç›®å½•ï¼ŒåŠŸèƒ½æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•ç­‰</p>
<h3 id="docs"><a href="#docs" class="headerlink" title="/docs"></a><code>/docs</code></h3><p>è®¾è®¡æ–‡æ¡£</p>
<h3 id="tools"><a href="#tools" class="headerlink" title="/tools"></a><code>/tools</code></h3><p>å¸¸ç”¨çš„å·¥å…·å’Œè„šæœ¬ï¼Œå¯ä»¥å¼•ç”¨ <code>/internal</code> æˆ–è€… <code>/pkg</code> é‡Œé¢çš„åº“</p>
<h3 id="examples"><a href="#examples" class="headerlink" title="/examples"></a><code>/examples</code></h3><p>åº”ç”¨ç¨‹åºæˆ–è€…å…¬å…±åº“ä½¿ç”¨çš„ä¸€äº›ä¾‹å­</p>
<h3 id="assets"><a href="#assets" class="headerlink" title="/assets"></a><code>/assets</code></h3><p>å…¶ä»–ä¸€äº›ä¾èµ–çš„é™æ€èµ„æº</p>
]]></content>
      
        
        <tags>
            
            <tag> golang </tag>
            
            <tag> å¼€å‘ </tag>
            
            <tag> ç›®å½•ç»“æ„ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ã€Šmicroservice & serverlessã€‹by è”¡è¶…çš„ä¸€ç‚¹æ„Ÿæƒ³]]></title>
      <url>/2018/01/12/%E3%80%8Amicroservice-&amp;-serverless%E3%80%8Bby-%E8%94%A1%E8%B6%85%E7%9A%84%E4%B8%80%E7%82%B9%E6%84%9F%E6%83%B3/</url>
      <content type="html"><![CDATA[<p>è¶…å“¥æ˜¯æ¥è‡ªAmazonçš„é¡¶çº§çš„æ¶æ„å¸ˆï¼Œç»å†äº†Amazonæ•´ä¸ªå‘å¾®æœåŠ¡æ¶æ„è¿ç§»çš„è¿‡ç¨‹ï¼Œä»¥åŠå‘serverlessçš„æ¼”åŒ–è¿‡ç¨‹ï¼Œæœ‰ç€æå…¶ä¸°å¯Œçš„ç»éªŒï¼Œå¹´è¿‡40ï¼Œä¸€ç›´ç«™åœ¨æŠ€æœ¯çš„æœ€å‰æ²¿ï¼Œå§‹ç»ˆä¿æŒå¯¹æŠ€æœ¯çš„æ‰§ç€è¿½æ±‚å’Œçƒ­æƒ…ï¼Œæ˜¯åå‰¯å…¶å®çš„æŠ€æœ¯å¤§ç‰›ï¼Œèƒ½ä¸ä¹‹ä¸€èµ·å·¥ä½œï¼Œè£å¹¸ä¹‹è‡³ï¼ä»Šå¤©è¶…å“¥ç»™æˆ‘ä»¬åˆ†äº«çš„ä¸»é¢˜ã€Šmicroservice &amp; serverlessã€‹ï¼Œæ˜¯è¶…å“¥å®é™…å·¥ä½œç»éªŒçš„ä¸€äº›åˆ†äº«ï¼Œä¹Ÿä¸ºå…¬å¸æ¶æ„çš„æ¼”åŒ–æä¾›äº†æ–°çš„æ€è·¯å’ŒæŒ‡å¯¼ã€‚</p>
<p>microserviceï¼ˆå¾®æœåŠ¡ï¼‰è¿™ä¸ªå¯èƒ½æ˜¯è¿™äº›å¹´æœ€ç«çš„ä¸€ç§æ¶æ„è®¾è®¡äº†ï¼Œé¢‘ç¹åœ°å‡ºç°åœ¨å„ç§æŠ€æœ¯å¤§ä¼šä¸Šï¼Œå„å¤§äº’è”ç½‘å·¨å¤´çº·çº·å‘è¿™ç§æ¶æ„æ¼”åŒ–ï¼Œå¾ˆå¤šå°çš„äº’è”ç½‘å…¬å¸ä¹Ÿå¾€è¿™äº›æ¦‚å¿µä¸Šå»é ï¼Œå¤§æœ‰ä¸€ç§ä¸åšå¾®æœåŠ¡å°±è¦è½ä¼çš„è¶‹åŠ¿ã€‚äº‹å®ä¸Šï¼Œå¾ˆå¤šå¯¹äºå¾®æœåŠ¡çš„ç†è§£æ¯”è¾ƒç²—æµ…ï¼Œç›²ç›®çš„å¾®æœåŠ¡åŒ–ç”šè‡³ä¼šå¸¦æ¥æ›´å¤šçš„è´Ÿé¢å½±å“ã€‚</p>
<p>ç›®å‰Amazonå†…éƒ¨è¿è¡Œç€è¶…è¿‡2wè¿‡å¾®æœåŠ¡ï¼Œä½†æ˜¯è¿™äº›å¾®æœåŠ¡å¹¶ä¸æ˜¯å‡­ç©ºäº§ç”Ÿçš„ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œè¿è¡Œçš„æœåŠ¡éƒ½æ˜¯è¶…å¤§çš„å•ä½“æœåŠ¡ï¼Œä½†æ˜¯éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œè¿™ç§æœåŠ¡åœ¨æ•´ä¸ªç ”å‘çš„pipelineï¼ˆè®¾è®¡â†’ç ”å‘â†’ç¼–è¯‘â†’æµ‹è¯•â†’å‘å¸ƒâ†’éƒ¨ç½²â†’è¿ç»´ï¼‰ä¸­éƒ½å‡ºç°äº†ä¸€äº›é—®é¢˜ã€‚è®¾è®¡é˜¶æ®µï¼Œè€çš„å•ä½“æœåŠ¡ä¼šç»™æˆ‘ä»¬å¸¦æ¥ä¸€äº›æŠ€æœ¯é™åˆ¶ï¼Œæ¯”å¦‚æœ‰äº›æŠ€æœ¯åªæœ‰pythonè¯­è¨€çš„å®ç°ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æœåŠ¡ä½¿ç”¨javaå¼€å‘ï¼Œè¿™æ ·æˆ‘ä»¬ä¸å¾—ä¸æ‹¿å‡ºä¸€ä¸ªæ›´å¤æ‚çš„è®¾è®¡å»è§£å†³ç±»ä¼¼çš„é—®é¢˜ï¼›ç ”å‘é˜¶æ®µï¼Œéšç€å¼€å‘äººæ•°è¶Šæ¥è¶Šå¤šï¼Œä»£ç å†²çªçš„é—®é¢˜è¶Šæ¥è¶Šå¤šï¼Œæˆ‘ä»¬ä¸å¾—ä¸èŠ±æ›´å¤šçš„æ—¶é—´å»åšè¿™ç§æ— è¶£åˆæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰çš„äº‹æƒ…ï¼›ç¼–è¯‘é˜¶æ®µï¼Œè¶Šæ¥è¶Šå¤šçš„ä¾èµ–å¾ˆå®¹æ˜“é€ æˆç‰ˆæœ¬å†²çªï¼Œä¸åŒçš„ç‰ˆæœ¬ä¹Ÿä¼šå¼•å‘å…¼å®¹æ€§çš„é—®é¢˜ï¼Œè€Œè¿™ç§é—®é¢˜å¦‚æœåœ¨è¿è¡Œæ—¶æ‰æš´éœ²å‡ºæ¥å¯èƒ½ä¼šé€ æˆä¸¥é‡ä¸šåŠ¡å½±å“ï¼›éƒ¨ç½²é˜¶æ®µï¼Œå¾ˆå¤šçš„ç‰¹æ€§æ‰“åŒ…åœ¨ä¸€èµ·å‘å¸ƒï¼Œç‰¹æ€§è¶Šå¤šï¼Œå‡ºé—®é¢˜çš„æ¦‚ç‡ä¹Ÿå°±è¶Šå¤§ï¼›è€Œæœ€è‡´å‘½çš„æ˜¯è¿ç»´é˜¶æ®µæ²¡æœ‰å›æ»šæ–¹æ¡ˆï¼Œä¸€æ¬¡ä¸Šçº¿ä¸­å¯èƒ½åŒ…å«å¾ˆå¤šçš„ç‰¹æ€§ï¼Œè€Œå…¶ä¸­ä»»ä½•ä¸€æ¡ç‰¹æ€§çš„bugå°±éœ€è¦å›æ»šï¼Œç„¶åå¯èƒ½æœ‰äº›ç‰¹æ€§éœ€è¦å˜æ›´æ•°æ®æ ¼å¼ï¼Œæ–°ç‰¹æ€§èƒ½å‘å‰å…¼å®¹è€çš„æ•°æ®æ ¼å¼ï¼Œä½†æ˜¯å›æ»šåå´æ— æ³•å¤„ç†æ–°çš„æ•°æ®æ ¼å¼ï¼Œå› æ­¤æ— æ³•å›æ»šâ€¦â€¦å°±æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒAmazonå¼€å§‹æœå¾®æœåŠ¡çš„æ¶æ„æ¼”åŒ–ã€‚</p>
<p>å¾®æœåŠ¡æ‘†è„±äº†å•ä½“æœåŠ¡æŠ€æœ¯çš„æŸç¼šï¼Œå¯ä»¥è‡ªç”±åœ°æ ¹æ®ä¸šåŠ¡çš„ç‰¹ç‚¹ï¼Œé€‰æ‹©æœ€é€‚åˆçš„æŠ€æœ¯å»å®ç°è‡ªå·±çš„æœåŠ¡ï¼›å°†ä¸€ä¸ªå¤§çš„å¼€å‘æµç¨‹æ‹†æˆäº†å¾ˆå¤šä¸ªå°çš„ç‹¬ç«‹çš„å¼€å‘æµç¨‹ï¼Œå½¼æ­¤ä¹‹é—´ä¸åœ¨ç›¸äº’ä¾èµ–ï¼Œå¤§å¤§ç¼©çŸ­äº†é¡¹ç›®å‘¨æœŸï¼›ä»£ç å†²çªçš„é—®é¢˜ä¹Ÿå¾—åˆ°äº†å¾ˆå¥½çš„æ”¹å–„ï¼›æ¯æ¬¡å‘å¸ƒçš„ç‰¹æ€§å¾ˆå°‘ï¼Œæ¯å¤©éƒ½èƒ½å‘å¸ƒï¼Œè€Œä¸”èƒ½åšåˆ°å¿«é€Ÿå›æ»šã€‚çœŸæ­£åšåˆ°ï¼ŒæŒç»­é›†æˆï¼ŒæŒç»­äº¤ä»˜ï¼Œæ•æ·å¼€å‘ã€‚</p>
<p>å¾®æœåŠ¡æ¶æ„åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›æ–°çš„é—®é¢˜ã€‚ç›¸æ¯”ä¸å•ä½“æœåŠ¡ï¼Œå¾®æœåŠ¡çš„æ¶æ„æ•°æ®çš„ä¼ è¾“ä¾èµ–äºrpcçš„è°ƒç”¨ï¼Œè¿™ä¸ªè°ƒç”¨ä¼šå¸¦æ¥ä¸€äº›é¢å¤–çš„ç½‘ç»œè€—æ—¶ï¼Œè¿™ç§è€—æ—¶å¾€å¾€éœ€è¦ä¸šåŠ¡ä¸Šé¢å»è€ƒè™‘æ˜¯å¦èƒ½å®¹å¿ï¼Œè¿™ç§rpcçš„è°ƒç”¨æ”¶åˆ°ç½‘ç»œç¯å¢ƒçš„å½±å“ï¼Œå¤±è´¥æ˜¯å¾ˆæ­£å¸¸äº‹æƒ…ï¼Œå› æ­¤éœ€è¦å¤±è´¥é‡è¯•æœºåˆ¶ï¼Œäºæ˜¯ä»£ç é‡Œé¢åˆ°å¤„éƒ½å……æ–¥ç€å¤±è´¥é‡è¯•çš„å†—ä½™ä»£ç ï¼Œå½±å“ä»£ç çš„å¯è¯»æ€§ï¼Œæ›´ç³Ÿç³•çš„æ˜¯ä¼šæœ‰é›ªå´©æ•ˆåº”ï¼Œå½“æŸä¸ªåº•å±‚æœåŠ¡å‡ºç°é—®é¢˜æ—¶ï¼Œæ¯”å¦‚å“åº”æ—¶é—´è¿‡é•¿ï¼Œæˆ–è€…æ— æ³•è®¿é—®ï¼Œè¿™ç§å½±å“ä¼šå±‚å±‚ä¼ é€’åˆ°ä¸Šå±‚ï¼Œæœ€ç»ˆå¯¼è‡´æ•´ä¸ªä¸šåŠ¡ç³»ç»ŸæŒ‚æ‰ï¼›åœ¨æµ‹è¯•ä¸Šé¢ä¹Ÿä¼šå˜å¾—æ›´åŠ å›°éš¾ï¼Œä¹‹å‰éƒ½åœ¨ä¸€ä¸ªå®ä¾‹é‡Œé¢ï¼Œç°åœ¨ä¸€ä¸ªæœåŠ¡ä¾èµ–å¾ˆå¤šå…¶ä»–çš„å¾®æœåŠ¡ï¼Œæµ‹è¯•çš„æ—¶å€™éƒ½éœ€è¦å»mockï¼Œæ—¥å¿—ä¹Ÿä¼šåˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡ä¸‹é¢ï¼Œé—®é¢˜æ’æŸ¥æ¯”è¾ƒå›°éš¾ï¼›æ­¤å¤–ï¼Œæ•°æ®åˆ†å¸ƒåœ¨ä¸åŒçš„å¾®æœåŠ¡ä¸Šï¼Œåœ¨æ•°æ®ä¸€è‡´æ€§ä¸Šä¹Ÿä¼šæœ‰äº›é—®é¢˜ã€‚æ‰€ä»¥åœ¨è¿›è¡Œå¾®æœåŠ¡è®¾è®¡çš„æ—¶å€™ä¹Ÿè¦ç‰¹åˆ«æ³¨æ„è¿™äº›é¢å¤–çš„è´Ÿé¢å½±å“ï¼Œå°è£…é‡è¯•é€»è¾‘ï¼Œå¼•å…¥ç†”æ–­å’Œé™æµæœºåˆ¶ï¼Œç»Ÿä¸€çš„æ—¥å¿—æ”¶é›†æ–¹å¼ã€‚</p>
<p>serverlessï¼ˆæ— æœåŠ¡å™¨ï¼‰æ¶æ„å¯èƒ½æ˜¯ä¸ºäº†è®©devOpsä»ç¹å¤çš„è¿ç»´å·¥ä½œä¸­è§£æ”¾å‡ºæ¥çš„å…¨æ–°æ¶æ„ï¼Œæœ€å¤§çš„ç‰¹ç‚¹æ˜¯æ•´ä¸ªç³»ç»ŸåŸºäºAWSæä¾›çš„å„ç§æœåŠ¡ï¼Œèƒ½å¤Ÿåšåˆ°è‡ªåŠ¨çš„æ‹“å±•ä»¥åŠæŒ‰æµé‡è®¡è´¹ï¼Œä¸å†éœ€è¦äººåŠ›å»ç»´æŠ¤ï¼Œå¤§å¤§æé«˜äº†æ•ˆç‡ï¼ŒåŒæ—¶æŒ‰çœŸå®æµé‡çš„è®¡è´¹å¯¹æˆæœ¬ä¹Ÿæœ‰å¯èƒ½ä¼šæœ‰ä¼˜åŒ–ã€‚è€ŒFassæ¶æ„ï¼ŒæŠŠä¸šåŠ¡éœ€æ±‚å°è£…åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå¼€å‘äººå‘˜åªéœ€è¦å…³æ³¨è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œç„¶åé€šè¿‡ç½‘é¡µæäº¤å°±èƒ½å®Œæˆä¸Šçº¿ã€‚æˆ‘åœ¨æƒ³ï¼Œå½“è¿™äº›æŠ€æœ¯çœŸæ­£æˆç†Ÿå’Œæ™®åŠçš„æ—¶å€™ï¼Œå¯èƒ½æ¯ä¸ªæ™®é€šäººï¼Œéšä¾¿èŠ±ç‚¹æ—¶é—´å­¦ç‚¹pythonï¼Œä¹Ÿèƒ½åšå‡ºä¸€ä¸ªçš„æœåŠ¡ï¼Œè€Œé‚£ä¸ªæ—¶å€™ï¼Œæˆ‘çš„ä»·å€¼åˆæ˜¯ä»€ä¹ˆï¼ï¼Ÿ</p>
]]></content>
      
        
        <tags>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> æ— æœåŠ¡æ¶æ„ </tag>
            
            <tag> serverless </tag>
            
            <tag> microservice </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
